!function(){"use strict";var Yo=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},Pn=function(t){return{eq:t}},Td=Pn(function(t,e){return t===e}),vl=function(t){return Pn(function(e,n){if(e.length!==n.length)return!1;for(var o=e.length,r=0;r<o;r++)if(!t.eq(e[r],n[r]))return!1;return!0})},yl=function(t){return Pn(function(e,n){var l,d,u,o=Object.keys(e),r=Object.keys(n);if(!(l=Td,d=vl(l),u=function(d){return Array.prototype.slice.call(d).sort(undefined)},Pn(function(m,p){return d.eq(u(m),u(p))})).eq(o,r))return!1;for(var a=o.length,s=0;s<a;s++){var i=o[s];if(!t.eq(e[i],n[i]))return!1}return!0})},Le=Pn(function(t,e){if(t===e)return!0;var n=Yo(t);return n===Yo(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?vl(Le).eq(t,e):"object"===n&&yl(Le).eq(t,e))});const gn=Object.getPrototypeOf,Os=(t,e,n)=>{var o;return!!n(t,e.prototype)||(null===(o=t.constructor)||void 0===o?void 0:o.name)===e.name},Nr=t=>e=>(n=>{const o=typeof n;return null===n?"null":"object"===o&&Array.isArray(n)?"array":"object"===o&&Os(n,String,(r,a)=>a.isPrototypeOf(r))?"string":o})(e)===t,Ar=t=>e=>typeof e===t,Rr=t=>e=>t===e,_a=(t,e)=>le(t)&&Os(t,e,(n,o)=>gn(n)===o),at=Nr("string"),le=Nr("object"),xa=t=>_a(t,Object),Yt=Nr("array"),Ee=Rr(null),Mn=Ar("boolean"),ce=Rr(void 0),ue=t=>null==t,q=t=>!ue(t),kt=Ar("function"),re=Ar("number"),wn=(t,e)=>{if(Yt(t)){for(let n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},Ct=()=>{},de=(t,e)=>(...n)=>t(e.apply(null,n)),Pt=(t,e)=>n=>t(e(n)),G=t=>()=>t,me=t=>t,Go=(t,e)=>t===e;function et(t,...e){return(...n)=>{const o=e.concat(n);return t.apply(null,o)}}const So=t=>e=>!t(e),Sa=t=>()=>{throw new Error(t)},Bs=t=>t(),ko=t=>{t()},Gt=G(!1),se=G(!0);class C{constructor(e,n){this.tag=e,this.value=n}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return q(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);const Tr=Array.prototype.slice,Cl=Array.prototype.indexOf,ka=Array.prototype.push,wl=(t,e)=>Cl.call(t,e),Bt=(t,e)=>wl(t,e)>-1,ee=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},At=(t,e)=>{const n=t.length,o=new Array(n);for(let r=0;r<n;r++)o[r]=e(t[r],r);return o},z=(t,e)=>{for(let n=0,o=t.length;n<o;n++)e(t[n],n)},Ds=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},Xo=(t,e)=>{const n=[],o=[];for(let r=0,a=t.length;r<a;r++){const s=t[r];(e(s,r)?n:o).push(s)}return{pass:n,fail:o}},gt=(t,e)=>{const n=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];e(a,o)&&n.push(a)}return n},Zo=(t,e,n)=>(Ds(t,(o,r)=>{n=e(n,o,r)}),n),Ke=(t,e,n)=>(z(t,(o,r)=>{n=e(n,o,r)}),n),Ls=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++){const a=t[o];if(e(a,o))return C.some(a);if(n(a,o))break}return C.none()},fe=(t,e)=>Ls(t,e,Gt),Or=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return C.some(n);return C.none()},El=t=>{const e=[];for(let n=0,o=t.length;n<o;++n){if(!Yt(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);ka.apply(e,t[n])}return e},an=(t,e)=>El(At(t,e)),$n=(t,e)=>{for(let n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},Br=t=>{const e=Tr.call(t,0);return e.reverse(),e},Na=(t,e)=>gt(t,n=>!Bt(e,n)),$t=(t,e)=>{const n={};for(let o=0,r=t.length;o<r;o++){const a=t[o];n[String(a)]=e(a,o)}return n},Ot=(t,e)=>{const n=Tr.call(t,0);return n.sort(e),n},xt=(t,e)=>e>=0&&e<t.length?C.some(t[e]):C.none(),It=t=>xt(t,0),pe=t=>xt(t,t.length-1),Oe=kt(Array.from)?Array.from:t=>Tr.call(t),No=(t,e)=>{for(let n=0;n<t.length;n++){const o=e(t[n],n);if(o.isSome())return o}return C.none()},_l=(t,e)=>{const n=[],o=kt(e)?r=>ee(n,a=>e(a,r)):r=>Bt(n,r);for(let r=0,a=t.length;r<a;r++){const s=t[r];o(s)||n.push(s)}return n},Pe=Object.keys,xl=Object.hasOwnProperty,Ft=(t,e)=>{const n=Pe(t);for(let o=0,r=n.length;o<r;o++){const a=n[o];e(t[a],a)}},Dr=(t,e)=>Od(t,(n,o)=>({k:o,v:e(n,o)})),Od=(t,e)=>{const n={};return Ft(t,(o,r)=>{const a=e(o,r);n[a.k]=a.v}),n},Ps=t=>(e,n)=>{t[n]=e},Lr=(t,e,n,o)=>{Ft(t,(r,a)=>{(e(r,a)?n:o)(r,a)})},Wn=(t,e)=>{const n={};return Lr(t,e,Ps(n),Ct),n},Aa=(t,e)=>{const n=[];return Ft(t,(o,r)=>{n.push(e(o,r))}),n},Ms=t=>Aa(t,me),Kt=(t,e)=>bt(t,e)?C.from(t[e]):C.none(),bt=(t,e)=>xl.call(t,e),Vn=(t,e)=>bt(t,e)&&null!=t[e],Ue=t=>{const e={};return z(t,n=>{e[n]={}}),Pe(e)},Qo=t=>void 0!==t.length,Pr=Array.isArray,Ra=(t,e,n)=>{if(!t)return!1;if(n=n||t,Qo(t)){for(let o=0,r=t.length;o<r;o++)if(!1===e.call(n,t[o],o,t))return!1}else for(const o in t)if(bt(t,o)&&!1===e.call(n,t[o],o,t))return!1;return!0},Is=(t,e)=>{const n=[];return Ra(t,(o,r)=>{n.push(e(o,r,t))}),n},Mr=(t,e)=>{const n=[];return Ra(t,(o,r)=>{e&&!e(o,r,t)||n.push(o)}),n},Ta=(t,e,n,o)=>{let r=ce(n)?t[0]:n;for(let a=0;a<t.length;a++)r=e.call(o,r,t[a],a);return r},ze=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++)if(e.call(n,t[o],o,t))return o;return-1},qn=t=>t[t.length-1],pn=t=>{let e,n=!1;return(...o)=>(n||(n=!0,e=t.apply(null,o)),e)},Oa=()=>Fs(0,0),Fs=(t,e)=>({major:t,minor:e}),Ir={nu:Fs,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?Oa():((o,r)=>{const a=((i,l)=>{for(let c=0;c<i.length;c++){const d=i[c];if(d.test(l))return d}})(o,r);if(!a)return{major:0,minor:0};const s=i=>Number(r.replace(a,"$"+i));return Fs(s(1),s(2))})(t,n)},unknown:Oa},Sl=(t,e)=>{const n=String(e).toLowerCase();return fe(t,o=>o.search(n))},Us=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,kl=(t,e)=>Dt(t,e)?t.substring(e.length):t,_e=(t,e,n=0,o)=>{const r=t.indexOf(e,n);return-1!==r&&(!!ce(o)||r+e.length<=o)},Dt=(t,e)=>Us(t,e,0),Ba=(t,e)=>Us(t,e,t.length-e.length),xe=t=>e=>e.replace(t,""),Ao=xe(/^\s+|\s+$/g),he=xe(/^\s+/g),Jo=xe(/\s+$/g),hn=t=>t.length>0,tr=t=>!hn(t),er=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?C.none():C.some(n)},Da=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,In=t=>e=>_e(e,t),nr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>_e(t,"edge/")&&_e(t,"chrome")&&_e(t,"safari")&&_e(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Da],search:t=>_e(t,"chrome")&&!_e(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>_e(t,"msie")||_e(t,"trident")},{name:"Opera",versionRegexes:[Da,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:In("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:In("firefox")},{name:"Safari",versionRegexes:[Da,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(_e(t,"safari")||_e(t,"mobile/"))&&_e(t,"applewebkit")}],zs=[{name:"Windows",search:In("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>_e(t,"iphone")||_e(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:In("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:In("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:In("linux"),versionRegexes:[]},{name:"Solaris",search:In("sunos"),versionRegexes:[]},{name:"FreeBSD",search:In("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:In("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ao={browsers:G(nr),oses:G(zs)},Pa="Chromium",Fr="Firefox",Hs=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isEdge:o("Edge"),isChromium:o(Pa),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(Fr),isSafari:o("Safari")}},Nl=()=>Hs({current:void 0,version:Ir.unknown()}),js=Hs,or=(G("Edge"),G(Pa),G("IE"),G("Opera"),G(Fr),G("Safari"),"Windows"),To="Android",Ws="Solaris",Vs="FreeBSD",Ma="ChromeOS",qs=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isWindows:o(or),isiOS:o("iOS"),isAndroid:o(To),isMacOS:o("macOS"),isLinux:o("Linux"),isSolaris:o(Ws),isFreeBSD:o(Vs),isChromeOS:o(Ma)}},Ia=()=>qs({current:void 0,version:Ir.unknown()}),Fa=qs,Kn=(G(or),G("iOS"),G(To),G("Linux"),G("macOS"),G(Ws),G(Vs),G(Ma),t=>window.matchMedia(t).matches);let rr=pn(()=>((t,e,n)=>{const o=ao.browsers(),r=ao.oses(),a=e.bind(l=>{return c=o,No(l.brands,u=>{const m=u.brand.toLowerCase();return fe(c,p=>{var f;return m===(null===(f=p.brand)||void 0===f?void 0:f.toLowerCase())}).map(p=>({current:p.name,version:Ir.nu(parseInt(u.version,10),0)}))});var c}).orThunk(()=>{return Sl(o,c=t).map(d=>{const u=Ir.detect(d.versionRegexes,c);return{current:d.name,version:u}});var c}).fold(Nl,js),s=(l=r,c=t,Sl(l,c).map(d=>{const u=Ir.detect(d.versionRegexes,c);return{current:d.name,version:u}})).fold(Ia,Fa),i=((l,c,d,u)=>{const m=l.isiOS()&&!0===/ipad/i.test(d),p=l.isiOS()&&!m,f=l.isiOS()||l.isAndroid(),h=f||u("(pointer:coarse)"),g=m||!p&&f&&u("(min-device-width:768px)"),b=p||f&&!g,v=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(d),y=!b&&!g&&!v;return{isiPad:G(m),isiPhone:G(p),isTablet:G(g),isPhone:G(b),isTouch:G(h),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:G(v),isDesktop:G(y)}})(s,a,t,n);var l,c;return{browser:a,os:s,deviceType:i}})(window.navigator.userAgent,C.from(window.navigator.userAgentData),Kn));const bn=()=>rr(),Ks=window.navigator.userAgent,Ys=bn(),sn=Ys.browser,ln=Ys.os,Bo=Ys.deviceType,zr=-1!==Ks.indexOf("Windows Phone"),Rt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:sn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!sn.isIE(),windowsPhone:zr,browser:{current:sn.current,version:sn.version,isChromium:sn.isChromium,isEdge:sn.isEdge,isFirefox:sn.isFirefox,isIE:sn.isIE,isOpera:sn.isOpera,isSafari:sn.isSafari},os:{current:ln.current,version:ln.version,isAndroid:ln.isAndroid,isChromeOS:ln.isChromeOS,isFreeBSD:ln.isFreeBSD,isiOS:ln.isiOS,isLinux:ln.isLinux,isMacOS:ln.isMacOS,isSolaris:ln.isSolaris,isWindows:ln.isWindows},deviceType:{isDesktop:Bo.isDesktop,isiPad:Bo.isiPad,isiPhone:Bo.isiPhone,isPhone:Bo.isPhone,isTablet:Bo.isTablet,isTouch:Bo.isTouch,isWebView:Bo.isWebView}},Be=/^\s*|\s*$/g,Do=t=>ue(t)?"":(""+t).replace(Be,""),Al=function(t,e,n,o){o=o||this,t&&(n&&(t=t[n]),Ra(t,(r,a)=>!1!==e.call(o,r,a,n)&&(Al(r,e,n,o),!0)))},W={trim:Do,isArray:Pr,is:(t,e)=>e?!("array"!==e||!Pr(t))||typeof t===e:void 0!==t,toArray:t=>{if(Pr(t))return t;{const e=[];for(let n=0,o=t.length;n<o;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const o=at(t)?t.split(e||","):t||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:Ra,map:Is,grep:Mr,inArray:(t,e)=>{if(t)for(let n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},hasOwn:bt,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(bt(o,r)){const a=o[r];void 0!==a&&(t[r]=a)}}return t},walk:Al,resolve:(t,e=window)=>{const n=t.split(".");for(let o=0,r=n.length;o<r&&(e=e[n[o]]);o++);return e},explode:(t,e)=>Yt(t)?t:""===t?[]:Is(t.split(e||","),Do),_addCacheSuffix:t=>{const e=Rt.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},so=(t,e,n=Go)=>t.exists(o=>n(o,e)),Gs=(t,e,n=Go)=>Se(t,e,n).getOr(t.isNone()&&e.isNone()),Se=(t,e,n)=>t.isSome()&&e.isSome()?C.some(n(t.getOrDie(),e.getOrDie())):C.none(),Ye=(t,e)=>t?C.some(e):C.none(),Ua=typeof window<"u"?window:Function("return this;")(),Xs=(t,e)=>((n,o)=>{let r=o??Ua;for(let a=0;a<n.length&&null!=r;++a)r=r[n[a]];return r})(t.split("."),e),Rl=Object.getPrototypeOf,Nt=t=>t.dom.nodeName.toLowerCase(),Fn=t=>t.dom.nodeType,Hr=t=>e=>Fn(e)===t,jr=t=>Ge(t)&&(t=>{const e=Xs("ownerDocument.defaultView",t);return le(t)&&((n=e,((o,r)=>{const a=Xs(o,r);if(null==a)throw new Error(o+" not available on this browser");return a})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Rl(t).constructor.name));var n})(t.dom),Ge=Hr(1),Me=Hr(3),Bd=Hr(9),D=Hr(11),pt=t=>e=>Ge(e)&&Nt(e)===t,ct=(t,e,n)=>{if(!(at(n)||Mn(n)||re(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Et=(t,e,n)=>{ct(t.dom,e,n)},Lt=(t,e)=>{const n=t.dom;Ft(e,(o,r)=>{ct(n,r,o)})},St=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},oe=(t,e)=>C.from(St(t,e)),cn=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},ne=(t,e)=>{t.dom.removeAttribute(e)},He=t=>Ke(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),za=(t,e)=>{const n=St(t,e);return void 0===n||""===n?[]:n.split(" ")},ar=t=>void 0!==t.dom.classList,Qg=t=>za(t,"class"),Jg=(t,e)=>((n,o,r)=>{const a=za(n,o).concat([r]);return Et(n,o,a.join(" ")),!0})(t,"class",e),tp=(t,e)=>((n,o,r)=>{const a=gt(za(n,o),s=>s!==r);return a.length>0?Et(n,o,a.join(" ")):ne(n,o),!1})(t,"class",e),Ha=(t,e)=>{ar(t)?t.dom.classList.add(e):Jg(t,e)},ep=t=>{0===(ar(t)?t.dom.classList:Qg(t)).length&&ne(t,"class")},Qs=(t,e)=>{ar(t)?t.dom.classList.remove(e):tp(t,e),ep(t)},Dd=(t,e)=>ar(t)&&t.dom.classList.contains(e),Js=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},Tl=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,t),new Error(o)}return Js(n.childNodes[0])},ke=(t,e)=>{const n=(e||document).createElement(t);return Js(n)},ja=(t,e)=>{const n=(e||document).createTextNode(t);return Js(n)},R=Js,np=(t,e)=>{const n=[],o=a=>(n.push(a),e(a));let r=e(t);do{r=r.bind(o)}while(r.isSome());return n},Yn=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},op=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,Mt=(t,e)=>t.dom===e.dom,Gn=(t,e)=>{const n=t.dom,o=e.dom;return n!==o&&n.contains(o)},rp=t=>R(t.dom.ownerDocument),sr=t=>Bd(t)?t:rp(t),ti=t=>R(sr(t).dom.defaultView),Xn=t=>C.from(t.dom.parentNode).map(R),Ol=t=>C.from(t.dom.parentElement).map(R),ap=(t,e)=>{const n=kt(e)?e:Gt;let o=t.dom;const r=[];for(;null!=o.parentNode;){const a=o.parentNode,s=R(a);if(r.push(s),!0===n(s))break;o=a}return r},ir=t=>C.from(t.dom.previousSibling).map(R),ei=t=>C.from(t.dom.nextSibling).map(R),sp=t=>Br(np(t,ir)),ip=t=>np(t,ei),je=t=>At(t.dom.childNodes,R),$a=(t,e)=>C.from(t.dom.childNodes[e]).map(R),Ld=t=>$a(t,0),Pd=t=>$a(t,t.dom.childNodes.length-1),Md=t=>t.dom.childNodes.length,Id=t=>D(t)&&q(t.dom.host),lr=t=>R(t.dom.getRootNode()),Fd=t=>Id(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return R(n)})(sr(t)),$x=t=>R(t.dom.host),lp=t=>{if(q(t.target)){const e=R(t.target);if(Ge(e)&&Wx(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return It(n)}}return C.from(t.target)},Wx=t=>q(t.dom.shadowRoot),Wa=t=>{const e=Me(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(o=>{const r=lr(o);return Id(r)?C.some(r):C.none()})(R(e)).fold(()=>n.body.contains(e),Pt(Wa,$x))};var cp=(t,e,n,o,r)=>t(n,o)?C.some(n):kt(r)&&r(n)?C.none():e(n,o,r);const Lo=(t,e,n)=>{let o=t.dom;const r=kt(n)?n:Gt;for(;o.parentNode;){o=o.parentNode;const a=R(o);if(e(a))return C.some(a);if(r(a))break}return C.none()},$r=(t,e,n)=>cp((o,r)=>r(o),Lo,t,e,n),Ud=(t,e)=>{const n=o=>{for(let r=0;r<o.childNodes.length;r++){const a=R(o.childNodes[r]);if(e(a))return C.some(a);const s=n(o.childNodes[r]);if(s.isSome())return s}return C.none()};return n(t.dom)},ni=(t,e,n)=>Lo(t,o=>Yn(o,e),n),Bl=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return op(r)?C.none():C.from(r.querySelector(n)).map(R)})(e,t),Va=(t,e,n)=>cp((o,r)=>Yn(o,r),ni,t,e,n),Wr=(t,e=!1)=>{return Wa(t)?t.dom.isContentEditable:(n=t,Va(n,"[contenteditable]")).fold(G(e),o=>"true"===Vx(o));var n},Vx=t=>t.dom.contentEditable,oi=t=>void 0!==t.style&&kt(t.style.getPropertyValue),dp=(t,e,n)=>{if(!at(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);oi(t)&&t.style.setProperty(e,n)},up=(t,e,n)=>{dp(t.dom,e,n)},Dl=(t,e)=>{const n=t.dom;Ft(e,(o,r)=>{dp(n,r,o)})},io=(t,e)=>{const n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||Wa(t)?o:mp(n,e)},mp=(t,e)=>oi(t)?t.style.getPropertyValue(e):"",Ll=(t,e)=>{const o=mp(t.dom,e);return C.from(o).filter(r=>r.length>0)},zd=t=>{const e={},n=t.dom;if(oi(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);e[r]=n.style[r]}return e},fp=(t,e)=>{var n,o;o=e,oi(n=t.dom)&&n.style.removeProperty(o),so(oe(t,"style").map(Ao),"")&&ne(t,"style")},dn=(t,e)=>{Xn(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},Po=(t,e)=>{ei(t).fold(()=>{Xn(t).each(n=>{be(n,e)})},n=>{dn(n,e)})},Hd=(t,e)=>{Ld(t).fold(()=>{be(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},be=(t,e)=>{t.dom.appendChild(e.dom)},gp=(t,e)=>{dn(t,e),be(e,t)},Vr=(t,e)=>{z(e,n=>{be(t,n)})},qa=t=>{t.dom.textContent="",z(je(t),e=>{Jt(e)})},Jt=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},cr=t=>{const e=je(t);var n,o;e.length>0&&(n=t,z(o=e,(r,a)=>{Po(0===a?n:o[a-1],r)})),Jt(t)},jd=t=>At(t,R),pp=t=>t.dom.innerHTML,Pl=(t,e)=>{const n=rp(t).dom,o=R(n.createDocumentFragment()),r=((a,s)=>{const i=(s||document).createElement("div");return i.innerHTML=a,je(R(i))})(e,n);Vr(o,r),qa(t),be(t,o)},Kx=(t,e,n,o)=>{t.dom.removeEventListener(e,n,o)},hp=(t,e)=>({left:t,top:e,translate:(n,o)=>hp(t+n,e+o)}),Ka=hp,Ml=(t,e)=>void 0!==t?t:void 0!==e?e:0,$d=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?Ka(n.offsetLeft,n.offsetTop):Wa(t)?(o=>{const r=o.getBoundingClientRect();return Ka(r.left,r.top)})(e):Ka(0,0)},Wd=t=>{const e=void 0!==t?t.dom:document;return Ka(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},bp=(t,e,n)=>{const o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)},vp=(t,e)=>{bn().browser.isSafari()&&kt(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},yp=(t,e,n,o)=>({x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}),Cp=t=>{const e=void 0===t?window:t,o=Wd(R(e.document));return(r=>{const a=void 0===r?window:r;return bn().browser.isFirefox()?C.none():C.from(a.visualViewport)})(e).fold(()=>{const r=e.document.documentElement;return yp(o.left,o.top,r.clientWidth,r.clientHeight)},r=>yp(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},wp=(t,e)=>{let n=[];return z(je(t),o=>{e(o)&&(n=n.concat([o])),n=n.concat(wp(o,e))}),n},tn=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return op(r)?[]:At(r.querySelectorAll(n),R)})(e,t),Ep=(t,e,n)=>Lo(t,e,n).isSome(),_p=(t,e)=>Ud(t,e).isSome();class Ne{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,o,r){if(e){if(!r&&e[n])return e[n];if(e!==this.rootNode){let a=e[o];if(a)return a;for(let s=e.parentNode;s&&s!==this.rootNode;s=s.parentNode)if(a=s[o],a)return a}}}findPreviousNode(e,n){if(e){const o=e.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n)for(let a=o.lastChild;a;a=a.lastChild)if(!a.lastChild)return a;return o}const r=e.parentNode;if(r&&r!==this.rootNode)return r}}}const ye="\xa0",Vd=t=>"\ufeff"===t,Gx=/^[ \t\r\n]*$/,Ya=t=>Gx.test(t),xp=t=>"\n"===t||"\r"===t,Sp=(t,e=4,n=!0,o=!0)=>{const r=(l=e)<=0?"":new Array(l+1).join(" "),a=t.replace(/\t/g,r);var l;return Ke(a,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===ye?i.pcIsSpace||""===i.str&&n||i.str.length===a.length-1&&o||(d=i.str.length+1)<(c=a).length&&d>=0&&xp(c[d])?{pcIsSpace:!1,str:i.str+ye}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:xp(l),str:i.str+l};var c,d},{pcIsSpace:!1,str:""}).str},qr=t=>e=>!!e&&e.nodeType===t,Il=t=>!!t&&!Object.getPrototypeOf(t),ot=qr(1),Mo=t=>ot(t)&&jr(R(t)),ai=t=>{const e=t.toLowerCase();return n=>q(n)&&n.nodeName.toLowerCase()===e},Zn=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return Bt(e,o)}return!1}},Fl=(t,e)=>{const n=e.toLowerCase().split(" ");return o=>{if(ot(o)){const r=o.ownerDocument.defaultView;if(r)for(let a=0;a<n.length;a++){const s=r.getComputedStyle(o,null);if((s?s.getPropertyValue(t):null)===n[a])return!0}}return!1}},Kr=t=>ot(t)&&t.hasAttribute("data-mce-bogus"),lo=t=>ot(t)&&"TABLE"===t.tagName,kp=t=>e=>!(!Mo(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),qd=Zn(["textarea","input"]),$=qr(3),Xx=qr(4),Zx=qr(7),dr=qr(8),si=qr(9),Kd=qr(11),ae=ai("br"),Np=ai("img"),Un=kp("true"),Xt=kp("false"),Ul=Zn(["td","th"]),Qx=Zn(["td","th","caption"]),co=Zn(["video","audio","object","embed"]),Jx=ai("li"),Yd=ai("details"),tS=ai("summary"),Ap={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Gd=(t,e,n,o)=>{return kt(o.isContent)&&o.isContent(e)||(a=t,ot(r=e)&&bt(a.getNonEmptyElements(),r.nodeName))||(t=>ot(t)&&t.hasAttribute("data-mce-bookmark"))(e)||(r=>ot(r)&&"A"===r.nodeName&&!r.hasAttribute("href")&&(r.hasAttribute("name")||r.hasAttribute("id")))(e)||((t,e,n,o)=>{return $(t)&&(a=e,s=n,!(Ya((r=t).data)&&!((i,l,c)=>{const d=R(l),u=R(i),m=c.getWhitespaceElements();return Ep(u,p=>bt(m,Nt(p)),et(Mt,d))})(r,a,s)))&&(!o.includeZwsp||!(r=>{for(const a of r)if(!Vd(a))return!1;return!0})(t.data));var r,a,s})(e,n,t,o)||Xt(e)||Un(e)&&(r=>Ol(R(r)).exists(a=>!Wr(a)))(e);var r,a},Io=(t,e,n)=>{const o={...Ap,...n};if(o.checkRootAsContent&&Gd(t,e,e,o))return!1;let r=e.firstChild,a=0;if(!r)return!0;const s=new Ne(r,e);do{if(o.skipBogus&&ot(r)){const i=r.getAttribute("data-mce-bogus");if(i){r=s.next("all"===i);continue}}if(dr(r))r=s.next(!0);else if(ae(r))a++,r=s.next();else{if(Gd(t,r,e,o))return!1;r=s.next()}}while(r);return a<=1},$e=(t,e,n)=>Io(t,e.dom,{checkRootAsContent:!0,...n}),Rp=(t,e,n)=>Gd(t,e,e,{includeZwsp:Ap.includeZwsp,...n}),Ae=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},oS=t=>{const e=Ae(C.none()),n=()=>e.get().each(o=>clearInterval(o));return{clear:()=>{n(),e.set(C.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:o=>{n(),e.set(C.some(setInterval(o,t)))}}},Fo=()=>{const t=(e=>{const n=Ae(C.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(C.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(C.some(r))}}})(Ct);return{...t,on:e=>t.get().each(e)}},Tp=t=>{const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":"html"},Yr=t=>"html"!==Tp(t),Xd=t=>Yr(t.nodeName),Op=t=>Tp(t.nodeName),rS=["svg","math"],zl="data-mce-block",Zd=t=>{return At((e=t,gt(Pe(e),n=>!/[A-Z]/.test(n))),e=>{const n=CSS.escape(e);return`${n}:`+At(rS,o=>`not(${o} ${n})`).join(":")}).join(",");var e},Bp=(t,e)=>q(e.querySelector(t))?(e.setAttribute(zl,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(zl),!1),Dp=(t,e)=>{const n=Zd(t.getTransparentElements()),o=Zd(t.getBlockElements());return gt(e.querySelectorAll(n),r=>Bp(o,r))},Lp=(t,e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let a=e[r];a;a=a[r])if(Io(t,a,{checkRootAsContent:!0}))return void(null===(o=a.parentNode)||void 0===o||o.removeChild(a))},Qd=(t,e)=>{const n=Dp(t,e);var o,r,a;((t,e,n)=>{const o=t.getBlockElements(),r=R(e),a=i=>Nt(i)in o,s=i=>Mt(i,r);z(jd(n),i=>{Lo(i,a,s).each(l=>{const c=gt(je(i),m=>a(m)&&!t.isValidChild(Nt(l),Nt(m)));if(c.length>0){const d=Ol(l);z(c,u=>{Lo(u,a,s).each(m=>{((p,f,h)=>{const g=document.createRange(),b=f.parentNode;if(b){g.setStartBefore(f),g.setEndBefore(h);const v=g.extractContents();Lp(p,v,!0),g.setStartAfter(h),g.setEndAfter(f);const y=g.extractContents();Lp(p,y,!1),Io(p,v,{checkRootAsContent:!0})||b.insertBefore(v,f),Io(p,h,{checkRootAsContent:!0})||b.insertBefore(h,f),Io(p,y,{checkRootAsContent:!0})||b.insertBefore(y,f),b.removeChild(f)}})(t,m.dom,u.dom)})}),d.each(u=>Dp(t,u.dom))}})})})(t,e,n),o=t,r=e,a=n,z([...a,...Gr(o,r)?[r]:[]],s=>z(tn(R(s),s.nodeName.toLowerCase()),i=>{iS(o,i.dom)&&cr(i)}))},sS=(t,e)=>{if(eu(t,e)){const n=Zd(t.getBlockElements());Bp(n,e)}},Jd=t=>t.hasAttribute(zl),tu=(t,e)=>bt(t.getTransparentElements(),e),eu=(t,e)=>ot(e)&&tu(t,e.nodeName),Gr=(t,e)=>eu(t,e)&&Jd(e),iS=(t,e)=>eu(t,e)&&!Jd(e),nu=(t,e)=>1===e.type&&tu(t,e.name)&&at(e.attr(zl)),lS=bn().browser,Pp=t=>fe(t,Ge),Mp=(t,e)=>t.children&&Bt(t.children,e),Ip=(t,e={})=>{let n=0;const o={},r=R(t),a=sr(r),s=u=>{be(Fd(r),u)},i=u=>{const m=Fd(r);Bl(m,"#"+u).each(Jt)},l=u=>Kt(o,u).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),c=u=>new Promise((m,p)=>{let f;const h=W._addCacheSuffix(u),g=l(h);o[h]=g,g.count++;const b=(w,_)=>{z(w,ko),g.status=_,g.passed=[],g.failed=[],f&&(f.onload=null,f.onerror=null,f=null)},v=()=>b(g.passed,2),y=()=>b(g.failed,3);if(m&&g.passed.push(m),p&&g.failed.push(p),1===g.status)return;if(2===g.status)return void v();if(3===g.status)return void y();g.status=1;const E=ke("link",a.dom);Lt(E,{rel:"stylesheet",type:"text/css",id:g.id}),e.contentCssCors&&Et(E,"crossOrigin","anonymous"),e.referrerPolicy&&Et(E,"referrerpolicy",e.referrerPolicy),f=E.dom,f.onload=v,f.onerror=y,s(E),Et(E,"href",h)}),d=u=>{const m=W._addCacheSuffix(u);Kt(o,m).each(p=>{0==--p.count&&(delete o[m],i(p.id))})};return{load:c,loadRawCss:(u,m)=>{const p=l(u);o[u]=p,p.count++;const f=ke("style",a.dom);Lt(f,{rel:"stylesheet",type:"text/css",id:p.id}),f.dom.innerHTML=m,s(f)},loadAll:u=>Promise.allSettled(At(u,m=>c(m).then(G(m)))).then(m=>{const p=Xo(m,f=>"fulfilled"===f.status);return p.fail.length>0?Promise.reject(At(p.fail,f=>f.reason)):At(p.pass,f=>f.value)}),unload:d,unloadRawCss:u=>{Kt(o,u).each(m=>{0==--m.count&&(delete o[u],i(m.id))})},unloadAll:u=>{z(u,m=>{d(m)})},_setReferrerPolicy:u=>{e.referrerPolicy=u},_setContentCssCors:u=>{e.contentCssCors=u}}},Fp=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const o=lr(e).dom;return C.from(t.get(o)).getOrThunk(()=>{const r=Ip(o,n);return t.set(o,r),r})}}})(),Up=(t,e)=>q(t)&&(Rp(e,t)||e.isInline(t.nodeName.toLowerCase())),zp=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),ou=(t,e,n,o)=>{var r;const a=o||e;if(ot(e)&&zp(e))return e;const s=e.childNodes;for(let i=s.length-1;i>=0;i--)ou(t,s[i],n,a);if(ot(e)){const i=e.childNodes;1===i.length&&zp(i[0])&&(null===(r=e.parentNode)||void 0===r||r.insertBefore(i[0],e))}return Kd(i=e)||si(i)||Rp(n,e)||(i=>!!ot(i)&&i.childNodes.length>0)(e)||((i,l,c)=>$(i)&&i.data.length>0&&((d,u,m)=>{const p=new Ne(d,u).prev(!1),f=new Ne(d,u).next(!1),h=ce(p)||Up(p,m),g=ce(f)||Up(f,m);return h&&g})(i,l,c))(e,a,n)||t.remove(e),e;var i},cS=W.makeMap,Hl=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,jl=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dS=/[<>&\"\']/g,uS=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,mS={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Xr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},fS={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Hp=(t,e)=>{const n={};if(t){const o=t.split(",");e=e||10;for(let r=0;r<o.length;r+=2){const a=String.fromCharCode(parseInt(o[r],e));if(!Xr[a]){const s="&"+o[r+1]+";";n[a]=s,n[s]=a}}return n}},ru=Hp("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),jp=(t,e)=>t.replace(e?Hl:jl,n=>Xr[n]||n),$p=(t,e)=>t.replace(e?Hl:jl,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Xr[n]||"&#"+n.charCodeAt(0)+";"),au=(t,e,n)=>{const o=n||ru;return t.replace(e?Hl:jl,r=>Xr[r]||o[r]||r)},Zr={encodeRaw:jp,encodeAllRaw:t=>(""+t).replace(dS,e=>Xr[e]||e),encodeNumeric:$p,encodeNamed:au,getEncodeFunc:(t,e)=>{const n=Hp(e)||ru,o=cS(t.replace(/\+/g,","));return o.named&&o.numeric?(r,a)=>r.replace(a?Hl:jl,s=>void 0!==Xr[s]?Xr[s]:void 0!==n[s]?n[s]:s.length>1?"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";":"&#"+s.charCodeAt(0)+";"):o.named?e?(r,a)=>au(r,a,n):au:o.numeric?$p:jp},decode:t=>t.replace(uS,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):mS[n]||String.fromCharCode(n):fS[e]||ru[e]||(o=>{const r=ke("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(e))},Ie=(t,e)=>(t=W.trim(t))?t.split(e||" "):[],Wp=t=>new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),Vp=t=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==t?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],..."html5-strict"!==t?["xml:lang"]:[]]),qp=t=>{let e,n;e="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(e+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==t&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),e=[e,"center dir isindex noframes"].join(" "));const o=[e,n].join(" ");return{blockContent:e,phrasingContent:n,flowContent:o}},su=t=>{const{blockContent:e,phrasingContent:n,flowContent:o}=qp(t),r=a=>Object.freeze(a.split(" "));return Object.freeze({blockContent:r(e),phrasingContent:r(n),flowContent:r(o)})},gS={html4:pn(()=>su("html4")),html5:pn(()=>su("html5")),"html5-strict":pn(()=>su("html5-strict"))},Kp=(t,e)=>{const{blockContent:n,phrasingContent:o,flowContent:r}=gS[t]();return"blocks"===e?C.some(n):"phrasing"===e?C.some(o):"flow"===e?C.some(r):C.none()},iu=t=>C.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(t)).map(e=>({preset:"@"===e[1],name:e[2]})),$l={},ii=W.makeMap,Qn=W.each,Yp=W.extend,Gp=W.explode,Xp=(t,e={})=>{const n=ii(t," ",ii(t.toUpperCase()," "));return Yp(n,e)},Zp=t=>Xp("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),lu=(t,e)=>{if(t){const n={};return at(t)&&(t={"*":t}),Qn(t,(o,r)=>{n[r]=n[r.toUpperCase()]="map"===e?ii(o,/[, ]/):Gp(o,/[, ]/)}),n}},ur=(t={})=>{var e;const n={},o={};let r=[];const a={},s={},i=(Z,yt,_t)=>{const ht=t[Z];if(ht)return ii(ht,/[, ]/,ii(ht.toUpperCase(),/[, ]/));{let Tt=$l[Z];return Tt||(Tt=Xp(yt,_t),$l[Z]=Tt),Tt}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",c=(Z=>{const yt=Vp(Z),{phrasingContent:_t,flowContent:ht}=qp(Z),Tt={},Wt=(Ht,jt,ie)=>{Tt[Ht]={attributes:$t(jt,G({})),attributesOrder:jt,children:$t(ie,G({}))}},X=(Ht,jt="",ie="")=>{const De=Ie(ie),ro=Ie(Ht);let qe=ro.length;const Dn=[...yt,...Ie(jt)];for(;qe--;)Wt(ro[qe],Dn.slice(),De)},ut=(Ht,jt)=>{const ie=Ie(Ht),De=Ie(jt);let ro=ie.length;for(;ro--;){const qe=Tt[ie[ro]];for(let Dn=0,we=De.length;Dn<we;Dn++)qe.attributes[De[Dn]]={},qe.attributesOrder.push(De[Dn])}};return"html5-strict"!==Z&&(z(Ie("acronym applet basefont big font strike tt"),Ht=>{X(Ht,"",_t)}),z(Ie("center dir isindex noframes"),Ht=>{X(Ht,"",ht)})),X("html","manifest","head body"),X("head","","base command link meta noscript script style title"),X("title hr noscript br"),X("base","href target"),X("link","href rel media hreflang type sizes hreflang"),X("meta","name http-equiv content charset"),X("style","media type scoped"),X("script","src async defer type charset"),X("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",ht),X("dd div","",ht),X("address dt caption","","html4"===Z?_t:ht),X("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",_t),X("blockquote","cite",ht),X("ol","reversed start type","li"),X("ul","","li"),X("li","value",ht),X("dl","","dt dd"),X("a","href target rel media hreflang type","html4"===Z?_t:ht),X("q","cite",_t),X("ins del","cite datetime",ht),X("img","src sizes srcset alt usemap ismap width height"),X("iframe","src name width height",ht),X("embed","src type width height"),X("object","data type typemustmatch name usemap form width height",[ht,"param"].join(" ")),X("param","name value"),X("map","name",[ht,"area"].join(" ")),X("area","alt coords shape href target rel media hreflang type"),X("table","border","caption colgroup thead tfoot tbody tr"+("html4"===Z?" col":"")),X("colgroup","span","col"),X("col","span"),X("tbody thead tfoot","","tr"),X("tr","","td th"),X("td","colspan rowspan headers",ht),X("th","colspan rowspan headers scope abbr",ht),X("form","accept-charset action autocomplete enctype method name novalidate target",ht),X("fieldset","disabled form name",[ht,"legend"].join(" ")),X("label","form for",_t),X("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),X("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===Z?ht:_t),X("select","disabled form multiple name required size","option optgroup"),X("optgroup","disabled label","option"),X("option","disabled label selected value"),X("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),X("menu","type label",[ht,"li"].join(" ")),X("noscript","",ht),"html4"!==Z&&(X("wbr"),X("ruby","",[_t,"rt rp"].join(" ")),X("figcaption","",ht),X("mark rt rp bdi","",_t),X("summary","",[_t,"h1 h2 h3 h4 h5 h6"].join(" ")),X("canvas","width height",ht),X("data","value",_t),X("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[ht,"track source"].join(" ")),X("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[ht,"track source"].join(" ")),X("picture","","img source"),X("source","src srcset type media sizes"),X("track","kind src srclang label default"),X("datalist","",[_t,"option"].join(" ")),X("article section nav aside main header footer","",ht),X("hgroup","","h1 h2 h3 h4 h5 h6"),X("figure","",[ht,"figcaption"].join(" ")),X("time","datetime",_t),X("dialog","open",ht),X("command","type label icon disabled checked radiogroup command"),X("output","for form name",_t),X("progress","value max",_t),X("meter","value min max low high optimum",_t),X("details","open",[ht,"summary"].join(" ")),X("keygen","autofocus challenge disabled form keytype name"),Wt("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==Z&&(ut("script","language xml:space"),ut("style","xml:space"),ut("object","declare classid code codebase codetype archive standby align border hspace vspace"),ut("embed","align name hspace vspace"),ut("param","valuetype type"),ut("a","charset name rev shape coords"),ut("br","clear"),ut("applet","codebase archive code object alt name width height align hspace vspace"),ut("img","name longdesc align border hspace vspace"),ut("iframe","longdesc frameborder marginwidth marginheight scrolling align"),ut("font basefont","size color face"),ut("input","usemap align"),ut("select"),ut("textarea"),ut("h1 h2 h3 h4 h5 h6 div p legend caption","align"),ut("ul","type compact"),ut("li","type"),ut("ol dl menu dir","compact"),ut("pre","width xml:space"),ut("hr","align noshade size width"),ut("isindex","prompt"),ut("table","summary width frame rules cellspacing cellpadding align bgcolor"),ut("col","width align char charoff valign"),ut("colgroup","width align char charoff valign"),ut("thead","align char charoff valign"),ut("tr","align char charoff valign bgcolor"),ut("th","axis align char charoff valign nowrap bgcolor width height"),ut("form","accept"),ut("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),ut("tfoot","align char charoff valign"),ut("tbody","align char charoff valign"),ut("area","nohref"),ut("body","background bgcolor text link vlink alink")),"html4"!==Z&&(ut("input button select textarea","autofocus"),ut("input textarea","placeholder"),ut("a","download"),ut("link script img","crossorigin"),ut("img","loading"),ut("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),"html4"!==Z&&z([Tt.video,Tt.audio],Ht=>{delete Ht.children.audio,delete Ht.children.video}),z(Ie("a form meter progress dfn"),Ht=>{Tt[Ht]&&delete Tt[Ht].children[Ht]}),delete Tt.caption.children.table,delete Tt.script,Tt})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const d=lu(t.valid_styles),u=lu(t.invalid_styles,"map"),m=lu(t.valid_classes,"map"),p=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),g=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),b="td th iframe video audio object script code",v=i("non_empty_elements",b+" pre svg textarea summary",h),y=i("move_caret_before_on_enter_elements",b+" table",h),E="h1 h2 h3 h4 h5 h6",w=i("text_block_elements",E+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),_=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",w),k=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),S=i("transparent_elements","a ins del canvas map"),O=i("wrap_block_elements","pre "+E);Qn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Z=>{s[Z]=new RegExp("</"+Z+"[^>]*>","gi")});const P=Z=>{const yt=C.from(n["@"]),_t=/[*?+]/;z(((ht,Tt)=>{const Wt=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return an(Ie(Tt,","),X=>{const ut=Wt.exec(X);if(ut){const Ht=ut[1],jt=ut[2],ie=ut[3],De=ut[4],ro=ut[5],qe={attributes:{},attributesOrder:[]};if(ht.each(Dn=>{return Ea=qe,Ft((we=Dn).attributes,(Sr,wo)=>{Ea.attributes[wo]=Sr}),void Ea.attributesOrder.push(...we.attributesOrder);var we,Ea}),"#"===Ht?qe.paddEmpty=!0:"-"===Ht&&(qe.removeEmpty=!0),"!"===De&&(qe.removeEmptyAttrs=!0),ro&&((Dn,we)=>{const Ea=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Sr=/[*?+]/,{attributes:wo,attributesOrder:Ln}=we;z(Ie(Dn,"|"),kr=>{const Wo=Ea.exec(kr);if(Wo){const Eo={},Rd=Wo[1],rn=Wo[2].replace(/[\\:]:/g,":"),Ts=Wo[3],ge=Wo[4];if("!"===Rd&&(we.attributesRequired=we.attributesRequired||[],we.attributesRequired.push(rn),Eo.required=!0),"-"===Rd)return delete wo[rn],void Ln.splice(W.inArray(Ln,rn),1);if(Ts&&("="===Ts?(we.attributesDefault=we.attributesDefault||[],we.attributesDefault.push({name:rn,value:ge}),Eo.defaultValue=ge):"~"===Ts?(we.attributesForced=we.attributesForced||[],we.attributesForced.push({name:rn,value:ge}),Eo.forcedValue=ge):"<"===Ts&&(Eo.validValues=W.makeMap(ge,"?"))),Sr.test(rn)){const Vo=Eo;we.attributePatterns=we.attributePatterns||[],Vo.pattern=Wp(rn),we.attributePatterns.push(Vo)}else wo[rn]||Ln.push(rn),wo[rn]=Eo}})})(ro,qe),ie&&(qe.outputName=jt),"@"===jt){if(!ht.isNone())return[];ht=C.some(qe)}return[ie?{name:jt,element:qe,aliasName:ie}:{name:jt,element:qe}]}return[]})})(yt,Z??""),({name:ht,element:Tt,aliasName:Wt})=>{if(Wt&&(n[Wt]=Tt),_t.test(ht)){const X=Tt;X.pattern=Wp(ht),r.push(X)}else n[ht]=Tt})},x=Z=>{r=[],z(Pe(n),yt=>{delete n[yt]}),P(Z)},N=(Z,yt)=>{var _t,ht;delete $l.text_block_elements,delete $l.block_elements;const Tt=!!yt.extends&&!Zt(yt.extends),Wt=yt.extends;if(o[Z]=Wt?o[Wt]:{},a[Z]=Wt??Z,v[Z.toUpperCase()]={},v[Z]={},Tt||(_[Z.toUpperCase()]={},_[Z]={}),Wt&&!n[Z]&&n[Wt]){const X=(ut=>{const Ht=jt=>{return Yt(jt)?At(jt,Ht):le(ie=jt)&&ie.source&&"[object RegExp]"===Object.prototype.toString.call(ie)?new RegExp(jt.source,jt.flags):le(jt)?Dr(jt,Ht):jt;var ie};return Ht(ut)})(n[Wt]);delete X.removeEmptyAttrs,delete X.removeEmpty,n[Z]=X}else n[Z]={attributesOrder:[],attributes:{}};if(Yt(yt.attributes)){const X=Ht=>{ut.attributesOrder.push(Ht),ut.attributes[Ht]={}},ut=null!==(_t=n[Z])&&void 0!==_t?_t:{};delete ut.attributesDefault,delete ut.attributesForced,delete ut.attributePatterns,delete ut.attributesRequired,ut.attributesOrder=[],ut.attributes={},z(yt.attributes,Ht=>{const jt=Vp(l);iu(Ht).each(({preset:ie,name:De})=>{ie?"global"===De&&z(jt,X):X(De)})}),n[Z]=ut}if(Mn(yt.padEmpty)){const X=null!==(ht=n[Z])&&void 0!==ht?ht:{};X.paddEmpty=yt.padEmpty,n[Z]=X}if(Yt(yt.children)){const X={},ut=jt=>{X[jt]={}},Ht=jt=>{Kp(l,jt).each(ie=>{z(ie,ut)})};z(yt.children,jt=>{iu(jt).each(({preset:ie,name:De})=>{ie?Ht(De):ut(De)})}),o[Z]=X}Wt&&Ft(o,(X,ut)=>{X[Wt]&&(o[ut]=X=Yp({},o[ut]),X[Z]=X[Wt])})},T=Z=>{le(Z)?Ft(Z,(yt,_t)=>N(_t,yt)):at(Z)&&z((_t=>{const ht=/^(~)?(.+)$/;return an(Ie(_t,","),Tt=>{const Wt=ht.exec(Tt);return Wt?[{cloneName:"~"===Wt[1]?"span":"div",name:Wt[2]}]:[]})})(Z??""),({name:_t,cloneName:ht})=>{N(_t,{extends:ht})})},U=Z=>{z((yt=>{const _t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return an(Ie(yt,","),ht=>{const Tt=_t.exec(ht);if(Tt){const Wt=Tt[1];return[{operation:Wt?(ut=>"-"===ut?"remove":"add")(Wt):"replace",name:Tt[2],validChildren:an(Ie(Tt[3],"|"),ut=>iu(ut).toArray())}]}return[]})})(Z??""),({operation:yt,name:_t,validChildren:ht})=>{const Tt="replace"===yt?{"#comment":{}}:o[_t],Wt=X=>{"remove"===yt?delete Tt[X]:Tt[X]={}};z(ht,({preset:X,name:ut})=>{X?Kp(l,ut).each(jt=>{z(jt,Wt)}):Wt(ut)}),o[_t]=Tt})},j=Z=>{const yt=n[Z];if(yt)return yt;let _t=r.length;for(;_t--;){const ht=r[_t];if(ht.pattern.test(Z))return ht}},H=G(d),tt=G(u),rt=G(m),st=G(g),lt=G(_),Y=G(w),nt=G(k),A=G(Object.seal(h)),B=G(f),I=G(v),M=G(y),K=G(p),V=G(S),it=G(O),dt=G(Object.seal(s)),vt=(Z,yt)=>{const _t=j(Z);if(_t){if(!yt)return!0;{if(_t.attributes[yt])return!0;const ht=_t.attributePatterns;if(ht){let Tt=ht.length;for(;Tt--;)if(ht[Tt].pattern.test(yt))return!0}}}return!1},Zt=Z=>bt(lt(),Z),Qt=Z=>!Dt(Z,"#")&&vt(Z)&&!Zt(Z),Cn=G(a);return t.valid_elements?(x(t.valid_elements),Qn(c,(Z,yt)=>{o[yt]=Z.children})):(Qn(c,(Z,yt)=>{n[yt]={attributes:Z.attributes,attributesOrder:Z.attributesOrder},o[yt]=Z.children}),Qn(Ie("strong/b em/i"),Z=>{const yt=Ie(Z,"/");n[yt[1]].outputName=yt[0]}),Qn(k,(Z,yt)=>{n[yt]&&(t.padd_empty_block_inline_children&&(n[yt].paddInEmptyBlock=!0),n[yt].removeEmpty=!0)}),Qn(Ie("ol ul blockquote a table tbody"),Z=>{n[Z]&&(n[Z].removeEmpty=!0)}),Qn(Ie("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Z=>{n[Z]&&(n[Z].paddEmpty=!0)}),Qn(Ie("span"),Z=>{n[Z].removeEmptyAttrs=!0})),delete n.svg,T(t.custom_elements),U(t.valid_children),P(t.extended_valid_elements),U("+ol[ul|ol],+ul[ul|ol]"),Qn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Z,yt)=>{n[yt]&&(n[yt].parentsRequired=Ie(Z))}),t.invalid_elements&&Qn(Gp(t.invalid_elements),Z=>{n[Z]&&delete n[Z]}),j("span")||P("span[!data-mce-type|*]"),{type:l,children:o,elements:n,getValidStyles:H,getValidClasses:rt,getBlockElements:lt,getInvalidStyles:tt,getVoidElements:A,getTextBlockElements:Y,getTextInlineElements:nt,getBoolAttrs:st,getElementRule:j,getSelfClosingElements:B,getNonEmptyElements:I,getMoveCaretBeforeOnEnterElements:M,getWhitespaceElements:K,getTransparentElements:V,getSpecialElements:dt,isValidChild:(Z,yt)=>{const _t=o[Z.toLowerCase()];return!(!_t||!_t[yt.toLowerCase()])},isValid:vt,isBlock:Zt,isInline:Qt,isWrapper:Z=>bt(it(),Z)||Qt(Z),getCustomElements:Cn,addValidElements:P,setValidElements:x,addCustomElements:T,addValidChildren:U}},cu=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},pS=t=>{return{value:(n=cu(t.red)+cu(t.green)+cu(t.blue),kl(n,"#").toUpperCase())};var n},Qp=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Jp=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,th=(t,e,n,o)=>((r,a,s,i)=>({red:r,green:a,blue:s,alpha:i}))(parseInt(t,10),parseInt(e,10),parseInt(n,10),parseFloat(o)),eh=t=>{const e=Qp.exec(t);if(null!==e)return C.some(th(e[1],e[2],e[3],"1"));const n=Jp.exec(t);return null!==n?C.some(th(n[1],n[2],n[3],n[4])):C.none()},hS=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,li=t=>eh(t).map(pS).map(e=>"#"+e.value).getOr(t),du=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,a={};let s,i;e&&(s=e.getValidStyles(),i=e.getInvalidStyles());const c="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let u=0;u<c.length;u++)a[c[u]]="\ufeff"+u,a["\ufeff"+u]=c[u];const d={parse:u=>{const m={};let p=!1;const f=t.url_converter,h=t.url_converter_scope||d,g=(x,N,T)=>{const U=m[x+"-top"+N];if(!U)return;const j=m[x+"-right"+N];if(!j)return;const H=m[x+"-bottom"+N];if(!H)return;const tt=m[x+"-left"+N];if(!tt)return;const rt=[U,j,H,tt];let st=rt.length-1;for(;st--&&rt[st]===rt[st+1];);st>-1&&T||(m[x+N]=-1===st?rt[0]:rt.join(" "),delete m[x+"-top"+N],delete m[x+"-right"+N],delete m[x+"-bottom"+N],delete m[x+"-left"+N])},b=x=>{const N=m[x];if(!N)return;const T=N.indexOf(",")>-1?[N]:N.split(" ");let U=T.length;for(;U--;)if(T[U]!==T[0])return!1;return m[x]=T[0],!0},v=x=>(p=!0,a[x]),y=(x,N)=>(p&&(x=x.replace(/\uFEFF[0-9]/g,T=>a[T])),N||(x=x.replace(/\\([\'\";:])/g,"$1")),x),E=x=>String.fromCharCode(parseInt(x.slice(1),16)),w=x=>x.replace(/\\[0-9a-f]+/gi,E),_=(x,N,T,U,j,H)=>{if(j=j||H)return"'"+(j=y(j)).replace(/\'/g,"\\'")+"'";if(N=y(N||T||U||""),!t.allow_script_urls){const tt=N.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(tt)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(tt))return""}return f&&(N=f.call(h,N,"style")),"url('"+N.replace(/\'/g,"\\'")+"')"};if(u){let x;for(u=(u=u.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,N=>N.replace(/[;:]/g,v));x=o.exec(u);){o.lastIndex=x.index+x[0].length;let N=x[1].replace(r,"").toLowerCase(),T=x[2].replace(r,"");if(N&&T){if(N=w(N),T=w(T),-1!==N.indexOf("\ufeff")||-1!==N.indexOf('"')||!t.allow_script_urls&&("behavior"===N||/expression\s*\(|\/\*|\*\//.test(T)))continue;"font-weight"===N&&"700"===T?T="bold":"color"!==N&&"background-color"!==N||(T=T.toLowerCase()),"rgb"==(Qp.test(P=T)?"rgb":Jp.test(P)?"rgba":"other")&&eh(T).each(U=>{T=li(hS(U)).toLowerCase()}),T=T.replace(n,_),m[N]=p?y(T,!0):T}}g("border","",!0),g("border","-width"),g("border","-color"),g("border","-style"),g("padding",""),g("margin",""),S="border-style",O="border-color",b(k="border-width")&&b(S)&&b(O)&&(m.border=m[k]+" "+m[S]+" "+m[O],delete m[k],delete m[S],delete m[O]),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}var k,S,O,P;return m},serialize:(u,m)=>{let p="";const f=(h,g)=>{const b=g[h];if(b)for(let v=0,y=b.length;v<y;v++){const E=b[v],w=u[E];w&&(p+=(p.length>0?" ":"")+E+": "+w+";")}};return m&&s?(f("*",s),f(m,s)):Ft(u,(h,g)=>{h&&((b,v)=>{if(!i||!v)return!0;let y=i["*"];return!(y&&y[b]||(y=i[v],y&&y[b]))})(g,m)&&(p+=(p.length>0?" ":"")+g+": "+h+";")}),p}};return d},bS={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},nh=(t,e)=>{const n=e??{};for(const o in t)bt(bS,o)||(n[o]=t[o]);return q(t.composedPath)&&(n.composedPath=()=>t.composedPath()),q(t.getModifierState)&&(n.getModifierState=o=>t.getModifierState(o)),q(t.getTargetRanges)&&(n.getTargetRanges=()=>t.getTargetRanges()),n},uu=(t,e,n,o)=>{var r;const a=nh(e,o);return a.type=t,ue(a.target)&&(a.target=null!==(r=a.srcElement)&&void 0!==r?r:n),(ue((s=e).preventDefault)||(i=s)instanceof Event||kt(i.initEvent))&&(a.preventDefault=()=>{a.defaultPrevented=!0,a.isDefaultPrevented=se,kt(e.preventDefault)&&e.preventDefault()},a.stopPropagation=()=>{a.cancelBubble=!0,a.isPropagationStopped=se,kt(e.stopPropagation)&&e.stopPropagation()},a.stopImmediatePropagation=()=>{a.isImmediatePropagationStopped=se,a.stopPropagation()},(s=>s.isDefaultPrevented===se||s.isDefaultPrevented===Gt)(a)||(a.isDefaultPrevented=!0===a.defaultPrevented?se:Gt,a.isPropagationStopped=!0===a.cancelBubble?se:Gt,a.isImmediatePropagationStopped=Gt)),a;var s,i},vS=/^(?:mouse|contextmenu)|click/,mu=(t,e,n,o)=>{t.addEventListener(e,n,o||!1)},Wl=(t,e,n,o)=>{t.removeEventListener(e,n,o||!1)},ci=(t,e)=>{const n=uu(t.type,t,document,e);if(q(o=t)&&vS.test(o.type)&&ce(t.pageX)&&!ce(t.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,a=o.body,s=n;s.pageX=t.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),s.pageY=t.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)}var o;return n},yS=(t,e,n)=>{const o=t.document,r={type:"ready"};if(n.domLoaded)return void e(r);const a=()=>{Wl(t,"DOMContentLoaded",a),Wl(t,"load",a),n.domLoaded||(n.domLoaded=!0,e(r)),t=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?a():mu(t,"DOMContentLoaded",a),n.domLoaded||mu(t,"load",a)};class Qr{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,o,r){const a=this;let s;const i=window,l=m=>{a.executeHandlers(ci(m||i.event),c)};if(!e||$(e)||dr(e))return o;let c;e[a.expando]?c=e[a.expando]:(c=a.count++,e[a.expando]=c,a.events[c]={}),r=r||e;const d=n.split(" ");let u=d.length;for(;u--;){let m=d[u],p=l,f=!1,h=!1;"DOMContentLoaded"===m&&(m="ready"),a.domLoaded&&"ready"===m&&"complete"===e.readyState?o.call(r,ci({type:m})):(a.hasFocusIn||"focusin"!==m&&"focusout"!==m||(f=!0,h="focusin"===m?"focus":"blur",p=g=>{const b=ci(g||i.event);b.type="focus"===b.type?"focusin":"focusout",a.executeHandlers(b,c)}),s=a.events[c][m],s?"ready"===m&&a.domLoaded?o(ci({type:m})):s.push({func:o,scope:r}):(a.events[c][m]=s=[{func:o,scope:r}],s.fakeName=h,s.capture=f,s.nativeHandler=p,"ready"===m?yS(e,p,a):mu(e,h||m,p,f)))}return e=s=null,o}unbind(e,n,o){if(!e||$(e)||dr(e))return this;const r=e[this.expando];if(r){let a=this.events[r];if(n){const s=n.split(" ");let i=s.length;for(;i--;){const l=s[i],c=a[l];if(c){if(o){let d=c.length;for(;d--;)if(c[d].func===o){const u=c.nativeHandler,m=c.fakeName,p=c.capture,f=c.slice(0,d).concat(c.slice(d+1));f.nativeHandler=u,f.fakeName=m,f.capture=p,a[l]=f}}o&&0!==c.length||(delete a[l],Wl(e,c.fakeName||l,c.nativeHandler,c.capture))}}}else Ft(a,(s,i)=>{Wl(e,s.fakeName||i,s.nativeHandler,s.capture)}),a={};for(const s in a)if(bt(a,s))return this;delete this.events[r];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,o){return this.dispatch(e,n,o)}dispatch(e,n,o){if(!e||$(e)||dr(e))return this;const r=ci({type:n,target:e},o);do{const a=e[this.expando];a&&this.executeHandlers(r,a),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return this}clean(e){if(!e||$(e)||dr(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let o=n.length;for(;o--;)(e=n[o])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const o=this.events[n],r=o&&o[e.type];if(r)for(let a=0,s=r.length;a<s;a++){const i=r[a];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Qr.Event=new Qr;const fu=W.each,CS=W.grep,gu="data-mce-style",wS=W.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),di=(t,e,n)=>{ue(n)||""===n?ne(t,e):Et(t,e,n)},oh=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),Ga=(t,e)=>{let n=0;if(t)for(let o=t.nodeType,r=t.previousSibling;r;r=r.previousSibling){const a=r.nodeType;(!e||!$(r)||a!==o&&r.data.length)&&(n++,o=a)}return n},rh=(t,e)=>{const n=St(e,"style"),o=t.serialize(t.parse(n),Nt(e));di(e,gu,o)},ah=(t,e,n)=>{const o=oh(e);var r,a;ue(n)||""===n?fp(t,o):up(t,o,(a=o,re(r=n)?bt(wS,a)?r+"":r+"px":r))},qt=(t,e={})=>{const n={},o=window,r={};let a=0;const s=Fp.forElement(R(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:ur({}),c=du({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),d=e.ownEvents?new Qr:Qr.Event,u=l.getBlockElements(),m=A=>A&&t&&at(A)?t.getElementById(A):A,p=A=>{const B=m(A);return q(B)?R(B):null},f=(A,B,I="")=>{let M;const K=p(A);if(q(K)&&Ge(K)){const V=nt[B];M=V&&V.get?V.get(K.dom,B):St(K,B)}return q(M)?M:I},h=A=>{const B=m(A);return ue(B)?[]:B.attributes},g=(A,B,I)=>{S(A,M=>{if(ot(M)){const K=R(M),V=""===I?null:I,it=St(K,B),dt=nt[B];dt&&dt.set?dt.set(K.dom,V,B):di(K,B,V),it!==V&&e.onSetAttrib&&e.onSetAttrib({attrElm:K.dom,attrName:B,attrValue:V})}})},b=()=>e.root_element||t.body,v=(A,B)=>((I,M,K)=>{let V=0,it=0;const dt=I.ownerDocument;if(K=K||I,M){if(K===I&&M.getBoundingClientRect&&"static"===io(R(I),"position")){const Zt=M.getBoundingClientRect();return V=Zt.left+(dt.documentElement.scrollLeft||I.scrollLeft)-dt.documentElement.clientLeft,it=Zt.top+(dt.documentElement.scrollTop||I.scrollTop)-dt.documentElement.clientTop,{x:V,y:it}}let vt=M;for(;vt&&vt!==K&&vt.nodeType&&!Mp(vt,K);)V+=vt.offsetLeft||0,it+=vt.offsetTop||0,vt=vt.offsetParent;for(vt=M.parentNode;vt&&vt!==K&&vt.nodeType&&!Mp(vt,K);)V-=vt.scrollLeft||0,it-=vt.scrollTop||0,vt=vt.parentNode;it+=(Zt=R(M),lS.isFirefox()&&"table"===Nt(Zt)?Pp(je(Zt)).filter(Qt=>"caption"===Nt(Qt)).bind(Qt=>Pp(ip(Qt)).map(Cn=>Cn.dom.offsetTop<=Qt.dom.offsetTop?-Qt.dom.offsetHeight:0)).getOr(0):0)}var Zt;return{x:V,y:it}})(t.body,m(A),B),y=(A,B,I)=>{const M=m(A);var K;if(!ue(M)&&(Mo(M)||ot(K=M)&&"http://www.w3.org/2000/svg"===K.namespaceURI))return I?io(R(M),oh(B)):("float"===(B=B.replace(/-(\D)/g,(V,it)=>it.toUpperCase()))&&(B="cssFloat"),M.style?M.style[B]:void 0)},E=A=>{const B=m(A);if(!B)return{w:0,h:0};let I=y(B,"width"),M=y(B,"height");return I&&-1!==I.indexOf("px")||(I="0"),M&&-1!==M.indexOf("px")||(M="0"),{w:parseInt(I,10)||B.offsetWidth||B.clientWidth,h:parseInt(M,10)||B.offsetHeight||B.clientHeight}},w=(A,B)=>{if(!A)return!1;const I=Yt(A)?A:[A];return ee(I,M=>Yn(R(M),B))},_=(A,B,I,M)=>{const K=[];let V=m(A);M=void 0===M;const it=I||("BODY"!==b().nodeName?b().parentNode:null);if(at(B))if("*"===B)B=ot;else{const dt=B;B=vt=>w(vt,dt)}for(;V&&!(V===it||ue(V.nodeType)||si(V)||Kd(V));){if(!B||B(V)){if(!M)return[V];K.push(V)}V=V.parentNode}return M?K:null},k=(A,B,I)=>{let M=B;if(A){at(B)&&(M=K=>w(K,B));for(let K=A[I];K;K=K[I])if(kt(M)&&M(K))return K}return null},S=function(A,B,I){const M=I??this;if(Yt(A)){const K=[];return fu(A,(V,it)=>{const dt=m(V);dt&&K.push(B.call(M,dt,it))}),K}{const K=m(A);return!!K&&B.call(M,K)}},O=(A,B)=>{S(A,I=>{Ft(B,(M,K)=>{g(I,K,M)})})},P=(A,B)=>{S(A,I=>{const M=R(I);Pl(M,B)})},x=(A,B,I,M,K)=>S(A,V=>{const it=at(B)?t.createElement(B):B;return q(I)&&O(it,I),M&&(!at(M)&&M.nodeType?it.appendChild(M):at(M)&&P(it,M)),K?it:V.appendChild(it)}),N=(A,B,I)=>x(t.createElement(A),A,B,I,!0),T=Zr.encodeAllRaw,U=(A,B)=>S(A,I=>{const M=R(I);return B&&z(je(M),K=>{Me(K)&&0===K.dom.length?Jt(K):dn(M,K)}),Jt(M),M.dom}),j=(A,B,I)=>{S(A,M=>{if(ot(M)){const K=R(M),V=B.split(" ");z(V,it=>{var dt,vt,Qt,Cn;q(I)?(I?Ha:Qs)(K,it):(vt=it,ar(dt=K)?dt.dom.classList.toggle(vt):(Cn=vt,Bt(Qg(Qt=dt),Cn)?tp(Qt,Cn):Jg(Qt,Cn)),ep(dt))})}})},H=(A,B,I)=>S(B,M=>{var K;const V=Yt(B)?A.cloneNode(!0):A;return I&&fu(CS(M.childNodes),it=>{V.appendChild(it)}),null===(K=M.parentNode)||void 0===K||K.replaceChild(V,M),M}),tt=()=>t.createRange(),rt=(A,B,I,M)=>{if(Yt(A)){let K=A.length;const V=[];for(;K--;)V[K]=rt(A[K],B,I,M);return V}return!e.collect||A!==t&&A!==o||i.push([A,B,I,M]),d.bind(A,B,I,M||Y)},st=(A,B,I)=>{if(Yt(A)){let M=A.length;const K=[];for(;M--;)K[M]=st(A[M],B,I);return K}if(i.length>0&&(A===t||A===o)){let M=i.length;for(;M--;){const[K,V,it]=i[M];A!==K||B&&B!==V||I&&I!==it||d.unbind(K,V,it)}}return d.unbind(A,B,I)},lt=A=>{if(A&&Mo(A)){const B=A.getAttribute("data-mce-contenteditable");return B&&"inherit"!==B?B:"inherit"!==A.contentEditable?A.contentEditable:null}return null},Y={doc:t,settings:e,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:s,boundEvents:i,styles:c,schema:l,events:d,isBlock:A=>at(A)?bt(u,A):ot(A)&&(bt(u,A.nodeName)||Gr(l,A)),root:null,clone:(A,B)=>A.cloneNode(B),getRoot:b,getViewPort:A=>{const B=Cp(A);return{x:B.x,y:B.y,w:B.width,h:B.height}},getRect:A=>{const B=m(A),I=v(B),M=E(B);return{x:I.x,y:I.y,w:M.w,h:M.h}},getSize:E,getParent:(A,B,I)=>{const M=_(A,B,I,!1);return M&&M.length>0?M[0]:null},getParents:_,get:m,getNext:(A,B)=>k(A,B,"nextSibling"),getPrev:(A,B)=>k(A,B,"previousSibling"),select:(A,B)=>{var I,M;const K=null!==(M=null!==(I=m(B))&&void 0!==I?I:e.root_element)&&void 0!==M?M:t;return kt(K.querySelectorAll)?Oe(K.querySelectorAll(A)):[]},is:w,add:x,create:N,createHTML:(A,B,I="")=>{let M="<"+A;for(const K in B)Vn(B,K)&&(M+=" "+K+'="'+T(B[K])+'"');return tr(I)&&bt(l.getVoidElements(),A)?M+" />":M+">"+I+"</"+A+">"},createFragment:A=>{const B=t.createElement("div"),I=t.createDocumentFragment();let M;for(I.appendChild(B),A&&(B.innerHTML=A);M=B.firstChild;)I.appendChild(M);return I.removeChild(B),I},remove:U,setStyle:(A,B,I)=>{S(A,M=>{const K=R(M);ah(K,B,I),e.update_styles&&rh(c,K)})},getStyle:y,setStyles:(A,B)=>{S(A,I=>{const M=R(I);Ft(B,(K,V)=>{ah(M,V,K)}),e.update_styles&&rh(c,M)})},removeAllAttribs:A=>S(A,B=>{const I=B.attributes;for(let M=I.length-1;M>=0;M--)B.removeAttributeNode(I.item(M))}),setAttrib:g,setAttribs:O,getAttrib:f,getPos:v,parseStyle:A=>c.parse(A),serializeStyle:(A,B)=>c.serialize(A,B),addStyle:A=>{if(Y!==qt.DOM&&t===document){if(n[A])return;n[A]=!0}let B=t.getElementById("mceDefaultStyles");if(!B){B=t.createElement("style"),B.id="mceDefaultStyles",B.type="text/css";const I=t.head;I.firstChild?I.insertBefore(B,I.firstChild):I.appendChild(B)}B.styleSheet?B.styleSheet.cssText+=A:B.appendChild(t.createTextNode(A))},loadCSS:A=>{A||(A=""),z(A.split(","),B=>{r[B]=!0,s.load(B).catch(Ct)})},addClass:(A,B)=>{j(A,B,!0)},removeClass:(A,B)=>{j(A,B,!1)},hasClass:(A,B)=>{const I=p(A),M=B.split(" ");return q(I)&&$n(M,K=>Dd(I,K))},toggleClass:j,show:A=>{S(A,B=>fp(R(B),"display"))},hide:A=>{S(A,B=>up(R(B),"display","none"))},isHidden:A=>{const B=p(A);return q(B)&&so(Ll(B,"display"),"none")},uniqueId:A=>(A||"mce_")+a++,setHTML:P,getOuterHTML:A=>{const B=p(A);return q(B)?ot(B.dom)?B.dom.outerHTML:(I=>{const M=ke("div"),K=R(I.dom.cloneNode(!0));return be(M,K),pp(M)})(B):""},setOuterHTML:(A,B)=>{S(A,I=>{ot(I)&&(I.outerHTML=B)})},decode:Zr.decode,encode:T,insertAfter:(A,B)=>{const I=m(B);return S(A,M=>{const K=I?.parentNode,V=I?.nextSibling;return K&&(V?K.insertBefore(M,V):K.appendChild(M)),M})},replace:H,rename:(A,B)=>{if(A.nodeName!==B.toUpperCase()){const I=N(B);return fu(h(A),M=>{g(I,M.nodeName,f(A,M.nodeName))}),H(I,A,!0),I}return A},findCommonAncestor:(A,B)=>{let I=A;for(;I;){let M=B;for(;M&&I!==M;)M=M.parentNode;if(I===M)break;I=I.parentNode}return!I&&A.ownerDocument?A.ownerDocument.documentElement:I},run:S,getAttribs:h,isEmpty:(A,B,I)=>xa(B)?Io(l,A,{...I,isContent:K=>{const V=K.nodeName.toLowerCase();return!!B[V]}}):Io(l,A,I),createRng:tt,nodeIndex:Ga,split:(A,B,I)=>{let M,K,V=tt();if(A&&B&&A.parentNode&&B.parentNode){const it=A.parentNode;return V.setStart(it,Ga(A)),V.setEnd(B.parentNode,Ga(B)),M=V.extractContents(),V=tt(),V.setStart(B.parentNode,Ga(B)+1),V.setEnd(it,Ga(A)+1),K=V.extractContents(),it.insertBefore(ou(Y,M,l),A),it.insertBefore(I||B,A),it.insertBefore(ou(Y,K,l),A),U(A),I||B}},bind:rt,unbind:st,fire:(A,B,I)=>d.dispatch(A,B,I),dispatch:(A,B,I)=>d.dispatch(A,B,I),getContentEditable:lt,getContentEditableParent:A=>{const B=b();let I=null;for(let M=A;M&&M!==B&&(I=lt(M),null===I);M=M.parentNode);return I},isEditable:A=>{if(q(A)){const B=ot(A)?A:A.parentElement;return q(B)&&Mo(B)&&Wr(R(B))}return!1},destroy:()=>{if(i.length>0){let A=i.length;for(;A--;){const[B,I,M]=i[A];d.unbind(B,I,M)}}Ft(r,(A,B)=>{s.unload(B),delete r[B]})},isChildOf:(A,B)=>A===B||B.contains(A),dumpRng:A=>"startContainer: "+A.startContainer.nodeName+", startOffset: "+A.startOffset+", endContainer: "+A.endContainer.nodeName+", endOffset: "+A.endOffset},nt=((A,B,I)=>{const M=B.keep_values,V={style:{set:(it,dt)=>{const vt=R(it);M&&di(vt,gu,dt),ne(vt,"style"),at(dt)&&Dl(vt,A.parse(dt))},get:it=>{const dt=R(it),vt=St(dt,gu)||St(dt,"style");return A.serialize(A.parse(vt),Nt(dt))}}};return M&&(V.href=V.src={set:(it,dt,vt)=>{const Zt=R(it);kt(B.url_converter)&&q(dt)&&(dt=B.url_converter.call(B.url_converter_scope||I(),String(dt),vt,it)),di(Zt,"data-mce-"+vt,dt),di(Zt,vt,dt)},get:(it,dt)=>{const vt=R(it);return St(vt,"data-mce-"+dt)||St(vt,dt)}}),V})(c,e,G(Y));return Y};qt.DOM=qt(document),qt.nodeIndex=Ga;const ES=qt.DOM;class Uo{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,o)=>{const r=ES;let a;const s=()=>{r.remove(i),a&&(a.onerror=a.onload=a=null)},i=r.uniqueId();a=document.createElement("script"),a.id=i,a.type="text/javascript",a.src=W._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(a,"referrerpolicy",this.settings.referrerPolicy),a.onload=()=>{s(),n()},a.onerror=()=>{s(),o("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(a)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:o,reject:r})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,o=(l,c)=>{Kt(n.scriptLoadedCallbacks,c).each(d=>{z(d,u=>u[l](c))}),delete n.scriptLoadedCallbacks[c]},r=l=>{const c=gt(l,d=>"rejected"===d.status);return c.length>0?Promise.reject(an(c,({reason:d})=>Yt(d)?d:[d])):Promise.resolve()},a=l=>Promise.allSettled(At(l,c=>2===n.states[c]?(o("resolve",c),Promise.resolve()):3===n.states[c]?(o("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,o("resolve",c);const d=n.queue;return d.length>0?(n.queue=[],a(d).then(r)):Promise.resolve()},()=>(n.states[c]=3,o("reject",c),Promise.reject(c)))))),s=l=>(n.loading=!0,a(l).then(c=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return C.from(d).each(ko),r(c)})),i=Ue(e);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{s(i).then(l,c)})}):s(i)}}Uo.ScriptLoader=new Uo;const ui={},pu=Ae("en"),sh=()=>Kt(ui,pu.get()),Jn={getData:()=>Dr(ui,t=>({...t})),setCode:t=>{t&&pu.set(t)},getCode:()=>pu.get(),add:(t,e)=>{let n=ui[t];n||(ui[t]=n={});const o=At(Pe(e),r=>r.toLowerCase());Ft(e,(r,a)=>{const s=a.toLowerCase();s!==a&&((i,l)=>{const c=i.indexOf(l);return-1!==c&&i.indexOf(l,c+1)>c})(o,s)?(bt(e,s)||(n[s]=r),n[a]=r):n[s]=r})},translate:t=>{const e=sh().getOr({}),n=i=>kt(i)?Object.prototype.toString.call(i):o(i)?"":""+i,o=i=>""===i||null==i,r=i=>{const l=n(i);return bt(e,l)?n(e[l]):Kt(e,l.toLowerCase()).map(n).getOr(l)},a=i=>i.replace(/{context:\w+}$/,"");if(o(t))return"";if(le(s=t)&&bt(s,"raw"))return n(t.raw);var s,i;if(Yt(i=t)&&i.length>1){const i=t.slice(1);return a(r(t[0]).replace(/\{([0-9]+)\}/g,(l,c)=>bt(i,c)?n(i[c]):l))}return a(r(t))},isRtl:()=>sh().bind(t=>Kt(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>bt(ui,t)},Xe=()=>{const t=[],e={},n={},o=[],r=(l,c)=>{const d=gt(o,u=>u.name===l&&u.state===c);z(d,u=>u.resolve())},a=l=>bt(e,l),s=(l,c)=>{const d=Jn.getCode();!d||c&&-1===(","+(c||"")+",").indexOf(","+d+",")||Uo.ScriptLoader.add(e[l]+"/langs/"+d+".js")},i=(l,c="added")=>"added"===c&&bt(n,l)||"loaded"===c&&a(l)?Promise.resolve():new Promise(d=>{o.push({name:l,state:c,resolve:d})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{!1!==Xe.languageLoad&&(a(l)?s(l,c):i(l,"loaded").then(()=>s(l,c)))},add:(l,c)=>(t.push(c),n[l]={instance:c},r(l,"added"),c),remove:l=>{delete e[l],delete n[l]},createUrl:(l,c)=>at(c)?at(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(e[l])return Promise.resolve();let d=at(c)?c:c.prefix+c.resource+c.suffix;0!==d.indexOf("/")&&-1===d.indexOf("://")&&(d=Xe.baseURL+"/"+d),e[l]=d.substring(0,d.lastIndexOf("/"));const u=()=>(r(l,"loaded"),Promise.resolve());return n[l]?u():Uo.ScriptLoader.add(d).then(u)},waitFor:i}};Xe.languageLoad=!0,Xe.baseURL="",Xe.PluginManager=Xe(),Xe.ThemeManager=Xe(),Xe.ModelManager=Xe();const Vl=(t,e)=>{let n=null;return{cancel:()=>{Ee(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{Ee(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},e))}}},hu=(t,e)=>{let n=null;const o=()=>{Ee(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,r)},e)}}},mi=G("mce-annotation"),Jr=G("data-mce-annotation"),Xa=G("data-mce-annotation-uid"),fi=G("data-mce-annotation-active"),gi=G("data-mce-annotation-classes"),pi=G("data-mce-annotation-attrs"),ih=t=>e=>Mt(e,t),lh=(t,e)=>{const n=t.selection.getRng(),o=R(n.startContainer),r=R(t.getBody()),a=e.fold(()=>"."+mi(),i=>`[${Jr()}="${i}"]`),s=$a(o,n.startOffset).getOr(o);return Va(s,a,ih(r)).bind(i=>oe(i,`${Xa()}`).bind(l=>oe(i,`${Jr()}`).map(c=>{const d=dh(t,l);return{uid:l,name:c,elements:d}})))},ch=(t,e)=>{return cn(t,"data-mce-bogus")||(n=t,r=ih(e),ni(n,'[data-mce-bogus="all"]',r).isSome());var n,r},dh=(t,e)=>{const n=R(t.getBody()),o=tn(n,`[${Xa()}="${e}"]`);return gt(o,r=>!ch(r,n))},uh=(t,e)=>{const n=R(t.getBody()),o=tn(n,`[${Jr()}="${e}"]`),r={};return z(o,a=>{if(!ch(a,n)){const s=St(a,Xa()),i=Kt(r,s).getOr([]);r[s]=i.concat([a])}}),r},mh=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let fh=0;const hi=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*mh());return fh++,t+"_"+n+fh+String(e)},gh=(t,e)=>R(t.dom.cloneNode(e)),ta=t=>gh(t,!1),ph=t=>gh(t,!0),hh=(t,e,n=Gt)=>{const o=new Ne(t,e),r=a=>{let s;do{s=o[a]()}while(s&&!$(s)&&!n(s));return C.from(s).filter($)};return{current:()=>C.from(o.current()).filter($),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},ea=(t,e)=>{const n=e||(r=>t.isBlock(r)||ae(r)||Xt(r)),o=(r,a,s,i)=>{if($(r)){const l=i(r,a,r.data);if(-1!==l)return C.some({container:r,offset:l})}return s().bind(l=>o(l.container,l.offset,s,i))};return{backwards:(r,a,s,i)=>{const l=hh(r,i??t.getRoot(),n);return o(r,a,()=>l.prev().map(c=>({container:c,offset:c.length})),s).getOrNull()},forwards:(r,a,s,i)=>{const l=hh(r,i??t.getRoot(),n);return o(r,a,()=>l.next().map(c=>({container:c,offset:0})),s).getOrNull()}}},bu=(t=>{const n=o=>t(o)?C.from(o.dom.nodeValue):C.none();return{get:o=>{if(!t(o))throw new Error("Can only get text value of a text node");return n(o).getOr("")},getOption:n,set:(o,r)=>{if(!t(o))throw new Error("Can only set raw text value of a text node");o.dom.nodeValue=r}}})(Me),bi=t=>bu.get(t),bh=(t,e)=>bu.set(t,e),Za=t=>{let e;return n=>(e=e||$t(t,se),bt(e,Nt(n)))},na=t=>Ge(t)&&"br"===Nt(t),vh=Za(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),vu=Za(["ul","ol","dl"]),Qa=Za(["li","dd","dt"]),_S=Za(["thead","tbody","tfoot"]),vi=Za(["td","th"]),ql=Za(["pre","script","textarea","style"]),Ja=()=>{const t=ke("br");return Et(t,"data-mce-bogus","1"),t},mr=t=>{qa(t),be(t,Ja())},Re="\ufeff",Kl=Vd,vn=t=>t.replace(/\uFEFF/g,""),xS=ot,ts=$,es=t=>(ts(t)&&(t=t.parentNode),xS(t)&&t.hasAttribute("data-mce-caret")),fr=t=>ts(t)&&Kl(t.data),En=t=>es(t)||fr(t),yh=t=>t.firstChild!==t.lastChild||!ae(t.firstChild),yu=t=>{const e=t.container();return!!$(e)&&(e.data.charAt(t.offset())===Re||t.isAtStart()&&fr(e.previousSibling))},Cu=t=>{const e=t.container();return!!$(e)&&(e.data.charAt(t.offset()-1)===Re||t.isAtEnd()&&fr(e.nextSibling))},Yl=t=>ts(t)&&t.data[0]===Re,Gl=t=>ts(t)&&t.data[t.data.length-1]===Re,wu=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Kr(r)&&(null===(n=r.parentNode)||void 0===n||n.removeChild(r))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,Ch=t=>es(t.startContainer),ns=Math.round,oa=t=>t?{left:ns(t.left),top:ns(t.top),bottom:ns(t.bottom),right:ns(t.right),width:ns(t.width),height:ns(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},wh=(t,e)=>(t=oa(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),Eh=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,yi=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&Eh(e.top-t.bottom,t,e)},Ci=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&Eh(e.bottom-t.top,t,e),_h=(t,e,n)=>{const o=Math.max(Math.min(e,t.left+t.width),t.left),r=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-o)*(e-o)+(n-r)*(n-r))},Xl=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},gr=(t,e)=>{if(ot(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(s=n.length-1,Math.min(Math.max(e,0),s))]}var s;return t},SS=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),xh=t=>at(t)&&t.charCodeAt(0)>=768&&SS.test(t),Sh=Un,kS=Xt,NS=ae,AS=$,RS=Zn(["script","style","textarea"]),kh=Zn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),TS=Zn(["table"]),OS=En,to=t=>!OS(t)&&(AS(t)?!RS(t.parentNode):kh(t)||NS(t)||TS(t)||Eu(t)),Eu=t=>{return!(ot(e=t)&&"true"===e.getAttribute("unselectable"))&&kS(t);var e},Nh=(t,e)=>to(t)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(Eu(r))return!1;if(Sh(r))return!0}return!0})(t,e),Ah=ot,BS=to,Rh=Fl("display","block table"),DS=Fl("float","left right"),wi=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(Ah,BS,So(DS)),LS=So(Fl("white-space","pre pre-line pre-wrap")),Ei=$,_u=ae,Th=qt.nodeIndex,Zl=(t,e)=>e<0&&ot(t)&&t.hasChildNodes()?void 0:gr(t,e),xu=t=>t?t.createRange():qt.DOM.createRng(),Su=t=>at(t)&&/[\r\n\t ]/.test(t),Oh=t=>!!t.setStart&&!!t.setEnd,ku=t=>{const e=t.startContainer,n=t.startOffset;if(Su(t.toString())&&LS(e.parentNode)&&$(e)){const o=e.data;if(Su(o[n-1])||Su(o[n+1]))return!0}return!1},Bh=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,pr=t=>{var e;let n;const o=t.getClientRects();return n=oa(o.length>0?o[0]:t.getBoundingClientRect()),!Oh(t)&&_u(t)&&Bh(n)?(r=>{const a=r.ownerDocument,s=xu(a),i=a.createTextNode(ye),l=r.parentNode;l.insertBefore(i,r),s.setStart(i,0),s.setEnd(i,1);const c=oa(s.getBoundingClientRect());return l.removeChild(i),c})(t):Bh(n)&&Oh(t)&&null!==(e=(r=>{const s=r.endContainer,i=r.startOffset,l=r.endOffset;if(r.startContainer===s&&$(s)&&0===i&&1===l){const c=r.cloneRange();return c.setEndAfter(s),pr(c)}return null})(t))&&void 0!==e?e:n},ra=(t,e)=>{const n=wh(t,e);return n.width=1,n.right=n.left+1,n},F=(t,e,n)=>{const o=()=>(n||(n=(r=>{const a=[],s=d=>{var u,m;0!==d.height&&(a.length>0&&(u=d).left===(m=a[a.length-1]).left&&u.top===m.top&&u.bottom===m.bottom&&u.right===m.right||a.push(d))},i=(d,u)=>{const m=xu(d.ownerDocument);if(u<d.data.length){if(xh(d.data[u]))return;if(xh(d.data[u-1])&&(m.setStart(d,u),m.setEnd(d,u+1),!ku(m)))return void s(ra(pr(m),!1))}u>0&&(m.setStart(d,u-1),m.setEnd(d,u),ku(m)||s(ra(pr(m),!1))),u<d.data.length&&(m.setStart(d,u),m.setEnd(d,u+1),ku(m)||s(ra(pr(m),!0)))},l=r.container(),c=r.offset();if(Ei(l))return i(l,c),a;if(Ah(l))if(r.isAtEnd()){const d=Zl(l,c);Ei(d)&&i(d,d.data.length),wi(d)&&!_u(d)&&s(ra(pr(d),!1))}else{const d=Zl(l,c);if(Ei(d)&&i(d,0),wi(d)&&r.isAtEnd())return s(ra(pr(d),!1)),a;const u=Zl(r.container(),r.offset()-1);wi(u)&&!_u(u)&&(Rh(u)||Rh(d)||!wi(d))&&s(ra(pr(u),!1)),wi(d)&&s(ra(pr(d),!0))}return a})(F(t,e))),n);return{container:G(t),offset:G(e),toRange:()=>{const r=xu(t.ownerDocument);return r.setStart(t,e),r.setEnd(t,e),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(Ei(t),0===e),isAtEnd:()=>Ei(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:r=>r&&t===r.container()&&e===r.offset(),getNode:r=>Zl(t,r?e-1:e)}};F.fromRangeStart=t=>F(t.startContainer,t.startOffset),F.fromRangeEnd=t=>F(t.endContainer,t.endOffset),F.after=t=>F(t.parentNode,Th(t)+1),F.before=t=>F(t.parentNode,Th(t)),F.isAbove=(t,e)=>Se(It(e.getClientRects()),pe(t.getClientRects()),yi).getOr(!1),F.isBelow=(t,e)=>Se(pe(e.getClientRects()),It(t.getClientRects()),Ci).getOr(!1),F.isAtStart=t=>!!t&&t.isAtStart(),F.isAtEnd=t=>!!t&&t.isAtEnd(),F.isTextPosition=t=>!!t&&$(t.container()),F.isElementPosition=t=>!F.isTextPosition(t);const Ql=(t,e)=>{$(e)&&0===e.data.length&&t.remove(e)},Nu=(t,e,n)=>{var o,a;Kd(n)?((o,r,a)=>{const s=C.from(a.firstChild),i=C.from(a.lastChild);r.insertNode(a),s.each(l=>Ql(o,l.previousSibling)),i.each(l=>Ql(o,l.nextSibling))})(t,e,n):(o=t,e.insertNode(a=n),Ql(o,a.previousSibling),Ql(o,a.nextSibling))},eo=$,Dh=Kr,Lh=qt.nodeIndex,Ph=t=>{const e=t.parentNode;return Dh(e)?Ph(e):e},Au=t=>t?Ta(t.childNodes,(e,n)=>(Dh(n)&&"BR"!==n.nodeName?e=e.concat(Au(n)):e.push(n),e),[]):[],Mh=t=>e=>t===e,Ih=t=>(eo(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,o;n=Au(Ph(e)),o=ze(n,Mh(e),e),n=n.slice(0,o+1);const r=Ta(n,(a,s,i)=>(eo(s)&&eo(n[i-1])&&a++,a),0);return n=Mr(n,Zn([e.nodeName])),o=ze(n,Mh(e),e),o-r})(t)+"]",Fh=(t,e)=>{let n,o=[],r=e.container(),a=e.offset();if(eo(r))n=((i,l)=>{let c=i;for(;(c=c.previousSibling)&&eo(c);)l+=c.data.length;return l})(r,a);else{const i=r.childNodes;a>=i.length?(n="after",a=i.length-1):n="before",r=i[a]}o.push(Ih(r));let s=((i,l)=>{const d=[];for(let u=l.parentNode;u&&u!==i;u=u.parentNode)d.push(u);return d})(t,r);return s=Mr(s,So(Kr)),o=o.concat(Is(s,i=>Ih(i))),o.reverse().join("/")+","+n},Uh=(t,e)=>{if(!e)return null;const n=e.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",a=Ta(o,(s,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((c,d,u)=>{let m=Au(c);return m=Mr(m,(p,f)=>!eo(p)||!eo(m[f-1])),m=Mr(m,Zn([d])),m[u]})(s,l[1],parseInt(l[2],10))):null},t);if(!a)return null;if(!eo(a)&&a.parentNode){let s;return s="after"===r?Lh(a)+1:Lh(a),F(a.parentNode,s)}return((s,i)=>{let l=s,c=0;for(;eo(l);){const d=l.data.length;if(i>=c&&i<=c+d){s=l,i-=c;break}if(!eo(l.nextSibling)){s=l,i=d;break}c+=d,l=l.nextSibling}return eo(s)&&i>s.data.length&&(i=s.data.length),F(s,i)})(a,parseInt(r,10))},Jl=Xt,zh=(t,e,n,o,r)=>{const a=r?o.startContainer:o.endContainer;let s=r?o.startOffset:o.endOffset;const i=[],l=t.getRoot();if($(a))i.push(n?((c,d,u)=>{let m=c(d.data.slice(0,u)).length;for(let p=d.previousSibling;p&&$(p);p=p.previousSibling)m+=c(p.data).length;return m})(e,a,s):s);else{let c=0;const d=a.childNodes;s>=d.length&&d.length&&(c=1,s=Math.max(0,d.length-1)),i.push(t.nodeIndex(d[s],n)+c)}for(let c=a;c&&c!==l;c=c.parentNode)i.push(t.nodeIndex(c,n));return i},Ru=(t,e,n)=>{let o=0;return W.each(t.select(e),r=>"all"===r.getAttribute("data-mce-bogus")?void 0:r!==n&&void o++),o},Hh=(t,e)=>{let n=e?t.startContainer:t.endContainer,o=e?t.startOffset:t.endOffset;if(ot(n)&&"TR"===n.nodeName){const r=n.childNodes;n=r[Math.min(e?o:o-1,r.length-1)],n&&(o=e?0:n.childNodes.length,e?t.setStart(n,o):t.setEnd(n,o))}},jh=t=>(Hh(t,!0),Hh(t,!1),t),$h=(t,e)=>{if(ot(t)&&(t=gr(t,e),Jl(t)))return t;if(En(t)){$(t)&&es(t)&&(t=t.parentNode);let n=t.previousSibling;if(Jl(n)||(n=t.nextSibling,Jl(n)))return n}},Wh=(t,e,n)=>{const o=n.getNode(),r=n.getRng();if("IMG"===o.nodeName||Jl(o)){const s=o.nodeName;return{name:s,index:Ru(n.dom,s,o)}}const a=$h((s=r).startContainer,s.startOffset)||$h(s.endContainer,s.endOffset);var s;if(a){const s=a.tagName;return{name:s,index:Ru(n.dom,s,a)}}return((s,i,l,c)=>{const d=i.dom,u=zh(d,s,l,c,!0),m=i.isForward(),p=Ch(c)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:u,forward:m,...p}:{start:u,end:zh(d,s,l,c,!1),forward:m,...p}})(t,n,e,r)},Vh=(t,e,n)=>{const o={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},qh=(t,e)=>{const n=t.dom;let o=t.getRng();const r=n.uniqueId(),a=t.isCollapsed(),s=t.getNode(),i=s.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:Ru(n,i,s)};const c=jh(o.cloneRange());if(!a){c.collapse(!1);const u=Vh(n,r+"_end",e);Nu(n,c,u)}o=jh(o),o.collapse(!0);const d=Vh(n,r+"_start",e);return Nu(n,o,d),t.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},Tu=et(Wh,me,!0),Kh=t=>{const e=a=>a(t),n=G(t),o=()=>r,r={tag:!0,inner:t,fold:(a,s)=>s(t),isValue:se,isError:Gt,map:a=>en.value(a(t)),mapError:o,bind:e,exists:e,forall:e,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:a=>{a(t)},toOptional:()=>C.some(t)};return r},Yh=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(o,r)=>o(t),isValue:Gt,isError:se,map:e,mapError:o=>en.error(o(t)),bind:e,exists:Gt,forall:se,getOr:me,or:me,getOrThunk:Bs,orThunk:Bs,getOrDie:Sa(String(t)),each:Ct,toOptional:C.none};return n},en={value:Kh,error:Yh,fromOption:(t,e)=>t.fold(()=>Yh(e),Kh)},uo=t=>{if(!Yt(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return z(t,(o,r)=>{const a=Pe(o);if(1!==a.length)throw new Error("one and only one name per case");const s=a[0],i=o[s];if(void 0!==n[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!Yt(i))throw new Error("case arguments must be an array");e.push(s),n[s]=(...l)=>{const c=l.length;if(c!==i.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+i.length+" ("+i+"), got "+c);return{fold:(...d)=>{if(d.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+d.length);return d[r].apply(null,l)},match:d=>{const u=Pe(d);if(e.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+u.join(","));if(!$n(e,m=>Bt(u,m)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+e.join(", "));return d[s].apply(null,l)},log:d=>{console.log(d,{constructors:e,constructor:s,params:l})}}}}),n};uo([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const PS=t=>"inline-command"===t.type||"inline-format"===t.type,MS=t=>"block-command"===t.type||"block-format"===t.type,IS=t=>{var e;const n=r=>en.error({message:r,pattern:t}),o=(r,a,s)=>{if(void 0!==t.format){let i;if(Yt(t.format)){if(!$n(t.format,at))return n(r+" pattern has non-string items in the `format` array");i=t.format}else{if(!at(t.format))return n(r+" pattern has non-string `format` parameter");i=[t.format]}return en.value(a(i))}return void 0!==t.cmd?at(t.cmd)?en.value(s(t.cmd,t.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!le(t))return n("Raw pattern is not an object");if(!at(t.start))return n("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!at(t.end))return n("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return n("Inline pattern has empty `start` and `end` parameters");let r=t.start,a=t.end;return 0===a.length&&(a=r,r=""),o("Inline",s=>({type:"inline-format",start:r,end:a,format:s}),(s,i)=>({type:"inline-command",start:r,end:a,cmd:s,value:i}))}if(void 0!==t.replacement)return at(t.replacement)?0===t.start.length?n("Replacement pattern has empty `start` parameter"):en.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const r=null!==(e=t.trigger)&&void 0!==e?e:"space";return 0===t.start.length?n("Block pattern has empty `start` parameter"):o("Block",a=>({type:"block-format",start:t.start,format:a[0],trigger:r}),(a,s)=>({type:"block-command",start:t.start,cmd:a,value:s,trigger:r}))}},Gh=t=>gt(t,MS),Xh=t=>gt(t,PS),Ou=(t,e)=>({...t,blockPatterns:gt(t.blockPatterns,n=>{return("block-command"===(o=n).type||"block-format"===o.type)&&o.trigger===e;var o})}),Zh=t=>{const e=(n=>{const o=[],r=[];return z(n,a=>{a.fold(s=>{o.push(s)},s=>{r.push(s)})}),{errors:o,values:r}})(At(t,IS));return z(e.errors,n=>console.error(n.message,n.pattern)),e.values},Bu=bn().deviceType,FS=Bu.isTouch(),US=qt.DOM,Qh=t=>_a(t,RegExp),J=t=>e=>e.options.get(t),tc=t=>at(t)||le(t),Jh=(t,e="")=>n=>{const o=at(n);if(o){if(-1!==n.indexOf("=")){const r=(a=>{const s=a.indexOf("=")>0?a.split(/[;,](?![^=;,]*(?:[;,]|$))/):a.split(",");return Ke(s,(i,l)=>{const c=l.split("="),d=c[0],u=c.length>1?c[1]:d;return i[Ao(d)]=Ao(u),i},{})})(n);return{value:Kt(r,t.id).getOr(e),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},zS=J("iframe_attrs"),HS=J("doctype"),tb=J("document_base_url"),jS=J("body_id"),$S=J("body_class"),eb=J("content_security_policy"),WS=J("br_in_pre"),We=J("forced_root_block"),_i=J("forced_root_block_attrs"),VS=J("newline_behavior"),qS=J("br_newline_selector"),KS=J("no_newline_selector"),YS=J("keep_styles"),GS=J("end_container_on_empty_block"),nb=J("automatic_uploads"),ob=J("images_reuse_filename"),XS=J("images_replace_blob_uris"),rb=J("icons"),ZS=J("icons_url"),QS=J("images_upload_url"),JS=J("images_upload_base_path"),tk=J("images_upload_credentials"),ek=J("images_upload_handler"),nk=J("content_css_cors"),Du=J("referrer_policy"),ab=J("language"),ok=J("language_url"),sb=J("indent_use_margin"),rk=J("indentation"),ak=J("content_css"),sk=J("content_style"),ib=J("font_css"),ik=J("directionality"),lk=J("inline_boundaries_selector"),lb=J("object_resizing"),ck=J("resize_img_proportional"),dk=J("placeholder"),cb=J("event_root"),uk=J("service_message"),os=J("theme"),mk=J("theme_url"),Lu=J("model"),fk=J("model_url"),xi=J("inline_boundaries"),gk=J("formats"),pk=J("preview_styles"),hk=J("format_empty_lines"),bk=J("format_noneditable_selector"),vk=J("custom_ui_selector"),Pu=J("inline"),yk=J("hidden_input"),Ck=J("submit_patch"),wk=J("add_form_submit_trigger"),Ek=J("add_unload_trigger"),_k=J("custom_undo_redo_levels"),xk=J("disable_nodechange"),db=J("readonly"),Sk=J("editable_root"),ub=J("content_css_cors"),ec=J("plugins"),kk=J("external_plugins"),Nk=J("block_unsupported_drop"),Ak=J("visual"),Rk=J("visual_table_class"),mb=J("visual_anchor_class"),fb=J("iframe_aria_text"),Tk=J("setup"),Ok=J("init_instance_callback"),Bk=J("urlconverter_callback"),Dk=J("auto_focus"),Lk=J("browser_spellcheck"),Pk=J("protect"),Mk=J("paste_block_drop"),nc=J("paste_data_images"),Ik=J("paste_preprocess"),Fk=J("paste_postprocess"),Uk=J("newdocument_content"),zk=J("paste_webkit_styles"),Hk=J("paste_remove_styles_if_webkit"),jk=J("paste_merge_formats"),$k=J("smart_paste"),Wk=J("paste_as_text"),Vk=J("paste_tab_spaces"),qk=J("allow_html_data_urls"),Kk=J("text_patterns"),Yk=J("text_patterns_lookup"),gb=J("noneditable_class"),Gk=J("editable_class"),Xk=J("noneditable_regexp"),Zk=J("preserve_cdata"),Qk=J("highlight_on_focus"),pb=J("xss_sanitization"),Jk=J("init_content_sync"),hb=t=>W.explode(t.options.get("images_file_types")),tN=J("table_tab_navigation"),eN=J("details_initial_state"),nN=J("details_serialized_state"),bb=J("sandbox_iframes"),Mu=t=>t.options.get("sandbox_iframes_exclusions"),oN=J("convert_unsafe_embeds"),rN=J("license_key"),aN=J("api_key"),sN=ot,vb=$,yb=t=>{const e=t.parentNode;e&&e.removeChild(t)},Cb=t=>{const e=vn(t);return{count:t.length-e.length,text:e}},wb=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(Re));)t.deleteData(e,1)},Eb=(t,e)=>(aa(t),e),aa=t=>{sN(t)&&En(t)&&(yh(t)?t.removeAttribute("data-mce-caret"):yb(t)),vb(t)&&(wb(t),0===t.data.length&&yb(t))},lN=Xt,cN=co,dN=Ul,_b=(t,e,n)=>{const o=wh(e.getBoundingClientRect(),n);let r,a;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;r=t.scrollLeft||i.scrollLeft,a=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();r=t.scrollLeft-i.left,a=t.scrollTop-i.top}o.left+=r,o.right+=r,o.top+=a,o.bottom+=a,o.width=1;let s=e.offsetWidth-e.clientWidth;return s>0&&(n&&(s*=-1),o.left+=s,o.right+=s),o},xb=()=>Rt.browser.isFirefox(),Si=t=>lN(t)||cN(t),ki=t=>(Si(t)||lo(t)&&xb())&&Ol(R(t)).exists(Wr),mN=Un,Iu=Xt,fN=co,Sb=Fl("display","block table table-cell table-row table-caption list-item"),kb=En,Nb=es,gN=ot,pN=$,hN=to,rs=t=>t>0,sa=t=>t<0,oc=(t,e)=>{let n;for(;n=t(e);)if(!Nb(n))return n;return null},Ni=(t,e,n,o,r)=>{const a=new Ne(t,o),s=Iu(t)||Nb(t);let i;if(sa(e)){if(s&&(i=oc(a.prev.bind(a),!0),n(i)))return i;for(;i=oc(a.prev.bind(a),r);)if(n(i))return i}if(rs(e)){if(s&&(i=oc(a.next.bind(a),!0),n(i)))return i;for(;i=oc(a.next.bind(a),r);)if(n(i))return i}return null},hr=(t,e)=>{for(;t&&t!==e;){if(Sb(t))return t;t=t.parentNode}return null},mo=(t,e,n)=>hr(t.container(),n)===hr(e.container(),n),Fu=(t,e)=>{if(!e)return C.none();const n=e.container(),o=e.offset();return gN(n)?C.from(n.childNodes[o+t]):C.none()},Ab=(t,e)=>{var n;const o=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),o},bN=(t,e,n)=>hr(e,t)===hr(n,t),Rb=(t,e,n)=>{const o=t?"previousSibling":"nextSibling";let r=n;for(;r&&r!==e;){let a=r[o];if(a&&kb(a)&&(a=a[o]),Iu(a)||fN(a)){if(bN(e,a,r))return a;break}if(hN(a))break;r=r.parentNode}return null},Ai=et(Ab,!0),Ri=et(Ab,!1),Uu=(t,e,n)=>{let o;const r=et(Rb,!0,e),a=et(Rb,!1,e),s=n.startContainer,i=n.startOffset;if(es(s)){const l=pN(s)?s.parentNode:s,c=l.getAttribute("data-mce-caret");if("before"===c&&(o=l.nextSibling,ki(o)))return Ai(o);if("after"===c&&(o=l.previousSibling,ki(o)))return Ri(o)}if(!n.collapsed)return n;if($(s)){if(kb(s)){if(1===t){if(o=a(s),o)return Ai(o);if(o=r(s),o)return Ri(o)}if(-1===t){if(o=r(s),o)return Ri(o);if(o=a(s),o)return Ai(o)}return n}if(Gl(s)&&i>=s.data.length-1)return 1===t&&(o=a(s),o)?Ai(o):n;if(Yl(s)&&i<=1)return-1===t&&(o=r(s),o)?Ri(o):n;if(i===s.data.length)return o=a(s),o?Ai(o):n;if(0===i)return o=r(s),o?Ri(o):n}return n},Tb=(t,e)=>Fu(t?0:-1,e).filter(Iu),Ti=(t,e,n)=>{const o=Uu(t,e,n);return-1===t?F.fromRangeStart(o):F.fromRangeEnd(o)},rc=t=>C.from(t.getNode()).map(R),zu=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},ac=(t,e)=>{const n=mo(t,e);return!(n||!ae(t.getNode()))||n};var Te,t;(t=Te||(Te={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const vN=Xt,fo=$,Ob=ot,Hu=ae,as=to,Bb=t=>{return kh(t)||!!Eu(e=t)&&!Ke(Oe(e.getElementsByTagName("*")),(n,o)=>n||Sh(o),!1);var e},sc=Nh,Db=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,Lb=(t,e)=>{if(rs(t)){if(as(e.previousSibling)&&!fo(e.previousSibling))return F.before(e);if(fo(e))return F(e,0)}if(sa(t)){if(as(e.nextSibling)&&!fo(e.nextSibling))return F.after(e);if(fo(e))return F(e,e.data.length)}return sa(t)?Hu(e)?F.before(e):F.after(e):F.before(e)},ju=(t,e,n)=>{let o,r,a,s;if(!Ob(n)||!e)return null;if(e.isEqual(F.after(n))&&n.lastChild){if(s=F.after(n.lastChild),sa(t)&&as(n.lastChild)&&Ob(n.lastChild))return Hu(n.lastChild)?F.before(n.lastChild):s}else s=e;const i=s.container();let l=s.offset();if(fo(i)){if(sa(t)&&l>0)return F(i,--l);if(rs(t)&&l<i.length)return F(i,++l);o=i}else{if(sa(t)&&l>0&&(r=Db(i,l-1),as(r)))return!Bb(r)&&(a=Ni(r,t,sc,r),a)?fo(a)?F(a,a.data.length):F.after(a):fo(r)?F(r,r.data.length):F.before(r);if(rs(t)&&l<i.childNodes.length&&(r=Db(i,l),as(r)))return Hu(r)?((d,u)=>{const m=u.nextSibling;return m&&as(m)?fo(m)?F(m,0):F.before(m):ju(Te.Forwards,F.after(u),d)})(n,r):!Bb(r)&&(a=Ni(r,t,sc,r),a)?fo(a)?F(a,0):F.before(a):fo(r)?F(r,0):F.after(r);o=r||s.getNode()}if(o&&(rs(t)&&s.isAtEnd()||sa(t)&&s.isAtStart())&&(o=Ni(o,t,se,n,!0),sc(o,n)))return Lb(t,o);r=o&&Ni(o,t,sc,n);const c=qn(gt(((d,u)=>{const m=[];let p=d;for(;p&&p!==u;)m.push(p),p=p.parentNode;return m})(i,n),vN));return!c||r&&c.contains(r)?r?Lb(t,r):null:(s=rs(t)?F.after(c):F.before(c),s)},go=t=>({next:e=>ju(Te.Forwards,e,t),prev:e=>ju(Te.Backwards,e,t)}),Pb=t=>F.isTextPosition(t)?0===t.offset():to(t.getNode()),Mb=t=>{if(F.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return to(t.getNode(!0))},Ib=(t,e)=>!F.isTextPosition(t)&&!F.isTextPosition(e)&&t.getNode()===e.getNode(!0),_n=(t,e,n)=>{const o=go(e);return C.from(t?o.next(n):o.prev(n))},ss=(t,e,n)=>_n(t,e,n).bind(o=>{return mo(n,o,e)&&(a=n,s=o,t?!Ib(a,s)&&(F.isTextPosition(i=a)||!ae(i.getNode()))&&Mb(a)&&Pb(s):!Ib(s,a)&&Pb(a)&&Mb(s))?_n(t,e,o):C.some(o);var a,s,i}),Fb=(t,e,n,o)=>ss(t,e,n).bind(r=>o(r)?Fb(t,e,r,o):C.some(r)),is=(t,e)=>{const n=t?e.firstChild:e.lastChild;return $(n)?C.some(F(n,t?0:n.data.length)):n?to(n)?C.some(t?F.before(n):ae(o=n)?F.before(o):F.after(o)):((r,a,s)=>{const i=r?F.before(s):F.after(s);return _n(r,a,i)})(t,e,n):C.none();var o},nn=et(_n,!0),un=et(_n,!1),Ve=et(is,!0),zn=et(is,!1),$u="_mce_caret",xn=t=>ot(t)&&t.id===$u,ia=(t,e)=>{let n=e;for(;n&&n!==t;){if(xn(n))return n;n=n.parentNode}return null},Ub=t=>bt(t,"name"),zb=t=>W.isArray(t.start),ic=t=>!(!Ub(t)&&Mn(t.forward))||t.forward,Hb=(t,e)=>(ot(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),yN=(t,e)=>zn(t).fold(Gt,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),jb=(t,e,n)=>!(e.hasChildNodes()||!ia(t,e)||(((o,r)=>{var a;const s=(null!==(a=o.ownerDocument)&&void 0!==a?a:document).createTextNode(Re);o.appendChild(s),r.setStart(s,0),r.setEnd(s,0)})(e,n),0)),$b=(t,e,n,o)=>{const r=n[e?"start":"end"],a=t.getRoot();if(r){let s=a,i=r[0];for(let l=r.length-1;s&&l>=1;l--){const c=s.childNodes;if(jb(a,s,o))return!0;if(r[l]>c.length-1)return!!jb(a,s,o)||yN(s,o);s=c[r[l]]}$(s)&&(i=Math.min(r[0],s.data.length)),ot(s)&&(i=Math.min(r[0],s.childNodes.length)),e?o.setStart(s,i):o.setEnd(s,i)}return!0},Wu=t=>$(t)&&t.data.length>0,Wb=(t,e,n)=>{const o=t.get(n.id+"_"+e),r=o?.parentNode,a=n.keep;if(o&&r){let s,i;if("start"===e?a?o.hasChildNodes()?(s=o.firstChild,i=1):Wu(o.nextSibling)?(s=o.nextSibling,i=0):Wu(o.previousSibling)?(s=o.previousSibling,i=o.previousSibling.data.length):(s=r,i=t.nodeIndex(o)+1):(s=r,i=t.nodeIndex(o)):a?o.hasChildNodes()?(s=o.firstChild,i=1):Wu(o.previousSibling)?(s=o.previousSibling,i=o.previousSibling.data.length):(s=r,i=t.nodeIndex(o)):(s=r,i=t.nodeIndex(o)),!a){const l=o.previousSibling,c=o.nextSibling;let d;for(W.each(W.grep(o.childNodes),u=>{$(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});d=t.get(n.id+"_"+e);)t.remove(d,!0);if($(c)&&$(l)&&!Rt.browser.isOpera()){const u=l.data.length;l.appendData(c.data),t.remove(c),s=l,i=u}}return C.some(F(s,i))}return C.none()},CN=(t,e,n)=>((o,r,a=!1)=>{return 2===r?Wh(vn,a,o):3===r?(s=>{const i=s.getRng();return{start:Fh(s.dom.getRoot(),F.fromRangeStart(i)),end:Fh(s.dom.getRoot(),F.fromRangeEnd(i)),forward:s.isForward()}})(o):r?{rng:(s=o).getRng(),forward:s.isForward()}:qh(o,!1);var s})(t,e,n),wN=(t,e)=>{((n,o)=>{const r=n.dom;if(o){if(zb(o))return((a,s)=>{const i=a.createRng();return $b(a,!0,s,i)&&$b(a,!1,s,i)?C.some({range:i,forward:ic(s)}):C.none()})(r,o);if(at(o.start))return((a,s)=>{const i=C.from(Uh(a.getRoot(),s.start)),l=C.from(Uh(a.getRoot(),s.end));return Se(i,l,(c,d)=>{const u=a.createRng();return u.setStart(c.container(),c.offset()),u.setEnd(d.container(),d.offset()),{range:u,forward:ic(s)}})})(r,o);if(bt(o,"id"))return((a,s)=>{const i=Wb(a,"start",s),l=Wb(a,"end",s);return Se(i,l.or(i),(c,d)=>{const u=a.createRng();return u.setStart(Hb(a,c.container()),c.offset()),u.setEnd(Hb(a,d.container()),d.offset()),{range:u,forward:ic(s)}})})(r,o);if(Ub(o))return((a,s)=>C.from(a.select(s.name)[s.index]).map(i=>{const l=a.createRng();return l.selectNode(i),{range:l,forward:!0}}))(r,o);if((a=>bt(a,"rng"))(o))return C.some({range:o.rng,forward:ic(o)})}return C.none()})(t,e).each(({range:n,forward:o})=>{t.setRng(n,o)})},Sn=t=>ot(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),lc=(Vb=ye,t=>Vb===t);var Vb;const la=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),Vu=t=>!la(t)&&!lc(t)&&!Vd(t),qu=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},qb=(t,e)=>{const n=tn(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:gt(an(t,a=>{const s=Xl(a);return s?[R(s)]:[]}),vi)},ls=t=>qb(qu(t.selection.getSel()),R(t.getBody())),Oi=(t,e)=>ni(t,"table",e),Kb=t=>Ld(t).fold(G([t]),e=>[t].concat(Kb(e))),Ku=t=>Pd(t).fold(G([t]),e=>"br"===Nt(e)?ir(e).map(n=>[t].concat(Ku(n))).getOr([]):[t].concat(Ku(e))),Yu=(t,e)=>Se((n=>{const o=n.startContainer,r=n.startOffset;return $(o)?0===r?C.some(R(o)):C.none():C.from(o.childNodes[r]).map(R)})(e),(n=>{const o=n.endContainer,r=n.endOffset;return $(o)?r===o.data.length?C.some(R(o)):C.none():C.from(o.childNodes[r-1]).map(R)})(e),(n,o)=>{const r=fe(Kb(t),et(Mt,n)),a=fe(Ku(t),et(Mt,o));return r.isSome()&&a.isSome()}).getOr(!1),Gu=(t,e,n,o)=>{const r=n,a=new Ne(n,r),s=Wn(t.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!Bt(["td","th","table"],c.toLowerCase()));let i=n;do{if($(i)&&0!==W.trim(i.data).length)return void(o?e.setStart(i,0):e.setEnd(i,i.data.length));if(s[i.nodeName])return void(o?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=o?a.next():a.prev());"BODY"===r.nodeName&&(o?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},cc=t=>{const e=t.selection.getSel();return q(e)&&e.rangeCount>0},Xu=(t,e)=>{const n=ls(t);n.length>0?z(n,o=>{const r=o.dom,a=t.dom.createRng();a.setStartBefore(r),a.setEndAfter(r),e(a,!0)}):e(t.selection.getRng(),!1)},Yb=(t,e,n)=>{const o=qh(t,e);n(o),t.moveToBookmark(o)},Bi=t=>re(t?.nodeType),Zu=t=>ot(t)&&!Sn(t)&&!xn(t)&&!Kr(t),Gb=(t,e,n)=>{const{selection:o,dom:r}=t,a=o.getNode(),s=Xt(a);Yb(o,!0,()=>{e()}),s&&Xt(a)&&r.isChildOf(a,t.getBody())?t.selection.select(a):n(o.getStart())&&EN(r,o)},EN=(t,e)=>{var n,o;const r=e.getRng(),{startContainer:a,startOffset:s}=r;if(!((i,l)=>{if(Zu(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=i.getAttrib(l,"data-mce-selected"),d=parseInt(c,10);return!isNaN(d)&&d>0}return!1})(t,e.getNode())&&ot(a)){const i=a.childNodes,l=t.getRoot();let c;if(s<i.length){const d=i[s];c=new Ne(d,null!==(n=t.getParent(d,t.isBlock))&&void 0!==n?n:l)}else{const d=i[i.length-1];c=new Ne(d,null!==(o=t.getParent(d,t.isBlock))&&void 0!==o?o:l),c.next(!0)}for(let d=c.current();d;d=c.next()){if("false"===t.getContentEditable(d))return;if($(d)&&!Ju(d))return r.setStart(d,0),void e.setRng(r)}}},Xb=(t,e,n)=>{if(t){const o=e?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(ot(t)||!Ju(t))return t}},Qu=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||Gr(t,e),cs=(t,e,n)=>t.schema.isValidChild(e,n),Ju=(t,e=!1)=>{if(q(t)&&$(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return Ya(n)}return!1},Zb=(t,e)=>{const n=t.dom;return Zu(e)&&"false"===n.getContentEditable(e)&&((o,r)=>{const a="[data-mce-cef-wrappable]",s=bk(o),i=tr(s)?a:`${a},${s}`;return Yn(R(r),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},br=(t,e)=>kt(t)?t(e):(q(e)&&(t=t.replace(/%(\w+)/g,(n,o)=>e[o]||n)),t),tm=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),em=(t,e)=>{if(ue(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=li(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},dc=(t,e,n)=>{const o=t.getStyle(e,n);return em(o,n)},Qb=(t,e)=>{let n;return t.getParent(e,o=>!!ot(o)&&(n=t.getStyle(o,"text-decoration"),!!n&&"none"!==n)),n},uc=(t,e,n)=>t.getParents(e,n,t.getRoot()),nm=(t,e,n)=>{const o=t.formatter.get(e);return q(o)&&ee(o,n)},po=t=>Vn(t,"block"),kn=t=>Vn(t,"selector"),Ce=t=>Vn(t,"inline"),om=t=>kn(t)&&!1!==t.expand&&!Ce(t),Jb=t=>(e=>{const n=[];let o=e;for(;o;){if($(o)&&o.data!==Re||o.childNodes.length>1)return[];ot(o)&&n.push(o),o=o.firstChild}return n})(t).length>0,rm=t=>xn(t.dom)&&Jb(t.dom),ds=Sn,t0=uc,e0=Ju,_N=Qu,n0=(t,e)=>{let n=e;for(;n;){if(ot(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},o0=(t,e,n,o)=>{const r=e.data;if(t){for(let a=n;a>0;a--)if(o(r.charAt(a-1)))return a}else for(let a=n;a<r.length;a++)if(o(r.charAt(a)))return a;return-1},xN=(t,e,n)=>o0(t,e,n,o=>lc(o)||la(o)),SN=(t,e,n)=>o0(t,e,n,Vu),r0=(t,e,n,o,r,a)=>{let s;const i=t.getParent(n,t.isBlock)||e,l=(c,d,u)=>{const m=ea(t);return C.from((r?m.backwards:m.forwards)(c,d,(f,h)=>ds(f.parentNode)?-1:(s=f,u(r,f,h)),i))};return l(n,o,xN).bind(c=>a?l(c.container,c.offset+(r?-1:0),SN):C.some(c)).orThunk(()=>s?C.some({container:s,offset:r?0:s.length}):C.none())},a0=(t,e,n,o,r)=>{const a=o[r];$(o)&&tr(o.data)&&a&&(o=a);const s=t0(t,o);for(let i=0;i<s.length;i++)for(let l=0;l<e.length;l++){const c=e[l];if((!q(c.collapsed)||c.collapsed===n.collapsed)&&kn(c)&&t.is(s[i],c.selector))return s[i]}return o},s0=(t,e,n,o)=>{var r;let a=n;const s=t.getRoot(),i=e[0];if(po(i)&&(a=i.wrapper?null:t.getParent(n,i.block,s)),!a){const l=null!==(r=t.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==r?r:s;a=t.getParent($(n)?n.parentNode:n,c=>c!==s&&_N(t.schema,c),l)}if(a&&po(i)&&i.wrapper&&(a=t0(t,a,"ul,ol").reverse()[0]||a),!a)for(a=n;a&&a[o]&&!t.isBlock(a[o])&&(a=a[o],!tm(a,"br")););return a||n},i0=(t,e,n,o)=>{const r=n.parentNode;return!q(n[o])&&(!(r!==e&&!ue(r)&&!t.isBlock(r))||i0(t,e,r,o))},mc=(t,e,n,o,r)=>{let a=n;const s=r?"previousSibling":"nextSibling",i=t.getRoot();if($(n)&&!e0(n)&&(r?o>0:o<n.data.length))return n;for(;a;){if(!e[0].block_expand&&t.isBlock(a))return a;for(let c=a[s];c;c=c[s]){const d=$(c)&&!i0(t,i,c,s);if(!ds(c)&&(!ae(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!e0(c,d))return a}if(a===i||a.parentNode===i){n=a;break}a=a.parentNode}var l;return n},l0=t=>ds(t.parentNode)||ds(t),ca=(t,e,n,o=!1)=>{let{startContainer:r,startOffset:a,endContainer:s,endOffset:i}=e;const l=n[0];return ot(r)&&r.hasChildNodes()&&(r=gr(r,a),$(r)&&(a=0)),ot(s)&&s.hasChildNodes()&&(s=gr(s,e.collapsed?i:i-1),$(s)&&(i=s.data.length)),r=n0(t,r),s=n0(t,s),l0(r)&&(r=ds(r)?r:r.parentNode,r=e.collapsed?r.previousSibling||r:r.nextSibling||r,$(r)&&(a=e.collapsed?r.length:0)),l0(s)&&(s=ds(s)?s:s.parentNode,s=e.collapsed?s.nextSibling||s:s.previousSibling||s,$(s)&&(i=e.collapsed?0:s.length)),e.collapsed&&(r0(t,t.getRoot(),r,a,!0,o).each(({container:c,offset:d})=>{r=c,a=d}),r0(t,t.getRoot(),s,i,!1,o).each(({container:c,offset:d})=>{s=c,i=d})),(Ce(l)||l.block_expand)&&(Ce(l)&&$(r)&&0!==a||(r=mc(t,n,r,a,!0)),Ce(l)&&$(s)&&i!==s.data.length||(s=mc(t,n,s,i,!1))),om(l)&&(r=a0(t,n,e,r,"previousSibling"),s=a0(t,n,e,s,"nextSibling")),(po(l)||kn(l))&&(r=s0(t,n,r,"previousSibling"),s=s0(t,n,s,"nextSibling"),po(l)&&(t.isBlock(r)||(r=mc(t,n,r,a,!0),$(r)&&(a=0)),t.isBlock(s)||(s=mc(t,n,s,i,!1),$(s)&&(i=s.data.length)))),ot(r)&&r.parentNode&&(a=t.nodeIndex(r),r=r.parentNode),ot(s)&&s.parentNode&&(i=t.nodeIndex(s)+1,s=s.parentNode),{startContainer:r,startOffset:a,endContainer:s,endOffset:i}},Di=(t,e,n)=>{var o;const r=e.startOffset,a=gr(e.startContainer,r),s=e.endOffset,i=gr(e.endContainer,s-1),l=g=>{const b=g[0];$(b)&&b===a&&r>=b.data.length&&g.splice(0,1);const v=g[g.length-1];return 0===s&&g.length>0&&v===i&&$(v)&&g.splice(g.length-1,1),g},c=(g,b,v)=>{const y=[];for(;g&&g!==v;g=g[b])y.push(g);return y},d=(g,b)=>t.getParent(g,v=>v.parentNode===b,b),u=(g,b,v)=>{const y=v?"nextSibling":"previousSibling";for(let E=g,w=E.parentNode;E&&E!==b;E=w){w=E.parentNode;const _=c(E===g?E:E[y],y);_.length&&(v||_.reverse(),n(l(_)))}};if(a===i)return n(l([a]));const m=null!==(o=t.findCommonAncestor(a,i))&&void 0!==o?o:t.getRoot();if(t.isChildOf(a,i))return u(a,m,!0);if(t.isChildOf(i,a))return u(i,m);const p=d(a,m)||a,f=d(i,m)||i;u(a,p,!0);const h=c(p===a?p:p.nextSibling,"nextSibling",f===i?f.nextSibling:f);h.length&&n(l(h)),u(i,f)},kN=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],c0=(t,e,n,o,r,a)=>{const{uid:s=e,...i}=n;Ha(t,mi()),Et(t,`${Xa()}`,s),Et(t,`${Jr()}`,o);const{attributes:l={},classes:c=[]}=r(s,i);if(Lt(t,l),d=t,z(c,m=>{Ha(d,m)}),a){c.length>0&&Et(t,`${gi()}`,c.join(","));const d=Pe(l);d.length>0&&Et(t,`${pi()}`,d.join(","))}var d},d0=(t,e,n,o,r)=>{const a=ke("span",t);return c0(a,e,n,o,r,!1),a},u0=t=>{const e=(()=>{const a={};return{register:(s,i)=>{a[s]={name:s,settings:i}},lookup:s=>Kt(a,s).map(i=>i.settings),getNames:()=>Pe(a)}})();((a,s)=>{const i=Jr(),l=d=>C.from(d.attr(i)).bind(s.lookup),c=d=>{var u,m;d.attr(Xa(),null),d.attr(Jr(),null),d.attr(fi(),null);const p=C.from(d.attr(pi())).map(b=>b.split(",")).getOr([]),f=C.from(d.attr(gi())).map(b=>b.split(",")).getOr([]);z(p,b=>d.attr(b,null));const h=null!==(m=null===(u=d.attr("class"))||void 0===u?void 0:u.split(" "))&&void 0!==m?m:[],g=Na(h,[mi()].concat(f));d.attr("class",g.length>0?g.join(" "):null),d.attr(gi(),null),d.attr(pi(),null)};a.serializer.addTempAttr(fi()),a.serializer.addAttributeFilter(i,d=>{for(const u of d)l(u).each(m=>{!1===m.persistent&&("span"===u.name?u.unwrap():c(u))})})})(t,e);const n=((a,s)=>{const i=Ae({}),l=()=>({listeners:[],previous:Fo()}),c=(p,f)=>{d(p,h=>(f(h),h))},d=(p,f)=>{const h=i.get(),g=f(Kt(h,p).getOrThunk(l));h[p]=g,i.set(h)},u=(p,f)=>{z(dh(a,p),h=>{f?Et(h,fi(),"true"):ne(h,fi())})},m=hu(()=>{const p=Ot(s.getNames());z(p,f=>{d(f,h=>{const g=h.previous.get();return lh(a,C.some(f)).fold(()=>{g.each(b=>{var v;c(v=f,y=>{z(y.listeners,E=>E(!1,v))}),h.previous.clear(),u(b,!1)})},({uid:b,name:v,elements:y})=>{var E,w,_;so(g,b)||(g.each(E=>u(E,!1)),w=b,_=y,c(E=v,k=>{z(k.listeners,S=>S(!0,E,{uid:w,nodes:At(_,O=>O.dom)}))}),h.previous.set(b),u(b,!0))}),{previous:h.previous,listeners:h.listeners}})})},30);return a.on("remove",()=>{m.cancel()}),a.on("NodeChange",()=>{m.throttle()}),{addListener:(p,f)=>{d(p,h=>({previous:h.previous,listeners:h.listeners.concat([f])}))}}})(t,e),o=pt("span"),r=a=>{z(a,s=>{o(s)?cr(s):(i=>{Qs(i,mi()),ne(i,`${Xa()}`),ne(i,`${Jr()}`),ne(i,`${fi()}`);const l=oe(i,`${pi()}`).map(u=>u.split(",")).getOr([]),c=oe(i,`${gi()}`).map(u=>u.split(",")).getOr([]);var d;z(l,u=>ne(i,u)),d=i,z(c,u=>{Qs(d,u)}),ne(i,`${gi()}`),ne(i,`${pi()}`)})(s)})};return{register:(a,s)=>{e.register(a,s)},annotate:(a,s)=>{e.lookup(a).each(i=>{var l,c,d,u;c=a,d=i,u=s,(l=t).undoManager.transact(()=>{const m=l.selection,p=m.getRng(),f=ls(l).length>0,h=hi("mce-annotation");if(p.collapsed&&!f&&((g,b)=>{const v=ca(g.dom,b,[{inline:"span"}]);b.setStart(v.startContainer,v.startOffset),b.setEnd(v.endContainer,v.endOffset),g.selection.setRng(b)})(l,p),m.getRng().collapsed&&!f){const g=d0(l.getDoc(),h,u,c,d.decorate);Pl(g,ye),m.getRng().insertNode(g.dom),m.select(g.dom)}else Yb(m,!1,()=>{Xu(l,g=>{((t,e,n,o,r,a)=>{const s=[],i=d0(t.getDoc(),n,a,o,r),l=Fo(),c=()=>{l.clear()},d=m=>{z(m,u)},u=m=>{switch(p=t,f=m,h="span",g=Nt(m),Xn(f).fold(()=>"skipping",b=>{return"br"===g||Me(v=f)&&bi(v)===Re?"valid":(v=>Ge(v)&&Dd(v,mi()))(f)?"existing":xn(f.dom)?"caret":ee(kN,v=>Yn(f,v))?"valid-block":cs(p,h,g)&&cs(p,Nt(b),h)?"valid":"invalid-child";var v})){case"invalid-child":{c();const p=je(m);d(p),c();break}case"valid-block":c(),c0(m,n,a,o,r,!0);break;case"valid":{const p=l.get().getOrThunk(()=>{const f=ta(i);return s.push(f),l.set(f),f});gp(m,p);break}}var p,f,h,g};Di(t.dom,e,m=>{c(),(p=>{const f=At(p,R);d(f)})(m)})})(l,g,h,c,d.decorate,u)})})})})},annotationChanged:(a,s)=>{n.addListener(a,s)},remove:a=>{lh(t,C.some(a)).each(({elements:s})=>{const i=t.selection.getBookmark();r(s),t.selection.moveToBookmark(i)})},removeAll:a=>{const s=t.selection.getBookmark();Ft(uh(t,a),(i,l)=>{r(i)}),t.selection.moveToBookmark(s)},getAll:a=>{const s=uh(t,a);return Dr(s,i=>At(i,l=>l.dom))}}},Li=t=>({getBookmark:et(CN,t),moveToBookmark:et(wN,t)});Li.isBookmarkNode=Sn;const m0=(t,e,n)=>!n.collapsed&&ee(n.getClientRects(),o=>{return s=e,(a=t)>=(r=o).left&&a<=r.right&&s>=r.top&&s<=r.bottom;var r,a,s}),f0=(t,e,n)=>{t.dispatch(e,n)},g0=(t,e,n,o)=>{t.dispatch("FormatApply",{format:e,node:n,vars:o})},p0=(t,e,n,o)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:o})},h0=(t,e)=>t.dispatch("SetContent",e),b0=(t,e)=>t.dispatch("GetContent",e),am=(t,e)=>{t.dispatch("AutocompleterUpdateActiveRange",e)},v0=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),Q={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||Q.metaKeyPressed(t),metaKeyPressed:t=>Rt.os.isMacOS()||Rt.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},da="data-mce-selected",y0=Math.abs,fc=Math.round,sm={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},C0=(t,e)=>{const n=e.dom,o=e.getDoc(),r=document,a=e.getBody();let s,i,l,c,d,u,m,p,f,h,g,b,v,y,E;const w=Y=>q(Y)&&(Np(Y)||n.is(Y,"figure.image")),_=Y=>co(Y)||n.hasClass(Y,"mce-preview-object"),k=Y=>{const nt=Y.target;((A,B)=>{if("longpress"===(I=A).type||0===I.type.indexOf("touch")){const I=A.touches[0];return w(A.target)&&!m0(I.clientX,I.clientY,B)}var I;return w(A.target)&&!m0(A.clientX,A.clientY,B)})(Y,e.selection.getRng())&&!Y.isDefaultPrevented()&&e.selection.select(nt)},S=Y=>n.hasClass(Y,"mce-preview-object")&&q(Y.firstElementChild)?[Y,Y.firstElementChild]:n.is(Y,"figure.image")?[Y.querySelector("img")]:[Y],O=Y=>{const nt=lb(e);return!(!nt||e.mode.isReadOnly())&&"false"!==Y.getAttribute("data-mce-resize")&&Y!==e.getBody()&&(n.hasClass(Y,"mce-preview-object")&&q(Y.firstElementChild)?Yn(R(Y.firstElementChild),nt):Yn(R(Y),nt))},P=(Y,nt,A)=>{if(q(A)){const B=S(Y);z(B,I=>{I.style[nt]||!e.schema.isValid(I.nodeName.toLowerCase(),nt)?n.setStyle(I,nt,A):n.setAttrib(I,nt,""+A)})}},x=(Y,nt,A)=>{P(Y,"width",nt),P(Y,"height",A)},N=Y=>{let nt,A,B,I,M;nt=Y.screenX-u,A=Y.screenY-m,b=nt*c[2]+p,v=A*c[3]+f,b=b<5?5:b,v=v<5?5:v,B=(w(s)||_(s))&&!1!==ck(e)?!Q.modifierPressed(Y):Q.modifierPressed(Y),B&&(y0(nt)>y0(A)?(v=fc(b*h),b=fc(v/h)):(b=fc(v/h),v=fc(b*h))),x(i,b,v),I=c.startPos.x+nt,M=c.startPos.y+A,I=I>0?I:0,M=M>0?M:0,n.setStyles(l,{left:I,top:M,display:"block"}),l.innerHTML=b+" &times; "+v,c[2]<0&&i.clientWidth<=b&&n.setStyle(i,"left",void 0+(p-b)),c[3]<0&&i.clientHeight<=v&&n.setStyle(i,"top",void 0+(f-v)),nt=a.scrollWidth-y,A=a.scrollHeight-E,nt+A!==0&&n.setStyles(l,{left:I-nt,top:M-A}),g||(e.dispatch("ObjectResizeStart",{target:s,width:p,height:f,origin:"corner-"+c.name}),g=!0)},T=()=>{const Y=g;g=!1,Y&&(P(s,"width",b),P(s,"height",v)),n.unbind(o,"mousemove",N),n.unbind(o,"mouseup",T),r!==o&&(n.unbind(r,"mousemove",N),n.unbind(r,"mouseup",T)),n.remove(i),n.remove(l),n.remove(d),U(s),Y&&(e.dispatch("ObjectResized",{target:s,width:b,height:v,origin:"corner-"+c.name}),n.setAttrib(s,"style",n.getAttrib(s,"style"))),e.nodeChanged()},U=Y=>{st();const nt=n.getPos(Y,a),A=nt.x,B=nt.y,I=Y.getBoundingClientRect(),M=I.width||I.right-I.left,K=I.height||I.bottom-I.top;s!==Y&&(H(),s=Y,b=v=0);const V=e.dispatch("ObjectSelected",{target:Y});O(Y)&&!V.isDefaultPrevented()?Ft(sm,(it,dt)=>{let vt=n.get("mceResizeHandle"+dt);vt&&n.remove(vt),vt=n.add(a,"div",{id:"mceResizeHandle"+dt,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+dt+"-resize; margin:0; padding:0"}),n.bind(vt,"mousedown",Zt=>{Zt.stopImmediatePropagation(),Zt.preventDefault(),(Qt=>{const Cn=S(s)[0];u=Qt.screenX,m=Qt.screenY,p=Cn.clientWidth,f=Cn.clientHeight,h=f/p,c=it,c.name=dt,c.startPos={x:M*it[0]+A,y:K*it[1]+B},y=a.scrollWidth,E=a.scrollHeight,d=n.add(a,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=((Z,yt)=>{if(_(yt))return Z.create("img",{src:Rt.transparentSrc});if(lo(yt)){const _t=Dt(c.name,"n")?It:pe,ht=yt.cloneNode(!0);return _t(Z.select("tr",ht)).each(Tt=>{const Wt=Z.select("td,th",Tt);Z.setStyle(Tt,"height",null),z(Wt,X=>Z.setStyle(X,"height",null))}),ht}return yt.cloneNode(!0)})(n,s),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:A,top:B,margin:0}),x(i,M,K),i.removeAttribute(da),a.appendChild(i),n.bind(o,"mousemove",N),n.bind(o,"mouseup",T),r!==o&&(n.bind(r,"mousemove",N),n.bind(r,"mouseup",T)),l=n.add(a,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+f)})(Zt)}),it.elm=vt,n.setStyles(vt,{left:M*it[0]+A-vt.offsetWidth/2,top:K*it[1]+B-vt.offsetHeight/2})}):H(!1)},j=Vl(U,0),H=(Y=!0)=>{j.cancel(),st(),s&&Y&&s.removeAttribute(da),Ft(sm,(nt,A)=>{const B=n.get("mceResizeHandle"+A);B&&(n.unbind(B),n.remove(B))})},tt=(Y,nt)=>n.isChildOf(Y,nt),rt=Y=>{if(g||e.removed||e.composing)return;const nt="mousedown"===Y.type?Y.target:t.getNode(),A=Va(R(nt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(I=>I.dom).filter(I=>n.isEditable(I.parentElement)||"IMG"===I.nodeName&&n.isEditable(I)).getOrUndefined(),B=q(A)?n.getAttrib(A,da,"1"):"1";if(z(n.select(`img[${da}],hr[${da}]`),I=>{I.removeAttribute(da)}),q(A)&&tt(A,a)&&e.hasFocus()){lt();const I=t.getStart(!0);if(tt(I,A)&&tt(t.getEnd(!0),A))return n.setAttrib(A,da,B),void j.throttle(A)}H()},st=()=>{Ft(sm,Y=>{Y.elm&&(n.unbind(Y.elm),delete Y.elm)})},lt=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{lt(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",rt),e.on("keyup compositionend",Y=>{s&&"TABLE"===s.nodeName&&rt(Y)}),e.on("hide blur",H),e.on("contextmenu longpress",k,!0)}),e.on("remove",st),{isResizable:O,showResizeRect:U,hideResizeRect:H,updateResizeRect:rt,destroy:()=>{j.cancel(),s=i=d=null}}},w0=(t,e,n)=>{const o=t.document.createRange();var r,a;return r=o,e.fold(a=>{r.setStartBefore(a.dom)},(a,s)=>{r.setStart(a.dom,s)},a=>{r.setStartAfter(a.dom)}),a=o,n.fold(i=>{a.setEndBefore(i.dom)},(i,l)=>{a.setEnd(i.dom,l)},i=>{a.setEndAfter(i.dom)}),o},im=(t,e,n,o,r)=>{const a=t.document.createRange();return a.setStart(e.dom,n),a.setEnd(o.dom,r),a},Pi=uo([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),E0=(t,e,n)=>e(R(n.startContainer),n.startOffset,R(n.endContainer),n.endOffset),_0=(t,e,n,o)=>({start:t,soffset:e,finish:n,foffset:o}),lm=uo([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),zo={before:lm.before,on:lm.on,after:lm.after,cata:(t,e,n,o)=>t.fold(e,n,o),getStart:t=>t.fold(me,me,me)},gc=uo([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),us={domRange:gc.domRange,relative:gc.relative,exact:gc.exact,exactFromRange:t=>gc.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:o=>R(o.startContainer),relative:(o,r)=>zo.getStart(o),exact:(o,r,a,s)=>o});return ti(e)},range:_0},pc=(t,e)=>{const n=Nt(t);return"input"===n?zo.after(t):Bt(["br","img"],n)?0===e?zo.before(t):zo.after(t):zo.on(t,e)},AN=(t,e)=>{const n=t.fold(zo.before,pc,zo.after),o=e.fold(zo.before,pc,zo.after);return us.relative(n,o)},x0=(t,e,n,o)=>{const r=pc(t,e),a=pc(n,o);return us.relative(r,a)},cm=(t,e)=>{const n=(e||document).createDocumentFragment();return z(t,o=>{n.appendChild(o.dom)}),R(n)},S0=(t,e,n)=>((t,e,n)=>{return(s=t.document,i=e,l=n,s.caretPositionFromPoint?(d=i,u=l,C.from(null===(m=(c=s).caretPositionFromPoint)||void 0===m?void 0:m.call(c,d,u)).bind(p=>{if(null===p.offsetNode)return C.none();const f=c.createRange();return f.setStart(p.offsetNode,p.offset),f.collapse(),C.some(f)})):s.caretRangeFromPoint?((c,d,u)=>{var m;return C.from(null===(m=c.caretRangeFromPoint)||void 0===m?void 0:m.call(c,d,u))})(s,i,l):C.none()).map(s=>_0(R(s.startContainer),s.startOffset,R(s.endContainer),s.endOffset));var s,i,l,c,d,u,m})(ti(R(n)).dom,t,e).map(r=>{const a=n.createRange();return a.setStart(r.start.dom,r.soffset),a.setEnd(r.finish.dom,r.foffset),a}).getOrUndefined(),dm=(t,e)=>q(t)&&q(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,k0=(t,e,n)=>null!==((o,r,a)=>{let s=o;for(;s&&s!==r;){if(a(s))return s;s=s.parentNode}return null})(t,e,n),ON=(t,e,n)=>k0(t,e,o=>o.nodeName===n),BN=(t,e)=>En(t)&&!k0(t,e,xn),N0=(t,e,n)=>{const o=e.parentNode;if(o){const r=new Ne(e,t.getParent(o,t.isBlock)||t.getRoot());let a;for(;a=r[n?"prev":"next"]();)if(ae(a))return!0}return!1},um=(t,e,n,o,r)=>{const a=t.getRoot(),s=t.schema.getNonEmptyElements(),i=r.parentNode;let l,c;if(!i)return C.none();const d=t.getParent(i,t.isBlock)||a;if(o&&ae(r)&&e&&t.isEmpty(d))return C.some(F(i,t.nodeIndex(r)));const u=new Ne(r,d);for(;c=u[o?"prev":"next"]();){if("false"===t.getContentEditableParent(c)||BN(c,a))return C.none();if($(c)&&c.data.length>0)return ON(c,a,"A")?C.none():C.some(F(c,o?c.data.length:0));if(t.isBlock(c)||s[c.nodeName.toLowerCase()])return C.none();l=c}return dr(l)?C.none():n&&l?C.some(F(l,0)):C.none()},A0=(t,e,n,o)=>{const r=t.getRoot();let a,s=!1,i=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const c=ot(i)&&l===i.childNodes.length,d=t.schema.getNonEmptyElements();let u=n;if(En(i))return C.none();if(ot(i)&&l>i.childNodes.length-1&&(u=!1),si(i)&&(i=r,l=0),i===r){if(u&&(a=i.childNodes[l>0?l-1:0],a)&&(En(a)||d[a.nodeName]||lo(a)))return C.none();if(i.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=$(i)&&c?i.data.length:0,!e&&i===r.lastChild&&lo(i)||((m,p)=>{let f=p;for(;f&&f!==m;){if(Xt(f))return!0;f=f.parentNode}return!1})(r,i)||En(i)||Yd(i))return C.none();if(i.hasChildNodes()&&!lo(i)){a=i;const m=new Ne(i,r);do{if(Xt(a)||En(a)){s=!1;break}if($(a)&&a.data.length>0){l=u?0:a.data.length,i=a,s=!0;break}if(d[a.nodeName.toLowerCase()]&&!Qx(a)){l=t.nodeIndex(a),i=a.parentNode,u||l++,s=!0;break}}while(a=u?m.next():m.prev())}}}return e&&($(i)&&0===l&&um(t,c,e,!0,i).each(m=>{i=m.container(),l=m.offset(),s=!0}),ot(i)&&(a=i.childNodes[l],a||(a=i.childNodes[l-1]),!a||!ae(a)||"A"===(null===(f=a.previousSibling)||void 0===f?void 0:f.nodeName)||N0(t,a,!1)||N0(t,a,!0)||um(t,c,e,!0,a).each(m=>{i=m.container(),l=m.offset(),s=!0}))),u&&!e&&$(i)&&l===i.data.length&&um(t,c,e,!1,i).each(m=>{i=m.container(),l=m.offset(),s=!0}),s&&i?C.some(F(i,l)):C.none();var f},hc=(t,e)=>{const n=e.collapsed,o=e.cloneRange(),r=F.fromRangeStart(e);return A0(t,n,!0,o).each(a=>{n&&F.isAbove(r,a)||o.setStart(a.container(),a.offset())}),n||A0(t,n,!1,o).each(a=>{o.setEnd(a.container(),a.offset())}),n&&o.collapse(!0),dm(e,o)?C.none():C.some(o)},bc=(t,e)=>t.splitText(e),vc=t=>{let e=t.startContainer,n=t.startOffset,o=t.endContainer,r=t.endOffset;if(e===o&&$(e)){if(n>0&&n<e.data.length)if(o=bc(e,n),e=o.previousSibling,r>n){r-=n;const a=bc(o,r).previousSibling;e=o=a,r=a.data.length,n=0}else r=0}else if($(e)&&n>0&&n<e.data.length&&(e=bc(e,n),n=0),$(o)&&r>0&&r<o.data.length){const a=bc(o,r).previousSibling;o=a,r=a.data.length}return{startContainer:e,startOffset:n,endContainer:o,endOffset:r}},ua=t=>({walk:(e,n)=>Di(t,e,n),split:vc,expand:(e,n={type:"word"})=>{if("word"===n.type){const o=ca(t,e,[{inline:"span"}]),r=t.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return e},normalize:e=>hc(t,e).fold(Gt,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});ua.compareRanges=dm,ua.getCaretRangeFromPoint=S0,ua.getSelectedNode=Xl,ua.getNode=gr;const DN=(t=>{const n=r=>{const a=(s=>{const i=s.dom;return Wa(s)?i.getBoundingClientRect().height:i.offsetHeight})(r);if(a<=0||null===a){const s=io(r,t);return parseFloat(s)||0}return a},o=(r,a)=>Ke(a,(s,i)=>{const l=io(r,i),c=void 0===l?0:parseInt(l,10);return isNaN(c)?s:s+c},0);return{set:(r,a)=>{if(!re(a)&&!a.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+a);const s=r.dom;oi(s)&&(s.style[t]=a+"px")},get:n,getOuter:n,aggregate:o,max:(r,a,s)=>{const i=o(r,s);return a>i?a-i:0}}})("height"),R0=()=>R(document),T0=(t,e)=>t.view(e).fold(G([]),n=>{const o=t.owner(n),r=T0(t,o);return[n].concat(r)});var LN=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?C.none():C.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(R)},owner:t=>sr(t)});const mm=t=>"textarea"===Nt(t),O0=(t,e)=>{const n=(r=>{const a=r.dom.ownerDocument,s=a.body,i=a.defaultView,l=a.documentElement;if(s===r.dom)return Ka(s.offsetLeft,s.offsetTop);const c=Ml(i?.pageYOffset,l.scrollTop),d=Ml(i?.pageXOffset,l.scrollLeft),u=Ml(l.clientTop,s.clientTop),m=Ml(l.clientLeft,s.clientLeft);return $d(r).translate(d-m,c-u)})(t),o=DN.get(t);return{element:t,bottom:n.top+o,height:o,pos:n,cleanup:e}},B0=(t,e,n,o)=>{MN(t,(r,a)=>PN(t,e,n,o),n)},D0=(t,e,n,o,r)=>{const a={elm:o.element.dom,alignToTop:r};t.dispatch("ScrollIntoView",a).isDefaultPrevented()||(n(t,e,Wd(e).top,o,r),t.dispatch("AfterScrollIntoView",a))},PN=(t,e,n,o)=>{R(t.getBody());const a=R(t.getDoc()),s=((i,l)=>{const c=((u,m)=>{const p=je(u);if(0===p.length||mm(u))return{element:u,offset:m};if(m<p.length&&!mm(p[m]))return{element:p[m],offset:0};{const f=p[p.length-1];return mm(f)?{element:u,offset:m}:"img"===Nt(f)?{element:f,offset:1}:Me(f)?{element:f,offset:bi(f).length}:{element:f,offset:je(f).length}}})(i,l),d=Tl('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return dn(c.element,d),O0(d,()=>Jt(d))})(R(n.startContainer),n.startOffset);D0(t,a,e,s,o),s.cleanup()},L0=(t,e,n,o)=>{const r=R(t.getDoc());D0(t,r,n,O0(R(e),Ct),o)},MN=(t,e,n)=>{const o=n.startContainer,r=n.startOffset,a=n.endContainer,s=n.endOffset;e(R(o),R(a));const i=t.dom.createRng();i.setStart(o,r),i.setEnd(a,s),t.selection.setRng(n)},fm=(t,e,n,o,r)=>{const a=e.pos;if(o)bp(a.left,a.top,r);else{const s=a.top-n+e.height;bp(-t.getBody().getBoundingClientRect().left,s,r)}},P0=(t,e,n,o,r,a)=>{const s=o+n,i=r.pos.top,l=r.bottom,c=l-i>=o;i<n?fm(t,r,o,!1!==a,e):i>s?fm(t,r,o,c?!1!==a:!0===a,e):l>s&&!c&&fm(t,r,o,!0===a,e)},M0=(t,e,n,o,r)=>{const a=ti(e).dom.innerHeight;P0(t,e,n,a,o,r)},I0=(t,e,n,o,r)=>{const a=ti(e).dom.innerHeight;P0(t,e,n,a,o,r);const s=(l=>{const c=R0(),d=Wd(c),u=((f,h)=>{const g=h.owner(f);return T0(h,g)})(l,LN),m=$d(l),p=Zo(u,(f,h)=>{const g=$d(h);return{left:f.left+g.left,top:f.top+g.top}},{left:0,top:0});return Ka(p.left+m.left+d.left,p.top+m.top+d.top)})(o.element),i=Cp(window);s.top<i.y?vp(o.element,!1!==r):s.top>i.bottom&&vp(o.element,!0===r)},IN=(t,e,n)=>B0(t,M0,e,n),FN=(t,e,n)=>L0(t,e,M0,n),UN=(t,e,n)=>B0(t,I0,e,n),zN=(t,e,n)=>L0(t,e,I0,n),Mi=(t,e,n)=>{(t.inline?IN:UN)(t,e,n)},F0=(t,e=!1)=>t.dom.focus({preventScroll:e}),U0=t=>{const e=lr(t).dom;return t.dom===e.activeElement},gm=(t=R0())=>C.from(t.dom.activeElement).map(R),z0=(t,e)=>{const n=Me(e)?bi(e).length:je(e).length+1;return t>n?n:t<0?0:t},HN=t=>us.range(t.start,z0(t.soffset,t.start),t.finish,z0(t.foffset,t.finish)),H0=(t,e)=>!Il(e.dom)&&(Gn(t,e)||Mt(t,e)),j0=t=>e=>H0(t,e.start)&&H0(t,e.finish),jN=t=>us.range(R(t.startContainer),t.startOffset,R(t.endContainer),t.endOffset),$N=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),C.some(e)}catch{return C.none()}},yc=t=>{const e=t.inline||Rt.browser.isFirefox()?(n=R(t.getBody()),(o=>{const r=o.getSelection();return(r&&0!==r.rangeCount?C.from(r.getRangeAt(0)):C.none()).map(jN)})(ti(n).dom).filter(j0(n))):C.none();var n;t.bookmark=e.isSome()?e:t.bookmark},pm=t=>(t.bookmark?t.bookmark:C.none()).bind(e=>{return n=R(t.getBody()),C.from(e).filter(j0(n)).map(HN);var n}).bind($N),$0={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Nn={setEditorTimeout:(t,e,n)=>{return re(r=n)||(r=0),setTimeout(()=>{t.removed||e()},r);var r},setEditorInterval:(t,e,n)=>{const o=(re(a=n)||(a=0),setInterval(()=>{t.removed?clearInterval(o):e()},a));var a;return o}};let ms;const hm=qt.DOM,bm=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Cc=(t,e)=>{const n=vk(t);return null!==hm.getParent(e,r=>{return ot(a=r)&&$0.isEditorUIElement(a)||!!n&&t.dom.is(r,n);var a})},vm=t=>{try{const e=lr(R(t.getElement()));return gm(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},WN=(t,e)=>{const n=e.editor;(r=>{const a=Vl(()=>{yc(r)},0);r.on("init",()=>{var s,c;r.inline&&((s,i)=>{const l=()=>{i.throttle()};qt.DOM.bind(document,"mouseup",l),s.on("remove",()=>{qt.DOM.unbind(document,"mouseup",l)})})(r,a),c=a,(s=r).on("mouseup touchend",d=>{c.throttle()}),s.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>"nodechange"===c.type&&c.selectionChange)(l)||yc(s)})}),r.on("remove",()=>{a.cancel()})})(n);const o=(r,a)=>{Qk(r)&&!0!==r.inline&&a(R(r.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const r=t.focusedEditor;bm(vm(n))&&o(n,Ha),r!==n&&(r&&r.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0))}),n.on("focusout",()=>{Nn.setEditorTimeout(n,()=>{const r=t.focusedEditor;bm(vm(n))&&r===n||o(n,Qs),Cc(n,vm(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),ms||(ms=r=>{const a=t.activeEditor;a&&lp(r).each(s=>{s.ownerDocument===document&&(s===document.body||Cc(a,s)||t.focusedEditor!==a||(a.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},hm.bind(document,"focusin",ms))},VN=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&ms&&(hm.unbind(document,"focusin",ms),ms=null)},W0=(t,e)=>{var n,o,r;(n=R(t.getBody()),o=e,(r=o,r.collapsed?C.from(gr(r.startContainer,r.startOffset)).map(R):C.none()).bind(r=>_S(r)?C.some(r):Gn(n,r)?C.none():C.some(n))).bind(n=>Ve(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},wc=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},fs=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(o=R(n),U0(o)||(r=o,gm(lr(r)).filter(a=>r.dom.contains(a.dom))).isSome());var o,r})(t):q((e=t).iframeElement)&&U0(R(e.iframeElement));var e},V0=t=>fs(t)||(e=>{const n=lr(R(e.getElement()));return gm(n).filter(o=>!bm(o.dom)&&Cc(e,o.dom)).isSome()})(t),ym=t=>t.editorManager.setActive(t),q0=(t,e)=>e.collapsed?t.isEditable(e.startContainer):t.isEditable(e.startContainer)&&t.isEditable(e.endContainer),K0=(t,e,n,o,r)=>{const s=n?e.startOffset:e.endOffset;return C.from(n?e.startContainer:e.endContainer).map(R).map(i=>o&&e.collapsed?i:$a(i,r(i,s)).getOr(i)).bind(i=>Ge(i)?C.some(i):Xn(i).filter(Ge)).map(i=>i.dom).getOr(t)},Y0=(t,e,n=!1)=>K0(t,e,!0,n,(o,r)=>Math.min(Md(o),r)),G0=(t,e,n=!1)=>K0(t,e,!1,n,(o,r)=>r>0?r-1:r),X0=(t,e)=>{const n=t;for(;t&&$(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Cm=(t,e)=>At(e,n=>{const o=t.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),qN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Ec=(t,e,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(t[o])return t[o];if(t!==e){let a=t[r];if(a)return a;for(let s=t.parent;s&&s!==e;s=s.parent)if(a=s[r],a)return a}},KN=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!Ya(n))return!1;const o=t.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},Z0=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class Ze{static create(e,n){const o=new Ze(e,qN[e]||1);return n&&Ft(n,(r,a)=>{o.attr(a,r)}),o}constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const o=this;if(!at(e))return q(e)&&Ft(e,(a,s)=>{o.attr(s,a)}),o;const r=o.attributes;if(r){if(void 0!==n){if(null===n){if(e in r.map){delete r.map[e];let a=r.length;for(;a--;)if(r[a].name===e)return r.splice(a,1),o}return o}if(e in r.map){let a=r.length;for(;a--;)if(r[a].name===e){r[a].value=n;break}}else r.push({name:e,value:n});return r.map[e]=n,o}return r.map[e]}}clone(){const e=this,n=new Ze(e.name,e.type),o=e.attributes;if(o){const r=[];r.map={};for(let a=0,s=o.length;a<s;a++){const i=o[a];"id"!==i.name&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const o=n.next;e.insert(n,e,!0),n=o}e.remove()}remove(){const e=this,n=e.parent,o=e.next,r=e.prev;return n&&(n.firstChild===e?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===e?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const o=n.lastChild;return o?(o.next=e,e.prev=o,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,o){e.parent&&e.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===r.lastChild?r.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=r,e}getAll(e){const n=this,o=[];for(let r=n.firstChild;r;r=Ec(r,n))r.name===e&&o.push(r);return o}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let r=e.firstChild;r;r=Ec(r,e))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},o){var r;const a=this;let s=a.firstChild;if(Z0(a))return!1;if(s)do{if(1===s.type){if(s.attr("data-mce-bogus"))continue;if(e[s.name]||Z0(s))return!1}if(8===s.type||3===s.type&&!KN(s)||3===s.type&&s.parent&&n[s.parent.name]&&Ya(null!==(r=s.value)&&void 0!==r?r:"")||o&&o(s))return!1}while(s=Ec(s,a));return!0}walk(e){return Ec(this,null,e)}}const YN=W.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),Q0=t=>at(t.nodeValue)&&t.nodeValue.includes(Re),J0=t=>(0===t.length?"":`${At(t,e=>`[${e}]`).join(",")},`)+'[data-mce-bogus="all"]',tv=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,e=>Q0(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),ev=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,e=>{if(Q0(e)){const n=e.parentNode;return n&&bt(YN,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),GN=t=>null!==tv(t).nextNode(),XN=t=>null!==ev(t).nextNode(),ZN=(t,e)=>null!==e.querySelector(J0(t)),QN=(t,e)=>{z(e.querySelectorAll(J0(t)),n=>{const o=R(n);"all"===St(o,"data-mce-bogus")?Jt(o):z(t,r=>{cn(o,r)&&ne(o,r)})})},nv=t=>{let e=t.nextNode();for(;null!==e;)e.nodeValue=null,e=t.nextNode()},JN=de(nv,tv),tA=de(nv,ev),ov=(t,e)=>{const n=[{condition:et(ZN,e),action:et(QN,e)},{condition:GN,action:JN},{condition:XN,action:tA}];let o=t,r=!1;return z(n,({condition:a,action:s})=>{a(o)&&(r||(o=t.cloneNode(!0),r=!0),s(o))}),o},rv=t=>{const e=tn(t,"[data-mce-bogus]");z(e,n=>{"all"===St(n,"data-mce-bogus")?Jt(n):na(n)?(dn(n,ja("\ufeff")),Jt(n)):cr(n)})},av=t=>{const e=tn(t,"input");z(e,n=>{ne(n,"name")})},sv=W.makeMap,iv=t=>{const e=[],n=(t=t||{}).indent,o=sv(t.indent_before||""),r=sv(t.indent_after||""),a=Zr.getEncodeFunc(t.entity_encoding||"raw",t.entities),s="xhtml"!==t.element_format;return{start:(i,l,c)=>{if(n&&o[i]&&e.length>0){const d=e[e.length-1];d.length>0&&"\n"!==d&&e.push("\n")}if(e.push("<",i),l)for(let d=0,u=l.length;d<u;d++){const m=l[d];e.push(" ",m.name,'="',a(m.value,!0),'"')}if(e[e.length]=!c||s?">":" />",c&&n&&r[i]&&e.length>0){const d=e[e.length-1];d.length>0&&"\n"!==d&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&r[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:a(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",a(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},vr=(t={},e=ur())=>{const n=iv(t);return t.validate=!("validate"in t)||t.validate,{serialize:o=>{const r=t.validate,a={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{s(l)}while(l=l.next)}};n.reset();const s=i=>{var l;const c=a[i.type];if(c)c(i);else{const d=i.name,u=d in e.getVoidElements();let m=i.attributes;if(r&&m&&m.length>1){const p=[];p.map={};const f=e.getElementRule(i.name);if(f){for(let h=0,g=f.attributesOrder.length;h<g;h++){const b=f.attributesOrder[h];if(b in m.map){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}for(let h=0,g=m.length;h<g;h++){const b=m[h].name;if(!(b in p.map)){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}m=p}}if(n.start(d,m,u),Yr(d))at(i.value)&&n.text(i.value,!0),n.end(d);else if(!u){let p=i.firstChild;if(p){"pre"!==d&&"textarea"!==d||3!==p.type||"\n"!==(null===(l=p.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{s(p)}while(p=p.next)}n.end(d)}}};return 1!==o.type||t.inner?3===o.type?a[3](o):a[11](o):s(o),n.getContent()}}},lv=new Set;z(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{lv.add(t)});const cv=new Set;z(["background-color"],t=>{cv.add(t)});const dv=["font","text-decoration","text-emphasis"],gs=(t,e)=>{return Pe((n=t).parseStyle(n.getAttrib(e,"style")));var n},uv=(t,e)=>ee(gs(t,e),n=>lv.has(n)),mv=(t,e,n)=>C.from(n.container()).filter($).exists(o=>{const r=t?0:-1;return e(o.data.charAt(n.offset()+r))}),wm=et(mv,!0,la),Em=et(mv,!1,la),nA=t=>{const e=t.container();return $(e)&&(0===e.data.length||Kl(e.data)&&Li.isBookmarkNode(e.parentNode))},yr=(t,e)=>n=>Fu(t?0:-1,n).filter(e).isSome(),fv=t=>Np(t)&&"block"===io(R(t),"display"),gv=t=>{return Xt(t)&&!(ot(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},oA=yr(!0,fv),rA=yr(!1,fv),Ii=yr(!0,co),Fi=yr(!1,co),pv=yr(!0,lo),_m=yr(!1,lo),Cr=yr(!0,gv),wr=yr(!1,gv),hv=(t,e)=>{return r=Gt,Gn(o=e,n=t)?ap(n,a=>r(a)||Mt(a,o)).slice(0,-1):[];var n,o,r},Ho=(t,e)=>[t].concat(hv(t,e)),xm=(t,e,n)=>Fb(t,e,n,nA),bv=(t,e,n)=>fe(Ho(R(e.container()),t),(o=>r=>o.isBlock(Nt(r)))(n)),vv=(t,e,n,o)=>xm(t,e.dom,n).forall(r=>bv(e,n,o).fold(()=>!mo(r,n,e.dom),a=>!mo(r,n,e.dom)&&Gn(a,R(r.container())))),yv=(t,e,n,o)=>bv(e,n,o).fold(()=>xm(t,e.dom,n).forall(r=>!mo(r,n,e.dom)),r=>xm(t,r.dom,n).isNone()),Sm=et(yv,!1),Cv=et(yv,!0),aA=et(vv,!1),sA=et(vv,!0),iA=t=>rc(t).exists(na),_c=(t,e,n,o)=>{const r=gt(Ho(R(n.container()),e),s=>o.isBlock(Nt(s))),a=It(r).getOr(e);return _n(t,a.dom,n).filter(iA)},km=(t,e,n)=>rc(e).exists(na)||_c(!0,t,e,n).isSome(),xc=(t,e,n)=>{return(o=e,C.from(o.getNode(!0)).map(R)).exists(na)||_c(!1,t,e,n).isSome();var o},wv=et(_c,!1),lA=et(_c,!0),Ev=t=>F.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),_v=(t,e,n)=>{const o=gt(Ho(R(e.container()),t),r=>n.isBlock(Nt(r)));return It(o).getOr(t)},xv=(t,e,n)=>Ev(e)?Em(e):Em(e)||un(_v(t,e,n).dom,e).exists(Em),Sv=(t,e,n)=>Ev(e)?wm(e):wm(e)||nn(_v(t,e,n).dom,e).exists(wm),Nm=t=>rc(t).bind(e=>$r(e,Ge)).exists(e=>{return n=io(e,"white-space"),Bt(["pre","pre-wrap"],n);var n}),kv=(t,e)=>n=>{return o=new Ne(n,t)[e](),q(o)&&Xt(o)&&Sb(o);var o},Nv=(t,e,n)=>{return!Nm(e)&&(a=n,un((o=t).dom,r=e).isNone()||nn(o.dom,r).isNone()||Sm(o,r,a)||Cv(o,r,a)||xc(o,r,a)||km(o,r,a)||xv(t,e,n)||Sv(t,e,n));var o,r,a},Ui=(t,e,n)=>!Nm(e)&&(Sm(t,e,n)||aA(t,e,n)||xc(t,e,n)||xv(t,e,n)||((o,r)=>{const a=un(o.dom,r).getOr(r),s=kv(o.dom,"prev");return r.isAtStart()&&(s(r.container())||s(a.container()))})(t,e)),zi=(t,e,n)=>!Nm(e)&&(Cv(t,e,n)||sA(t,e,n)||km(t,e,n)||Sv(t,e,n)||((o,r)=>{const a=nn(o.dom,r).getOr(r),s=kv(o.dom,"next");return r.isAtEnd()&&(s(r.container())||s(a.container()))})(t,e)),Am=(t,e,n)=>Ui(t,e,n)||zi(t,(o=>{const r=o.container(),a=o.offset();return $(r)&&a<r.data.length?F(r,a+1):o})(e),n),Av=(t,e)=>lc(t.charAt(e)),Rv=(t,e)=>la(t.charAt(e)),Tv=(t,e,n,o)=>{const r=e.data,a=F(e,0);return n||!Av(r,0)||Am(t,a,o)?!!(n&&Rv(r,0)&&Ui(t,a,o))&&(e.data=ye+r.slice(1),!0):(e.data=" "+r.slice(1),!0)},Ov=(t,e,n,o)=>{const r=e.data,a=F(e,r.length-1);return n||!Av(r,r.length-1)||Am(t,a,o)?!!(n&&Rv(r,r.length-1)&&zi(t,a,o))&&(e.data=r.slice(0,-1)+ye,!0):(e.data=r.slice(0,-1)+" ",!0)},Bv=(t,e,n,o)=>{if(0===n)return;const r=R(t),a=Lo(r,c=>o.isBlock(Nt(c))).getOr(r),s=t.data.slice(e,e+n),i=e+n>=t.data.length&&zi(a,F(t,t.data.length),o),l=0===e&&Ui(a,F(t,0),o);t.replaceData(e,n,Sp(s,4,l,i))},Sc=(t,e,n)=>{const o=t.data.slice(e),r=o.length-he(o).length;Bv(t,e,r,n)},Rm=(t,e,n)=>{const o=t.data.slice(0,e),r=o.length-Jo(o).length;Bv(t,e-r,r,n)},Tm=(t,e,n,o,r=!0)=>{const a=Jo(t.data).length,s=r?t:e,i=r?e:t;return r?s.appendData(i.data):s.insertData(0,i.data),Jt(R(i)),o&&Sc(s,a,n),s},dA=(t,e)=>((n,o)=>{const r=n.container(),a=n.offset();return!F.isTextPosition(n)&&r===o.parentNode&&a>F.before(o).offset()})(e,t)?F(e.container(),e.offset()-1):e,Dv=t=>{return to(t.previousSibling)?C.some($(e=t.previousSibling)?F(e,e.data.length):F.after(e)):t.previousSibling?zn(t.previousSibling):C.none();var e},Lv=t=>{return to(t.nextSibling)?C.some($(e=t.nextSibling)?F(e,0):F.before(e)):t.nextSibling?Ve(t.nextSibling):C.none();var e},Pv=(t,e,n)=>{n.fold(()=>{t.focus()},o=>{t.selection.setRng(o.toRange(),e)})},mA=(t,e)=>e&&bt(t.schema.getBlockElements(),Nt(e)),ma=(t,e,n,o=!0,r=!1)=>{const a=((t,e,n)=>{return(o=t,r=e,a=n,o?(s=r,Lv(i=a).orThunk(()=>Dv(i)).orThunk(()=>{return nn(l=s,F.after(c=i)).orThunk(()=>un(l,F.before(c)));var l,c})):((s,i)=>Dv(i).orThunk(()=>Lv(i)).orThunk(()=>{return l=s,C.from((c=i).previousSibling?c.previousSibling:c.parentNode).bind(d=>un(l,F.before(d))).orThunk(()=>nn(l,F.after(c)));var l,c}))(r,a)).map(et(dA,n));var o,r,a,s,i})(e,t.getBody(),n.dom),s=Lo(n,et(mA,t),(i=t.getBody(),c=>c.dom===i));var i;const l=((c,d,u,m)=>{const p=ir(c).filter(Me),f=ei(c).filter(Me);return Jt(c),(h=p,g=f,b=d,v=(y,E,w)=>{const _=y.dom,k=E.dom,S=_.data.length;return Tm(_,k,u,m),w.container()===k?F(_,S):w},h.isSome()&&g.isSome()&&b.isSome()?C.some(v(h.getOrDie(),g.getOrDie(),b.getOrDie())):C.none()).orThunk(()=>(m&&(p.each(y=>Rm(y.dom,y.dom.length,u)),f.each(y=>Sc(y.dom,0,u))),d));var h,g,b,v})(n,a,t.schema,(d=n,bt(t.schema.getTextInlineElements(),Nt(d))));var d;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(c=>((d,u,m)=>{if($e(d,u)){const p=Tl('<br data-mce-bogus="1">');return m?z(je(u),f=>{rm(f)||Jt(f)}):qa(u),be(u,p),C.some(F.before(p.dom))}return C.none()})(t.schema,c,r)).fold(()=>{o&&Pv(t,e,l)},c=>{o&&Pv(t,e,C.some(c))})},fA=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,fa=(t,e)=>Yn(R(e),lk(t))&&!Gr(t.schema,e)&&t.dom.isEditable(e),Mv=t=>{var e,n;return"rtl"===qt.DOM.getStyle(t,"direction",!0)||(n=null!==(e=t.textContent)&&void 0!==e?e:"",fA.test(n))},Er=(t,e,n)=>{const o=(r=t,a=e,gt(qt.DOM.getParents(n.container(),"*",a),r));var r,a;return C.from(o[o.length-1])},An=(t,e)=>{const n=e.container(),o=e.offset();return t?fr(n)?$(n.nextSibling)?F(n.nextSibling,0):F.after(n):yu(e)?F(n,o+1):e:fr(n)?$(n.previousSibling)?F(n.previousSibling,n.previousSibling.data.length):F.before(n):Cu(e)?F(n,o-1):e},Iv=et(An,!0),Fv=et(An,!1),Uv=(t,e)=>{const n=o=>o.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},kc=t=>Uv(t,"Delete"),zv=t=>Uv(t,"ForwardDelete"),gA=t=>vh(t)||Qa(t),Nc=(t,e)=>Gn(t,e)?$r(e,gA,(n=>o=>so(Xn(o),n,Mt))(t)):C.none(),Om=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},Hv=(t,e,n)=>Se(Ve(n),zn(n),(o,r)=>{const a=An(!0,o),s=An(!1,r),i=An(!1,e);return t?nn(n,i).exists(l=>l.isEqual(s)&&e.isEqual(a)):un(n,i).exists(l=>l.isEqual(a)&&e.isEqual(s))}).getOr(!0),jv=t=>{var e;return(8===Fn(e=t)||"#comment"===Nt(e)?ir(t):Pd(t)).bind(jv).orThunk(()=>C.some(t))},$v=(t,e,n,o=!0)=>{var r;e.deleteContents();const a=jv(n).getOr(n),s=R(null!==(r=t.dom.getParent(a.dom,t.dom.isBlock))&&void 0!==r?r:n.dom);if(s.dom===t.getBody()?Om(t,o):$e(t.schema,s,{checkRootAsContent:!1})&&(mr(s),o&&t.selection.setCursorLocation(s.dom,0)),!Mt(n,s)){const l=so(Xn(s),n)?[]:Xn(i=s).map(je).map(c=>gt(c,d=>!Mt(i,d))).getOr([]);z(l.concat(je(n)),c=>{Mt(c,s)||Gn(c,s)||!$e(t.schema,c)||Jt(c)})}var i},Bm=t=>tn(t,"td,th"),Wv=(t,e)=>Oi(R(t),e),Dm=(t,e)=>({start:t,end:e}),Hi=uo([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Ac=(t,e)=>Va(R(t),"td,th",e),Vv=t=>!Mt(t.start,t.end),qv=(t,e)=>Oi(t.start,e).bind(n=>Oi(t.end,e).bind(o=>Ye(Mt(n,o),n))),Lm=t=>e=>qv(e,t).map(n=>((o,r,a)=>({rng:o,table:r,cells:a}))(e,n,Bm(n))),Kv=(t,e,n,o)=>{if(n.collapsed||!t.forall(Vv))return C.none();if(e.isSameTable){const r=t.bind(Lm(o));return C.some({start:r,end:r})}{const r=Ac(n.startContainer,o),a=Ac(n.endContainer,o),s=r.bind((l=>c=>Oi(c,l).bind(d=>pe(Bm(d)).map(u=>Dm(c,u))))(o)).bind(Lm(o)),i=a.bind((l=>c=>Oi(c,l).bind(d=>It(Bm(d)).map(u=>Dm(u,c))))(o)).bind(Lm(o));return C.some({start:s,end:i})}},Yv=(t,e)=>Or(t,n=>Mt(n,e)),Pm=t=>Se(Yv(t.cells,t.rng.start),Yv(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),Gv=(t,e)=>{const{startTable:n,endTable:o}=e,r=t.cloneRange();return n.each(a=>r.setStartAfter(a.dom)),o.each(a=>r.setEndBefore(a.dom)),r},Xv=t=>z(t,e=>{ne(e,"contenteditable"),mr(e)}),Mm=(t,e,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(e.dom.lastChild)):(r.setStartBefore(e.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),Im(t,r,e,!1).each(a=>a())},Zv=t=>{const e=ls(t),n=R(t.selection.getNode());Ul(n.dom)&&$e(t.schema,n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&ee(e,o=>Mt(o,n))&&Et(n,"data-mce-selected","1")},Qv=(t,e,n)=>C.some(()=>{const o=t.selection.getRng(),r=n.bind(({rng:a,isStartInTable:s})=>{const i=C.from((c=t).dom.getParent(s?a.endContainer:a.startContainer,c.dom.isBlock)).map(R);var c;a.deleteContents(),((c,d,u)=>{u.each(m=>{d?Jt(m):(mr(m),c.selection.setCursorLocation(m.dom,0))})})(t,s,i.filter(et($e,t.schema)));const l=s?e[0]:e[e.length-1];return Mm(t,l,o,s),$e(t.schema,l)?C.none():C.some(s?e.slice(1):e.slice(0,-1))}).getOr(e);Xv(r),Zv(t)}),hA=(t,e,n,o)=>C.some(()=>{const r=t.selection.getRng(),a=e[0],s=n[n.length-1];Mm(t,a,r,!0),Mm(t,s,r,!1);const i=$e(t.schema,a)?e:e.slice(1),l=$e(t.schema,s)?n:n.slice(0,-1);Xv(i.concat(l)),o.deleteContents(),Zv(t)}),Im=(t,e,n,o=!0)=>C.some(()=>{$v(t,e,n,o)}),bA=(t,e)=>C.some(()=>ma(t,!1,e)),Jv=(t,e)=>fe(Ho(e,t),vi),Fm=(t,e)=>fe(Ho(e,t),pt("caption")),Rc=(t,e)=>C.some(()=>{mr(e),t.selection.setCursorLocation(e.dom,0)}),ty=(t,e)=>t?pv(e):_m(e),Um=(t,e)=>{const n=R(t.selection.getStart(!0)),o=ls(t);return t.selection.isCollapsed()&&0===o.length?((t,e,n)=>{const o=R(t.getBody());return Fm(o,n).fold(()=>((r,a,s,i)=>{const l=F.fromRangeStart(r.selection.getRng());return Jv(s,i).bind(c=>{return $e(r.schema,c,{checkRootAsContent:!1})?Rc(r,c):(u=s,p=c,f=l,ss(a,r.getBody(),f).bind(h=>Jv(u,R(h.getNode())).bind(g=>Mt(g,p)?C.none():C.some(Ct))));var u,p,f})})(t,e,o,n).orThunk(()=>Ye(((r,a)=>{const s=F.fromRangeStart(r.selection.getRng());return ty(a,s)||_n(a,r.getBody(),s).exists(i=>ty(a,i))})(t,e),Ct)),r=>((a,s,i,l)=>{const c=F.fromRangeStart(a.selection.getRng());return $e(a.schema,l)?Rc(a,l):(u=i,p=l,f=c,ss(m=s,(d=a).getBody(),f).fold(()=>C.some(Ct),h=>{return b=m,v=f,y=h,Ve((g=p).dom).bind(E=>zn(g.dom).map(w=>b?v.isEqual(E)&&y.isEqual(w):v.isEqual(w)&&y.isEqual(E))).getOr(!0)?((g,b)=>Rc(g,b))(d,p):((g,b,v)=>Fm(g,R(v.getNode())).fold(()=>C.some(Ct),y=>Ye(!Mt(y,b),Ct)))(u,p,h);var g,b,v,y}));var d,u,m,p,f})(t,e,o,r))})(t,e,n):((r,a,s)=>{const i=R(r.getBody()),l=r.selection.getRng();return 0!==s.length?Qv(r,s,C.none()):(c=r,u=l,Fm(d=i,a).fold(()=>{return p=c,((t,e)=>{const n=(a=>s=>Mt(a,s))(t),o=((a,s)=>{const i=Ac(a.startContainer,s),l=Ac(a.endContainer,s);return Se(i,l,Dm)})(e,n),r=((a,s)=>{const i=Wv(a.startContainer,s),l=Wv(a.endContainer,s),c=i.isSome(),d=l.isSome(),u=Se(i,l,Mt).getOr(!1);return Se((m={startTable:i,endTable:l,isStartInTable:c,isEndInTable:d,isSameTable:u,isMultiTable:!u&&c&&d}).startTable,m.endTable,(p,f)=>{const h=_p(p,b=>Mt(b,f)),g=_p(f,b=>Mt(b,p));return h||g?{...m,startTable:h?C.none():m.startTable,endTable:g?C.none():m.endTable,isSameTable:!1,isMultiTable:!1}:m}).getOr(m);var m})(e,n);return s=e,i=n,o.exists(l=>{return d=i,!Vv(c=l)&&qv(c,d).exists(u=>{const m=u.dom.rows;return 1===m.length&&1===m[0].cells.length})&&Yu(l.start,s);var c,d})?o.map(a=>Hi.singleCellTable(e,a.start)):r.isMultiTable?((a,s,i,l)=>Kv(a,s,i,l).bind(({start:c,end:d})=>{const u=c.bind(Pm).getOr([]),m=d.bind(Pm).getOr([]);if(u.length>0&&m.length>0){const p=Gv(i,s);return C.some(Hi.multiTable(u,m,p))}return C.none()}))(o,r,e,n):((a,s,i,l)=>Kv(a,s,i,l).bind(({start:c,end:d})=>c.or(d)).bind(c=>{const{isSameTable:d}=s,u=Pm(c).getOr([]);if(d&&c.cells.length===u.length)return C.some(Hi.fullTable(c.table));if(u.length>0){if(d)return C.some(Hi.partialTable(u,C.none()));{const m=Gv(i,s);return C.some(Hi.partialTable(u,C.some({...s,rng:m})))}}return C.none()}))(o,r,e,n);var s,i})(d,u).bind(g=>g.fold(et(Im,p),et(bA,p),et(Qv,p),et(hA,p)));var p},p=>Rc(c,p)));var c,d,u})(t,n,o)},ga=(t,e)=>{let n=e;for(;n&&n!==t;){if(Un(n)||Xt(n))return n;n=n.parentNode}return null},yA=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],CA=W.each,zm=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),o=r=>ee(yA,a=>Dt(r,a))||n.has(r);return{compare:(r,a)=>{if(r.nodeName!==a.nodeName||r.nodeType!==a.nodeType)return!1;const s=l=>{const c={};return CA(e.getAttribs(l),d=>{const u=d.nodeName.toLowerCase();"style"===u||o(u)||(c[u]=e.getAttrib(l,u))}),c},i=(l,c)=>{for(const d in l)if(bt(l,d)){const u=c[d];if(ce(u)||l[d]!==u)return!1;delete c[d]}for(const d in c)if(bt(c,d))return!1;return!0};return!(ot(r)&&ot(a)&&(!i(s(r),s(a))||!i(e.parseStyle(e.getAttrib(r,"style")),e.parseStyle(e.getAttrib(a,"style"))))||Sn(r)||Sn(a))},isAttributeInternal:o}},ey=t=>["h1","h2","h3","h4","h5","h6"].includes(t.name),ny=(t,e,n,o)=>{const r=n.name;for(let a=0,s=t.length;a<s;a++){const i=t[a];if(i.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:i,nodes:[n]}}}if(n.attributes)for(let a=0,s=e.length;a<s;a++){const i=e[a],l=i.name;if(l in n.attributes.map){const c=o.attributes[l];c?c.nodes.push(n):o.attributes[l]={filter:i,nodes:[n]}}}},oy=(t,e)=>{const n=(o,r)=>{Ft(o,a=>{const s=Oe(a.nodes);z(a.filter.callbacks,i=>{for(let l=s.length-1;l>=0;l--){const c=s[l];(r?void 0!==c.attr(a.filter.name):c.name===a.filter.name)&&!ue(c.parent)||s.splice(l,1)}s.length>0&&i(s,a.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},ry=(t,e,n,o={})=>{const r=((a,s,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&(c=>{let u=c;for(;u=u.walk();)ny(a,s,u,l)})(i),l})(t,e,n);oy(r,o)},Hm=(t,e,n,o)=>{if((t.pad_empty_with_br||e.insert)&&n(o)){const r=new Ze("br",1);e.insert&&r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new Ze("#text",3)).value=ye},ay=(t,e)=>{const n=t?.firstChild;return q(n)&&n===t.lastChild&&n.name===e},ji=(t,e,n,o)=>o.isEmpty(e,n,r=>((a,s)=>{const i=a.getElementRule(s.name);return!0===i?.paddEmpty})(t,r)),wA=t=>{let e;for(let n=t;n;n=n.parent){const o=n.attr("contenteditable");if("false"===o)break;"true"===o&&(e=n)}return C.from(e)},jm=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const o=t.children();for(const r of o)n&&!e.isValidChild(n.name,r.name)&&jm(r,e,n);t.unwrap()}},$m=(t,e,n,o=Ct)=>{const r=e.getTextBlockElements(),a=e.getNonEmptyElements(),s=e.getWhitespaceElements(),i=W.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=d=>d!==n&&!i[d.name];for(let d=0;d<t.length;d++){const u=t[d];let m,p,f;if(!u.parent||l.has(u))continue;if(r[u.name]&&"li"===u.parent.name){let g=u.next;for(;g&&r[g.name];)g.name="li",l.add(g),u.parent.insert(g,u.parent),g=g.next;u.unwrap();continue}const h=[u];for(m=u.parent;m&&!e.isValidChild(m.name,u.name)&&c(m);m=m.parent)h.push(m);if(m&&h.length>1)if(Wm(e,u,m))jm(u,e);else{h.reverse(),p=h[0].clone(),o(p);let g=p;for(let b=0;b<h.length-1;b++){e.isValidChild(g.name,h[b].name)&&b>0?(f=h[b].clone(),o(f),g.append(f)):f=g;for(let v=h[b].firstChild;v&&v!==h[b+1];){const y=v.next;f.append(v),v=y}g=f}ji(e,a,s,p)?m.insert(u,h[0],!0):(m.insert(p,h[0],!0),m.insert(u,p)),m=h[0],(ji(e,a,s,m)||ay(m,"br"))&&m.empty().remove()}else if(u.parent){if("li"===u.name){let g=u.prev;if(g&&("ul"===g.name||"ol"===g.name)){g.append(u);continue}if(g=u.next,g&&("ul"===g.name||"ol"===g.name)&&g.firstChild){g.insert(u,g.firstChild,!0);continue}const b=new Ze("ul",1);o(b),u.wrap(b);continue}if(e.isValidChild(u.parent.name,"div")&&e.isValidChild("div",u.name)){const g=new Ze("div",1);o(g),u.wrap(g)}else jm(u,e)}}},Wm=(t,e,n=e.parent)=>{return!(!n||(!t.children[e.name]||t.isValidChild(n.name,e.name))&&("a"!==e.name||!(o=>{let a=o;for(;a;){if("a"===a.name)return!0;a=a.parent}return!1})(n))&&(o=n,"summary"!==o.name||!ey(e)||n?.firstChild===e&&n?.lastChild===e));var o},Vm=t=>t.collapsed?t:(e=>{const n=F.fromRangeStart(e),o=F.fromRangeEnd(e),r=e.commonAncestorContainer;return _n(!1,r,o).map(a=>!mo(n,o,r)&&mo(n,a,r)?((s,i,l,c)=>{const d=document.createRange();return d.setStart(s,i),d.setEnd(l,c),d})(n.container(),n.offset(),a.container(),a.offset()):e).getOr(e)})(t),qm=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},sy=(t,e)=>{const n=F.after(t),o=go(e).prev(n);return o?o.toRange():null},SA=["pre"],Km=Ul,kA=(t,e,n)=>{var o,r;const a=t.selection,s=t.dom,i=t.parser,l=n.merge,c=vr({validate:!0},t.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(e=vn(e)),-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,d);let u=a.getRng();const m=u.startContainer,p=t.getBody();var y,E;m===p&&a.isCollapsed()&&s.isBlock(p.firstChild)&&(y=t,q(E=p.firstChild)&&!y.schema.getVoidElements()[E.nodeName])&&s.isEmpty(p.firstChild)&&(u=s.createRng(),u.setStart(p.firstChild,0),u.setEnd(p.firstChild,0),a.setRng(u)),a.isCollapsed()||(y=>{const E=y.dom,w=Vm(y.selection.getRng());y.selection.setRng(w);const _=E.getParent(w.startContainer,Km);var k,S,O;k=E,S=w,q(O=_)&&O===k.getParent(S.endContainer,Km)&&Yu(R(O),S)?Im(y,w,R(_)):w.startContainer===w.endContainer&&w.endOffset-w.startOffset==1&&$(w.startContainer.childNodes[w.startOffset])?w.deleteContents():y.getDoc().execCommand("Delete",!1)})(t);const f=a.getNode(),h={context:f.nodeName.toLowerCase(),data:n.data,insert:!0},g=i.parse(e,h);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,o=e.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((r,a)=>{const s=r.getNonEmptyElements();return q(a)&&(a.isEmpty(s)||(l=a,r.getBlockElements()[l.name]&&q((c=l).firstChild)&&c.firstChild===c.lastChild&&(c=>"br"===c.name||c.value===ye)(l.firstChild)));var l,c})(t,o)&&(o=o?.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)})(t.schema,g)&&((y,E)=>!!qm(y,E))(s,f))return u=((t,e,n,o)=>{const r=((u,m,p)=>{const f=m.serialize(p);return(h=>{var g,b;const v=h.firstChild,y=h.lastChild;return v&&"META"===v.nodeName&&(null===(g=v.parentNode)||void 0===g||g.removeChild(v)),y&&"mce_marker"===y.id&&(null===(b=y.parentNode)||void 0===b||b.removeChild(y)),h})(u.createFragment(f))})(e,t,o),a=qm(e,n.startContainer),s=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||q(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((o=e.firstChild).data===ye||ae(o)))?t.slice(0,-1):t;var o,e,n})((i=r.firstChild,gt(null!==(l=i?.childNodes)&&void 0!==l?l:[],u=>"LI"===u.nodeName)));var i,l;const c=e.getRoot(),d=u=>{const m=F.fromRangeStart(n),p=go(e.getRoot()),f=1===u?p.prev(m):p.next(m),h=f?.getNode();return!h||qm(e,h)!==a};return a?d(1)?((u,m,p)=>{const f=u.parentNode;return f&&W.each(m,h=>{f.insertBefore(h,u)}),((h,g)=>{const b=F.before(h),v=go(g).next(b);return v?v.toRange():null})(u,p)})(a,s,c):d(2)?(u=a,p=c,e.insertAfter((m=s).reverse(),u),sy(m[0],p)):((u,m,p,f)=>{const h=((b,v)=>{const y=v.cloneRange(),E=v.cloneRange();return y.setStartBefore(b),E.setEndAfter(b),[y.cloneContents(),E.cloneContents()]})(u,f),g=u.parentNode;return g&&(g.insertBefore(h[0],u),W.each(m,b=>{g.insertBefore(b,u)}),g.insertBefore(h[1],u),g.removeChild(u)),sy(m[m.length-1],p)})(a,s,c,n):null;var u,m,p})(c,s,a.getRng(),g),u&&a.setRng(u),e;!0===n.paste&&((y,E,w,_)=>{var k;const S=E.firstChild,O=E.lastChild,P=S===("bookmark"===O.attr("data-mce-type")?O.prev:O),x=Bt(SA,S.name);if(P&&x){const N="false"!==S.attr("contenteditable"),T=(null===(k=y.getParent(w,y.isBlock))||void 0===k?void 0:k.nodeName.toLowerCase())===S.name,U=C.from(ga(_,w)).forall(Un);return N&&T&&U}return!1})(s,g,f,t.getBody())&&(null===(o=g.firstChild)||void 0===o||o.unwrap()),(y=>{let E=y;for(;E=E.walk();)1===E.type&&E.attr("data-mce-fragment","1")})(g);let b=g.lastChild;if(b&&"mce_marker"===b.attr("id")){const y=b;for(b=b.prev;b&&"table"!==b.name;b=b.walk(!0))if(3===b.type||!s.isBlock(b.name)){b.parent&&t.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(y,b,"br"===b.name);break}}if(t._selectionOverrides.showBlockCaretContainer(f),h.invalid||((y,E,w)=>{var _;return ee(w.children(),ey)&&"SUMMARY"===(null===(_=y.getParent(E,y.isBlock))||void 0===_?void 0:_.nodeName)})(s,f,g)){t.selection.setContent(d);let y,E=a.getNode();const w=t.getBody();for(si(E)?E=y=w:y=E;y&&y!==w;)E=y,y=y.parentNode;e=E===w?w.innerHTML:s.getOuterHTML(E);const _=i.parse(e),k=(N=>{for(let T=N;T;T=T.walk())if("mce_marker"===T.attr("id"))return C.some(T);return C.none()})(_),S=k.bind(wA).getOr(_);k.each(N=>N.replace(g));const O=g.children(),P=null!==(r=g.parent)&&void 0!==r?r:_;g.unwrap();const x=gt(O,N=>Wm(t.schema,N,P));$m(x,t.schema,S),ry(i.getNodeFilters(),i.getAttributeFilters(),_),e=c.serialize(_),E===w?s.setHTML(w,e):s.setOuterHTML(E,e)}else e=c.serialize(g),((y,E,w)=>{var _;if("all"===w.getAttribute("data-mce-bogus"))null===(_=w.parentNode)||void 0===_||_.insertBefore(y.dom.createFragment(E),w);else{const k=w.firstChild;!k||k===w.lastChild&&"BR"===k.nodeName?y.dom.setHTML(w,E):y.selection.setContent(E,{no_events:!0})}})(t,e,f);var v;return((y,E)=>{const w=y.schema.getTextInlineElements(),_=y.dom;if(E){const k=y.getBody(),S=zm(y),O="*[data-mce-fragment]",P=_.select(O);W.each(P,x=>{const N=j=>q(w[j.nodeName.toLowerCase()]),T=j=>1===j.childNodes.length;if(!uv(_,U=x)&&(!uv(j=_,H=U)||!ee(gs(j,H),tt=>cv.has(tt)))&&N(x)&&T(x)){const j=gs(_,x),H=(lt,Y)=>$n(lt,nt=>Bt(Y,nt)),tt=lt=>T(x)&&_.is(lt,O)&&N(lt)&&(lt.nodeName===x.nodeName&&H(j,gs(_,lt))||tt(lt.children[0])),rt=lt=>q(lt)&&lt!==k&&(S.compare(x,lt)||rt(lt.parentElement)),st=lt=>q(lt)&&lt!==k&&_.is(lt,O)&&(((Y,nt,A)=>{const B=gs(Y,nt),I=gs(Y,A),M=K=>{var V,it;const dt=null!==(V=Y.getStyle(nt,K))&&void 0!==V?V:"",vt=null!==(it=Y.getStyle(A,K))&&void 0!==it?it:"";return hn(dt)&&hn(vt)&&dt!==vt};return ee(B,K=>{const V=it=>ee(it,dt=>dt===K);if(!V(I)&&V(dv)){const it=gt(I,dt=>ee(dv,vt=>Dt(dt,vt)));return ee(it,M)}return M(K)})})(_,x,lt)||st(lt.parentElement));(tt(x.children[0])||rt(x.parentElement)&&!st(x.parentElement))&&_.remove(x,!0)}var j,H,U})}})(t,l),((y,E)=>{var w,_,k;let S;const O=y.dom,P=y.selection;if(!E)return;P.scrollIntoView(E);const x=ga(y.getBody(),E);if(x&&"false"===O.getContentEditable(x))return O.remove(E),void P.select(x);let N=O.createRng();const T=E.previousSibling;if($(T)){N.setStart(T,null!==(_=null===(w=T.nodeValue)||void 0===w?void 0:w.length)&&void 0!==_?_:0);const j=E.nextSibling;$(j)&&(T.appendData(j.data),null===(k=j.parentNode)||void 0===k||k.removeChild(j))}else N.setStartBefore(E),N.setEndBefore(E);const U=O.getParent(E,O.isBlock);if(O.remove(E),U&&O.isEmpty(U)){const j=Km(U);qa(R(U)),N.setStart(U,0),N.setEnd(U,0),j||U.getAttribute("data-mce-fragment")||!(S=(H=>{let tt=F.fromRangeStart(H);return tt=go(y.getBody()).next(tt),tt?.toRange()})(N))?O.add(U,O.create("br",j?{}:{"data-mce-bogus":"1"})):(N=S,O.remove(U))}P.setRng(N)})(t,s.get("mce_marker")),v=t.getBody(),W.each(v.getElementsByTagName("*"),y=>{y.removeAttribute("data-mce-fragment")}),((y,E,w)=>{C.from(y.getParent(E,"td,th")).map(R).each(_=>{return S=w,void Pd(k=_).each(O=>{ir(O).each(P=>{S.isBlock(Nt(k))&&na(O)&&S.isBlock(Nt(P))&&Jt(O)})});var k,S})})(s,a.getStart(),t.schema),((y,E,w)=>{const _=ap(R(w),k=>Mt(k,R(E)));xt(_,_.length-2).filter(Ge).fold(()=>Qd(y,E),k=>Qd(y,k.dom))})(t.schema,t.getBody(),a.getStart()),e},Tc=t=>t instanceof Ze,Ym=(t,e,n)=>{var o;t.dom.setHTML(t.getBody(),e),!0!==n&&fs(o=t)&&Ve(o.getBody()).each(r=>{const a=r.getNode(),s=lo(a)?Ve(a).getOr(r):r;o.selection.setRng(s.toRange())})},iy=t=>kt(t)?t:Gt,Gm=(t,e,n)=>{const o=e(t),r=iy(n);return o.orThunk(()=>r(t)?C.none():((a,s,i)=>{let l=a.dom;const c=iy(i);for(;l.parentNode;){l=l.parentNode;const d=R(l),u=s(d);if(u.isSome())return u;if(c(d))break}return C.none()})(t,e,r))},Xm=tm,ly=(t,e,n)=>{const o=t.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const a=o[r];if(kn(a)&&!1===a.inherit&&t.dom.is(e,a.selector))return!0}return!1},Zm=(t,e,n,o,r)=>{const a=t.dom.getRoot();if(e===a)return!1;const s=t.dom.getParent(e,i=>!!ly(t,i,n)||i.parentNode===a||!!ho(t,i,n,o,!0));return!!ho(t,s,n,o,r)},Oc=(t,e,n)=>!(!Ce(n)||!Xm(e,n.inline))||!(!po(n)||!Xm(e,n.block))||!!kn(n)&&ot(e)&&t.is(e,n.selector),cy=(t,e,n,o,r,a)=>{const s=n[o],i="attributes"===o;if(kt(n.onmatch))return n.onmatch(e,n,o);if(s)if(Qo(s)){for(let l=0;l<s.length;l++)if(i?t.getAttrib(e,s[l]):dc(t,e,s[l]))return!0}else for(const l in s)if(bt(s,l)){const c=i?t.getAttrib(e,l):dc(t,e,l),d=br(s[l],a),u=ue(c)||tr(c);if(u&&ue(d))continue;if(r&&u&&!n.exact||(!r||n.exact)&&!Xm(c,em(d,l)))return!1}return!0},ho=(t,e,n,o,r)=>{const a=t.formatter.get(n),s=t.dom;if(a&&ot(e))for(let i=0;i<a.length;i++){const l=a[i];if(Oc(t.dom,e,l)&&cy(s,e,l,"attributes",r,o)&&cy(s,e,l,"styles",r,o)){const c=l.classes;if(c)for(let d=0;d<c.length;d++)if(!t.dom.hasClass(e,br(c[d],o)))return;return l}}},Qm=(t,e,n,o,r)=>{if(o)return Zm(t,o,e,n,r);if(o=t.selection.getNode(),Zm(t,o,e,n,r))return!0;const a=t.selection.getStart();return!(a===o||!Zm(t,a,e,n,r))},$i=Re,dy=t=>{if(t){const e=new Ne(t,t);for(let n=e.current();n;n=e.next())if($(n))return n}return null},Jm=t=>{const e=ke("span");return Lt(e,{id:$u,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&be(e,ja($i)),e},tf=(t,e,n)=>{const o=t.dom,r=t.selection;if(Jb(e))ma(t,!1,R(e),n,!0);else{const a=r.getRng(),s=o.getParent(e,o.isBlock),i=a.startContainer,l=a.startOffset,c=a.endContainer,d=a.endOffset,u=(m=>{const p=dy(m);return p&&p.data.charAt(0)===$i&&p.deleteData(0,1),p})(e);o.remove(e,!0),i===u&&l>0&&a.setStart(u,l-1),c===u&&d>0&&a.setEnd(u,d-1),s&&o.isEmpty(s)&&mr(R(s)),r.setRng(a)}},ef=(t,e,n)=>{const o=t.dom,r=t.selection;if(e)tf(t,e,n);else if(!(e=ia(t.getBody(),r.getStart())))for(;e=o.get($u);)tf(t,e,n)},uy=(t,e)=>(t.appendChild(e),e),my=(t,e)=>{var n;const o=Zo(t,(a,s)=>uy(a,s.cloneNode(!1)),e),r=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return uy(o,r.createTextNode($i))},fy=t=>bh(t,bi(t).replace(new RegExp(`${ye}$`)," ")),gy=(t,e)=>{const n=()=>{null===e||t.dom.isEmpty(e)||ir(R(e)).each(o=>{Me(o)?fy(o):Ud(o,r=>Me(r)).each(r=>{Me(r)&&fy(r)})})};t.once("input",o=>{o.data&&!la(o.data)&&(o.isComposing?t.once("compositionend",()=>{n()}):n())})},py=t=>{const e=Jm(!1),n=my(t,e.dom);return{caretContainer:e,caretPosition:F(n,0)}},hy=(t,e)=>{const{caretContainer:n,caretPosition:o}=py(e);return dn(R(t),n),Jt(R(t)),o},by=(t,e)=>{if(xn(e.dom))return!1;const n=t.schema.getTextInlineElements();return bt(n,Nt(e))&&!xn(e.dom)&&!Kr(e.dom)},Wi={},vy=Zn(["pre"]);(t=>{Wi[t]||(Wi[t]=[]),Wi[t].push(n=>{if(!n.selection.getRng().collapsed){const o=n.selection.getSelectedBlocks(),r=gt(gt(o,vy),(a=>s=>{const i=s.previousSibling;return vy(i)&&Bt(a,i)})(o));z(r,a=>{((s,i)=>{const l=R(i),c=sr(l).dom;Jt(l),Vr(R(s),[ke("br",c),ke("br",c),...je(l)])})(a.previousSibling,a)})}})})("pre");const yy=["fontWeight","fontStyle","color","fontSize","fontFamily"],Cy=(t,e)=>{const n=t.get(e);return Yt(n)?fe(n,o=>{return Ce(o)&&"span"===o.inline&&le((r=o).styles)&&ee(Pe(r.styles),a=>Bt(yy,a));var r}):C.none()},wy=(t,e)=>un(e,F.fromRangeStart(t)).isNone(),Ey=(t,e)=>!1===nn(e,F.fromRangeEnd(t)).exists(n=>!ae(n.getNode())||nn(e,n).isSome()),_y=t=>e=>Jx(e)&&t.isEditable(e),xy=t=>gt(t.getSelectedBlocks(),_y(t.dom)),nf=W.each,of=t=>ot(t)&&!Sn(t)&&!xn(t)&&!Kr(t),Sy=(t,e)=>{for(let n=t;n;n=n[e]){if($(n)&&hn(n.data))return t;if(ot(n)&&!Sn(n))return n}return t},ky=(t,e,n)=>{const o=zm(t),r=Mo(e)&&t.dom.isEditable(e),a=Mo(n)&&t.dom.isEditable(n);if(r&&a){const s=Sy(e,"previousSibling"),i=Sy(n,"nextSibling");if(o.compare(s,i)){for(let l=s.nextSibling;l&&l!==i;){const c=l;l=l.nextSibling,s.appendChild(c)}return t.dom.remove(i),W.each(W.grep(i.childNodes),l=>{s.appendChild(l)}),s}}return n},Ny=(t,e,n,o)=>{var r;if(o&&!1!==e.merge_siblings){const a=null!==(r=ky(t,Xb(o),o))&&void 0!==r?r:o;ky(t,a,Xb(a,!0))}},rf=(t,e,n)=>{nf(t.childNodes,o=>{of(o)&&(e(o)&&n(o),o.hasChildNodes()&&rf(o,e,n))})},Ay=(t,e)=>n=>!(!n||!dc(t,n,e)),Ry=(t,e,n)=>o=>{var r,a;t.setStyle(o,e,n),""===o.getAttribute("style")&&o.removeAttribute("style"),r=t,"SPAN"===(a=o).nodeName&&0===r.getAttribs(a).length&&r.remove(a,!0)},pa=uo([{keep:[]},{rename:["name"]},{removed:[]}]),AA=/^(src|href|style)$/,af=W.each,Bc=tm,Ty=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),Oy=(t,e,n)=>{let o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(ot(o)){const a=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>a?a:r]}return $(o)&&n&&r>=o.data.length&&(o=new Ne(o,t.getBody()).next()||o),$(o)&&!n&&0===r&&(o=new Ne(o,t.getBody()).prev()||o),o},By=(t,e)=>{const n=e?"firstChild":"lastChild",o=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&o?"TR"===t.nodeName&&o[n]||o:t},sf=(t,e,n,o)=>{var r;const a=t.create(n,o);return null===(r=e.parentNode)||void 0===r||r.insertBefore(a,e),a.appendChild(e),a},Dy=(t,e,n,o,r)=>{const a=R(e),s=R(t.create(o,r)),i=n?ip(a):sp(a);return Vr(s,i),n?(dn(a,s),Hd(s,a)):(Po(a,s),be(s,a)),s.dom},Ly=(t,e,n)=>{const o=e.parentNode;let r;const a=t.dom,s=We(t);var i;po(n)&&o===a.getRoot()&&(n.list_block&&Bc(e,n.list_block)||z(Oe(e.childNodes),i=>{cs(t,s,i.nodeName.toLowerCase())?r?r.appendChild(i):(r=sf(a,i,s),a.setAttribs(r,_i(t))):r=null})),kn(i=n)&&Ce(i)&&so(Kt(i,"mixed"),!0)&&!Bc(n.inline,e)||a.remove(e,!0)},Py=(t,e,n)=>re(t)?{name:e,value:null}:{name:t,value:br(e,n)},My=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},Iy=(t,e,n,o,r)=>{let a=!1;af(n.styles,(s,i)=>{const{name:l,value:c}=Py(i,s,o),d=em(c,l);(n.remove_similar||Ee(c)||!ot(r)||Bc(dc(t,r,l),d))&&t.setStyle(e,l,""),a=!0}),a&&My(t,e)},Fy=(t,e,n,o,r)=>{const a=t.dom,s=zm(t),i=t.schema;if(Ce(e)&&tu(i,e.inline)&&Gr(i,o)&&o.parentElement===t.getBody())return Ly(t,o,e),pa.removed();if(!e.ceFalseOverride&&o&&"false"===a.getContentEditableParent(o)||o&&!Oc(a,o,e)&&(!e.links||"A"!==o.nodeName))return pa.keep();const l=o,c=e.preserve_attributes;if(Ce(e)&&"all"===e.remove&&Yt(c)){const d=gt(a.getAttribs(l),u=>Bt(c,u.name.toLowerCase()));if(a.removeAllAttribs(l),z(d,u=>a.setAttrib(l,u.name,u.value)),d.length>0)return pa.rename("span")}if("all"!==e.remove){Iy(a,l,e,n,r),af(e.attributes,(u,m)=>{const{name:p,value:f}=Py(m,u,n);if(e.remove_similar||Ee(f)||!ot(r)||Bc(a.getAttrib(r,p),f)){if("class"===p){const h=a.getAttrib(l,p);if(h){let g="";if(z(h.split(/\s+/),b=>{/mce\-\w+/.test(b)&&(g+=(g?" ":"")+b)}),g)return void a.setAttrib(l,p,g)}}if(AA.test(p)&&l.removeAttribute("data-mce-"+p),"style"===p&&Zn(["li"])(l)&&"none"===a.getStyle(l,"list-style-type"))return l.removeAttribute(p),void a.setStyle(l,"list-style-type","none");"class"===p&&l.removeAttribute("className"),l.removeAttribute(p)}}),af(e.classes,u=>{u=br(u,n),ot(r)&&!a.hasClass(r,u)||a.removeClass(l,u)});const d=a.getAttribs(l);for(let u=0;u<d.length;u++)if(!s.isAttributeInternal(d[u].nodeName))return pa.keep()}return"none"!==e.remove?(Ly(t,l,e),pa.removed()):pa.keep()},RA=(t,e,n,o)=>Fy(t,e,n,o,o).fold(G(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),G(null)),Uy=(t,e,n,o,r)=>{(o||t.selection.isEditable())&&((a,s,i,l,c)=>{const d=a.formatter.get(s),u=d[0],m=a.dom,p=a.selection,f=y=>{const E=((w,_,k,S,O)=>{let P;return _.parentNode&&z(uc(w.dom,_.parentNode).reverse(),x=>{if(!P&&ot(x)&&"_start"!==x.id&&"_end"!==x.id){const N=ho(w,x,k,S,O);N&&!1!==N.split&&(P=x)}}),P})(a,y,s,i,c);return((w,_,k,S,O,P,x,N)=>{var T,U;let j,H;const tt=w.dom;if(k){const rt=k.parentNode;for(let st=S.parentNode;st&&st!==rt;st=st.parentNode){let lt=tt.clone(st,!1);for(let Y=0;Y<_.length&&(lt=RA(w,_[Y],N,lt),null!==lt);Y++);lt&&(j&&lt.appendChild(j),H||(H=lt),j=lt)}x.mixed&&tt.isBlock(k)||(S=null!==(T=tt.split(k,S))&&void 0!==T?T:S),j&&H&&(null===(U=O.parentNode)||void 0===U||U.insertBefore(j,O),H.appendChild(O),Ce(x)&&Ny(w,x,0,j))}return S})(a,d,E,y,y,0,u,i)},h=y=>ee(d,E=>Vi(a,E,i,y,y)),g=y=>{const E=Oe(y.childNodes),w=h(y)||ee(d,k=>Oc(m,y,k)),_=y.parentNode;if(!w&&q(_)&&om(u)&&h(_),u.deep&&E.length)for(let k=0;k<E.length;k++)g(E[k]);z(["underline","line-through","overline"],k=>{ot(y)&&a.dom.getStyle(y,"text-decoration")===k&&y.parentNode&&Qb(m,y.parentNode)===k&&Vi(a,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:k}},void 0,y)})},b=y=>{const E=m.get(y?"_start":"_end");if(E){let w=E[y?"firstChild":"lastChild"];return Sn(_=w)&&ot(_)&&("_start"===_.id||"_end"===_.id)&&(w=w[y?"firstChild":"lastChild"]),$(w)&&0===w.data.length&&(w=y?E.previousSibling||E.nextSibling:E.nextSibling||E.previousSibling),m.remove(E,!0),w}var _;return null},v=y=>{let E,w,_=ca(m,y,d,y.collapsed);if(u.split){if(_=vc(_),E=Oy(a,_,!0),w=Oy(a,_),E!==w){if(E=By(E,!0),w=By(w,!1),Ty(m,E,w)){const S=C.from(E.firstChild).getOr(E);return f(Dy(m,S,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void b(!0)}if(Ty(m,w,E)){const S=C.from(w.lastChild).getOr(w);return f(Dy(m,S,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void b(!1)}E=sf(m,E,"span",{id:"_start","data-mce-type":"bookmark"}),w=sf(m,w,"span",{id:"_end","data-mce-type":"bookmark"});const k=m.createRng();k.setStartAfter(E),k.setEndBefore(w),Di(m,k,S=>{z(S,O=>{Sn(O)||Sn(O.parentNode)||f(O)})}),f(E),f(w),E=b(!0),w=b()}else E=w=f(E);_.startContainer=E.parentNode?E.parentNode:E,_.startOffset=m.nodeIndex(E),_.endContainer=w.parentNode?w.parentNode:w,_.endOffset=m.nodeIndex(w)+1}Di(m,_,k=>{z(k,g)})};if(l){if(Bi(l)){const y=m.createRng();y.setStartBefore(l),y.setEndAfter(l),v(y)}else v(l);p0(a,s,l,i)}else p.isCollapsed()&&Ce(u)&&!ls(a).length?((t,e,n,o)=>{const r=t.dom,a=t.selection;let s=!1;const i=t.formatter.get(e);if(!i)return;const l=a.getRng(),c=l.startContainer,d=l.startOffset;let u=c;$(c)&&(d!==c.data.length&&(s=!0),u=u.parentNode);const m=[];let p;for(;u;){if(ho(t,u,e,n,o)){p=u;break}u.nextSibling&&(s=!0),m.push(u),u=u.parentNode}if(p)if(s){const f=a.getBookmark();l.collapse(!0);let h=ca(r,l,i,!0);h=vc(h),t.formatter.remove(e,n,h,o),a.moveToBookmark(f)}else{const f=ia(t.getBody(),p),h=q(f)?r.getParents(p.parentNode,se,f):[],g=Jm(!1).dom;((y,E,w)=>{var _,k;const S=y.dom,O=S.getParent(w,et(Qu,y.schema));O&&S.isEmpty(O)?null===(_=w.parentNode)||void 0===_||_.replaceChild(E,w):((P=>{const x=tn(P,"br"),N=gt((T=>{const U=[];let j=T.dom;for(;j;)U.push(R(j)),j=j.lastChild;return U})(P).slice(-1),na);x.length===N.length&&z(N,Jt)})(R(w)),S.isEmpty(w)?null===(k=w.parentNode)||void 0===k||k.replaceChild(E,w):S.insertAfter(E,w))})(t,g,f??p);const b=((y,E,w,_,k,S)=>{const O=y.formatter,P=y.dom,x=gt(Pe(O.get()),T=>T!==_&&!_e(T,"removeformat")),N=(T=y,U=w,Ke(x,(H,tt)=>{const rt=nm(T,tt,Y=>{const nt=A=>kt(A)||A.length>1&&"%"===A.charAt(0);return ee(["styles","attributes"],A=>Kt(Y,A).exists(B=>{const I=Yt(B)?B:Ms(B);return ee(I,nt)}))});return T.formatter.matchNode(U,tt,{},rt)?H.concat([tt]):H},[]));var T,U;if(gt(N,T=>!((U,j,H)=>{const tt=["inline","block","selector","attributes","styles","classes"],rt=st=>Wn(st,(lt,Y)=>ee(tt,nt=>nt===Y));return nm(U,j,st=>{const lt=rt(st);return nm(U,H,Y=>{const nt=rt(Y);return((A,B,I=Le)=>yl(I).eq(A,B))(lt,nt)})})})(y,T,_)).length>0){const T=w.cloneNode(!1);return P.add(E,T),O.remove(_,k,T,S),P.remove(T),C.some(T)}return C.none()})(t,g,p,e,n,o),v=my([...m,...b.toArray(),...h],g);f&&tf(t,f,q(f)),a.setCursorLocation(v,1),gy(t,g),r.isEmpty(p)&&r.remove(p)}})(a,s,i,c):(Gb(a,()=>Xu(a,v),y=>Ce(u)&&Qm(a,s,i,y)),a.nodeChanged()),y=a,w=i,"removeformat"===(E=s)?z(xy(y.selection),_=>{z(yy,k=>y.dom.setStyle(_,k,"")),My(y.dom,_)}):Cy(y.formatter,E).each(_=>{z(xy(y.selection),k=>Iy(y.dom,k,_,w,null))}),p0(a,s,l,i);var y,E,w})(t,e,n,o,r)},Vi=(t,e,n,o,r)=>Fy(t,e,n,o,r).fold(Gt,a=>(t.dom.rename(o,a),!0),se),zy=W.each,Dc=W.each,Hy=(t,e,n,o)=>{if(Dc(n.styles,(r,a)=>{t.setStyle(e,a,br(r,o))}),n.styles){const r=t.getAttrib(e,"style");r&&t.setAttrib(e,"data-mce-style",r)}},TA=(t,e,n,o)=>{const r=t.formatter.get(e),a=r[0],s=!o&&t.selection.isCollapsed(),i=t.dom,l=t.selection,c=(f,h=a)=>{kt(h.onformat)&&h.onformat(f,h,n,o),Hy(i,f,h,n),Dc(h.attributes,(g,b)=>{i.setAttrib(f,b,br(g,n))}),Dc(h.classes,g=>{const b=br(g,n);i.hasClass(f,b)||i.addClass(f,b)})},d=(f,h)=>{let g=!1;return Dc(f,b=>!(!kn(b)||("false"!==i.getContentEditable(h)||b.ceFalseOverride)&&(!q(b.collapsed)||b.collapsed===s)&&i.is(h,b.selector)&&!xn(h)&&(c(h,b),g=!0,1))),g},m=(f,h,g)=>{const b=[];let v=!0;const y=a.inline||a.block,E=(f=>{if(at(f)){const h=i.create(f);return c(h),h}return null})(y);Di(f,h,w=>{let _;const k=S=>{let O=!1,P=v,x=!1;const N=S.parentNode,T=N.nodeName.toLowerCase(),U=f.getContentEditable(S);q(U)&&(P=v,v="true"===U,O=!0,x=Zb(t,S));const j=v&&!O;if(ae(S)&&!((H,tt,rt,st)=>{if(hk(H)&&Ce(tt)&&rt.parentNode){const lt=Zp(H.schema),Y=((t,e)=>((n,o)=>{const r=n.dom;return r.parentNode?(a=R(r.parentNode),fe(a.dom.childNodes,i=>(a=>!Mt(n,a)&&o(a))(R(i))).map(R)):C.none();var a})(t,e).isSome())(R(rt),nt=>xn(nt.dom));return Vn(lt,st)&&Io(H.schema,rt.parentNode,{skipBogus:!1,includeZwsp:!0})&&!Y}return!1})(t,a,S,T))return _=null,void(po(a)&&f.remove(S));if(H=S,po(tt=a)&&!0===tt.wrapper&&ho(t,H,e,n))_=null;else{if(((H,tt,rt)=>{const st=po(lt=a)&&!0!==lt.wrapper&&Qu(t.schema,H)&&cs(t,tt,y);var lt;return rt&&st})(S,T,j)){const H=f.rename(S,y);return c(H),b.push(H),void(_=null)}if(kn(a)){let H=d(r,S);if(!H&&q(N)&&om(a)&&(H=d(r,N)),!Ce(a)||H)return void(_=null)}q(E)&&((H,tt,rt,st)=>{const lt=H.nodeName.toLowerCase(),Y=cs(t,y,lt)&&cs(t,tt,y),nt=!g&&$(H)&&Kl(H.data),A=xn(H),B=!Ce(a)||!f.isBlock(H);return(rt||st)&&Y&&!nt&&!A&&B})(S,T,j,x)?(_||(_=f.clone(E,!1),N.insertBefore(_,S),b.push(_)),x&&O&&(v=P),_.appendChild(S)):(_=null,z(Oe(S.childNodes),k),O&&(v=P),_=null)}var H,tt};z(w,k)}),!0===a.links&&z(b,w=>{const _=k=>{"A"===k.nodeName&&c(k,a),z(Oe(k.childNodes),_)};_(w)}),z(b,w=>{const _=(k=>{let S=0;return z(k.childNodes,O=>{var P;q(P=O)&&$(P)&&0===P.length||Sn(O)||S++}),S})(w);var k;!(b.length>1)&&f.isBlock(w)||0!==_?(Ce(a)||po(a)&&a.wrapper)&&(a.exact||1!==_||(w=fe((k=w).childNodes,Zu).filter(O=>"false"!==f.getContentEditable(O)&&Oc(f,O,a)).map(O=>{const P=f.clone(O,!1);return c(P),f.replace(P,k,!0),f.remove(O,!0),P}).getOr(k)),((k,S,O,P)=>{zy(S,x=>{var N,T,U;Ce(x)&&zy(k.dom.select(x.inline,P),N=>{of(N)&&Vi(k,x,O,N,x.exact?N:null)}),N=k.dom,U=P,(T=x).clear_child_styles&&nf(N.select(T.links?"*:not(a)":"*",U),H=>{of(H)&&N.isEditable(H)&&nf(T.styles,(tt,rt)=>{N.setStyle(H,rt,"")})})})})(t,r,n,w),((k,S,O,P,x)=>{const N=x.parentNode;ho(k,N,O,P)&&Vi(k,S,P,x)||S.merge_with_parents&&N&&k.dom.getParent(N,T=>!!ho(k,T,O,P)&&(Vi(k,S,P,x),!0))})(t,a,e,n,w),((k,S,O,P)=>{if(S.styles&&S.styles.backgroundColor){const x=Ay(k,"fontSize");rf(P,N=>x(N)&&k.isEditable(N),Ry(k,"backgroundColor",br(S.styles.backgroundColor,O)))}})(f,a,n,w),((k,S,O,P)=>{const x=N=>{if(Mo(N)&&ot(N.parentNode)&&k.isEditable(N)){const T=Qb(k,N.parentNode);k.getStyle(N,"color")&&T?k.setStyle(N,"text-decoration",T):k.getStyle(N,"text-decoration")===T&&k.setStyle(N,"text-decoration",null)}};S.styles&&(S.styles.color||S.styles.textDecoration)&&(W.walk(P,x,"childNodes"),x(P))})(f,a,0,w),((k,S,O,P)=>{if(Ce(S)&&("sub"===S.inline||"sup"===S.inline)){const x=Ay(k,"fontSize");rf(P,T=>x(T)&&k.isEditable(T),Ry(k,"fontSize",""));const N=gt(k.select("sup"===S.inline?"sub":"sup",P),k.isEditable);k.remove(N,!0)}})(f,a,0,w),Ny(t,a,0,w)):f.remove(w,!0)})},p=Bi(o)?o:l.getNode();if("false"===i.getContentEditable(p)&&!Zb(t,p))return d(r,o=p),void g0(t,e,o,n);if(a){if(o)if(Bi(o)){if(!d(r,o)){const f=i.createRng();f.setStartBefore(o),f.setEndAfter(o),m(i,ca(i,f,r),!0)}}else m(i,o,!0);else s&&Ce(a)&&!ls(t).length?((f,h,g)=>{let b;const v=f.selection,y=f.formatter.get(h);if(!y)return;const E=v.getRng();let w=E.startOffset;const _=E.startContainer.nodeValue;b=ia(f.getBody(),v.getStart());const k=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(_&&w>0&&w<_.length&&k.test(_.charAt(w))&&k.test(_.charAt(w-1))){const P=v.getBookmark();E.collapse(!0);let x=ca(f.dom,E,y);x=vc(x),f.formatter.apply(h,g,x),v.moveToBookmark(P)}else{let P=b?dy(b):null;b&&P?.data===$i||(S=f.getDoc(),O=Jm(!0).dom,b=S.importNode(O,!0),P=b.firstChild,E.insertNode(b),w=1,gy(f,b)),f.formatter.apply(h,g,b),v.setCursorLocation(P,w)}var S,O})(t,e,n):(l.setRng(Vm(l.getRng())),Gb(t,()=>{Xu(t,(f,h)=>{const g=h?f:ca(i,f,r);m(i,g,!1)})},se),t.nodeChanged()),Cy(t.formatter,e).each(f=>{var h;z(gt((g=>{const b=g.getSelectedBlocks(),v=g.getRng();if(g.isCollapsed())return[];if(1===b.length)return wy(v,b[0])&&Ey(v,b[0])?b:[];{const y=It(b).filter(_=>wy(v,_)).toArray(),E=pe(b).filter(_=>Ey(v,_)).toArray(),w=b.slice(1,-1);return y.concat(w).concat(E)}})(h=t.selection),_y(h.dom)),h=>Hy(i,h,f,n))});h=t,bt(Wi,f=e)&&z(Wi[f],g=>{g(h)})}var f,h;g0(t,e,o,n)},jy=(t,e,n,o)=>{(o||t.selection.isEditable())&&TA(t,e,n,o)},$y=t=>bt(t,"vars"),Wy=t=>t.selection.getStart(),Vy=(t,e,n,o,r)=>Ls(e,a=>{const s=t.formatter.matchNode(a,n,r??{},o);return!ce(s)},a=>!!ly(t,a,n)||!o&&q(t.formatter.matchNode(a,n,r,!0))),qy=(t,e)=>{const n=e??Wy(t);return gt(uc(t.dom,n),o=>ot(o)&&!Kr(o))},Ky=(t,e,n)=>{const o=qy(t,e);Ft(n,(r,a)=>{const s=i=>{const l=Vy(t,o,a,i.similar,$y(i)?i.vars:void 0),c=l.isSome();if(i.state.get()!==c){i.state.set(c);const d=l.getOr(e);$y(i)?i.callback(c,{node:d,format:a,parents:o}):z(i.callbacks,u=>u(c,{node:d,format:a,parents:o}))}};z([r.withSimilar,r.withoutSimilar],s),z(r.withVars,s)})},Yy=W.explode,Gy=()=>{const t={};return{addFilter:(e,n)=>{z(Yy(e),o=>{bt(t,o)||(t[o]={name:o,callbacks:[]}),t[o].callbacks.push(n)})},getFilters:()=>Ms(t),removeFilter:(e,n)=>{z(Yy(e),o=>{if(bt(t,o))if(q(n)){const r=t[o],a=gt(r.callbacks,s=>s!==n);a.length>0?r.callbacks=a:delete t[o]}else delete t[o]})}}},lf=t=>{const[e,...n]=t.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(r){const a=";base64"===r[2],s=a?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(o):decodeURIComponent(o);return C.some({type:r[1],data:s,base64Encoded:a})}return C.none()},Xy=(t,e,n=!0)=>{let o=e;if(n)try{o=atob(e)}catch{return C.none()}const r=new Uint8Array(o.length);for(let a=0;a<r.length;a++)r[a]=o.charCodeAt(a);return C.some(new Blob([r],{type:t}))},Zy=t=>new Promise((e,n)=>{const o=new FileReader;o.onloadend=()=>{e(o.result)},o.onerror=()=>{var r;n(null===(r=o.error)||void 0===r?void 0:r.message)},o.readAsDataURL(t)});let BA=0;const Qy=(t,e,n)=>lf(t).bind(({data:o,type:r,base64Encoded:a})=>{if(e&&!a)return C.none();{const s=a?o:btoa(o);return n(s,r)}}),Jy=(t,e,n)=>{const o=t.create("blobid"+BA++,e,n);return t.add(o),o},tC=(t,e,n=!1)=>Qy(e,n,(o,r)=>C.from(t.getByData(o,r)).orThunk(()=>Xy(r,o).map(a=>Jy(t,a,o)))),DA=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,LA=t=>C.from(t.match(DA)).bind(e=>xt(e,1)).map(e=>Dt(e,"www.")?e.substring(4):e),eC=(t,e)=>{C.from(t.attr("src")).bind(LA).forall(n=>!Bt(e,n))&&t.attr("sandbox","")},cf=(t,e)=>Dt(t,`${e}/`),{entries:nC,setPrototypeOf:oC,isFrozen:PA,getPrototypeOf:MA,getOwnPropertyDescriptor:IA}=Object;let{freeze:mn,seal:Hn,create:rC}=Object,{apply:df,construct:uf}=typeof Reflect<"u"&&Reflect;mn||(mn=function(t){return t}),Hn||(Hn=function(t){return t}),df||(df=function(t,e,n){return t.apply(e,n)}),uf||(uf=function(t,e){return new t(...e)});const Lc=Rn(Array.prototype.forEach),aC=Rn(Array.prototype.pop),qi=Rn(Array.prototype.push),Pc=Rn(String.prototype.toLowerCase),mf=Rn(String.prototype.toString),sC=Rn(String.prototype.match),Ki=Rn(String.prototype.replace),FA=Rn(String.prototype.indexOf),UA=Rn(String.prototype.trim),no=Rn(Object.prototype.hasOwnProperty),fn=Rn(RegExp.prototype.test),Yi=(iC=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return uf(iC,e)});var iC;function Rn(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return df(t,e,o)}}function zt(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pc;oC&&oC(t,null);let o=e.length;for(;o--;){let r=e[o];if("string"==typeof r){const a=n(r);a!==r&&(PA(e)||(e[o]=a),r=a)}t[r]=!0}return t}function zA(t){for(let e=0;e<t.length;e++)no(t,e)||(t[e]=null);return t}function ha(t){const e=rC(null);for(const[n,o]of nC(t))no(t,n)&&(e[n]=Array.isArray(o)?zA(o):o&&"object"==typeof o&&o.constructor===Object?ha(o):o);return e}function Gi(t,e){for(;null!==t;){const n=IA(t,e);if(n){if(n.get)return Rn(n.get);if("function"==typeof n.value)return Rn(n.value)}t=MA(t)}return function(){return null}}const lC=mn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ff=mn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),gf=mn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),HA=mn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),pf=mn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),jA=mn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),cC=mn(["#text"]),dC=mn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),hf=mn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),uC=mn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Mc=mn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$A=Hn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),WA=Hn(/<%[\w\W]*|[\w\W]*%>/gm),VA=Hn(/\${[\w\W]*}/gm),qA=Hn(/^data-[\-\w.\u00B7-\uFFFF]/),KA=Hn(/^aria-[\-\w]+$/),mC=Hn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),YA=Hn(/^(?:\w+script|data):/i),GA=Hn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),fC=Hn(/^html$/i),XA=Hn(/^[a-z][.\w]*(-[.\w]+)+$/i);var gC=Object.freeze({__proto__:null,MUSTACHE_EXPR:$A,ERB_EXPR:WA,TMPLIT_EXPR:VA,DATA_ATTR:qA,ARIA_ATTR:KA,IS_ALLOWED_URI:mC,IS_SCRIPT_OR_DATA:YA,ATTR_WHITESPACE:GA,DOCTYPE_NAME:fC,CUSTOM_ELEMENT:XA}),bf=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const n=L=>t(L);if(n.version="3.1.7",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;let{document:o}=e;const r=o,a=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:i,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:m,DOMParser:p,trustedTypes:f}=e,h=c.prototype,g=Gi(h,"cloneNode"),b=Gi(h,"remove"),v=Gi(h,"nextSibling"),y=Gi(h,"childNodes"),E=Gi(h,"parentNode");if("function"==typeof i){const L=o.createElement("template");L.content&&L.content.ownerDocument&&(o=L.content.ownerDocument)}let w,_="";const{implementation:k,createNodeIterator:S,createDocumentFragment:O,getElementsByTagName:P}=o,{importNode:x}=r;let N={};n.isSupported="function"==typeof nC&&"function"==typeof E&&k&&void 0!==k.createHTMLDocument;const{MUSTACHE_EXPR:T,ERB_EXPR:U,TMPLIT_EXPR:j,DATA_ATTR:H,ARIA_ATTR:tt,IS_SCRIPT_OR_DATA:rt,ATTR_WHITESPACE:st,CUSTOM_ELEMENT:lt}=gC;let{IS_ALLOWED_URI:Y}=gC,nt=null;const A=zt({},[...lC,...ff,...gf,...pf,...cC]);let B=null;const I=zt({},[...dC,...hf,...uC,...Mc]);let M=Object.seal(rC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),K=null,V=null,it=!0,dt=!0,vt=!1,Zt=!0,Qt=!1,Cn=!0,Z=!1,yt=!1,_t=!1,ht=!1,Tt=!1,Wt=!1,X=!0,ut=!1,Ht=!0,jt=!1,ie={},De=null;const ro=zt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let qe=null;const Dn=zt({},["audio","video","img","source","image","track"]);let we=null;const Ea=zt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Sr="http://www.w3.org/1998/Math/MathML",wo="http://www.w3.org/2000/svg",Ln="http://www.w3.org/1999/xhtml";let kr=Ln,Wo=!1,Eo=null;const Rd=zt({},[Sr,wo,Ln],mf);let rn=null;const Ts=["application/xhtml+xml","text/html"];let ge=null,Vo=null;const WB=o.createElement("form"),Nx=function(L){return L instanceof RegExp||L instanceof Function},Zg=function(){let L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Vo||Vo!==L){if(L&&"object"==typeof L||(L={}),L=ha(L),rn=-1===Ts.indexOf(L.PARSER_MEDIA_TYPE)?"text/html":L.PARSER_MEDIA_TYPE,ge="application/xhtml+xml"===rn?mf:Pc,nt=no(L,"ALLOWED_TAGS")?zt({},L.ALLOWED_TAGS,ge):A,B=no(L,"ALLOWED_ATTR")?zt({},L.ALLOWED_ATTR,ge):I,Eo=no(L,"ALLOWED_NAMESPACES")?zt({},L.ALLOWED_NAMESPACES,mf):Rd,we=no(L,"ADD_URI_SAFE_ATTR")?zt(ha(Ea),L.ADD_URI_SAFE_ATTR,ge):Ea,qe=no(L,"ADD_DATA_URI_TAGS")?zt(ha(Dn),L.ADD_DATA_URI_TAGS,ge):Dn,De=no(L,"FORBID_CONTENTS")?zt({},L.FORBID_CONTENTS,ge):ro,K=no(L,"FORBID_TAGS")?zt({},L.FORBID_TAGS,ge):{},V=no(L,"FORBID_ATTR")?zt({},L.FORBID_ATTR,ge):{},ie=!!no(L,"USE_PROFILES")&&L.USE_PROFILES,it=!1!==L.ALLOW_ARIA_ATTR,dt=!1!==L.ALLOW_DATA_ATTR,vt=L.ALLOW_UNKNOWN_PROTOCOLS||!1,Zt=!1!==L.ALLOW_SELF_CLOSE_IN_ATTR,Qt=L.SAFE_FOR_TEMPLATES||!1,Cn=!1!==L.SAFE_FOR_XML,Z=L.WHOLE_DOCUMENT||!1,ht=L.RETURN_DOM||!1,Tt=L.RETURN_DOM_FRAGMENT||!1,Wt=L.RETURN_TRUSTED_TYPE||!1,_t=L.FORCE_BODY||!1,X=!1!==L.SANITIZE_DOM,ut=L.SANITIZE_NAMED_PROPS||!1,Ht=!1!==L.KEEP_CONTENT,jt=L.IN_PLACE||!1,Y=L.ALLOWED_URI_REGEXP||mC,kr=L.NAMESPACE||Ln,M=L.CUSTOM_ELEMENT_HANDLING||{},L.CUSTOM_ELEMENT_HANDLING&&Nx(L.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(M.tagNameCheck=L.CUSTOM_ELEMENT_HANDLING.tagNameCheck),L.CUSTOM_ELEMENT_HANDLING&&Nx(L.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(M.attributeNameCheck=L.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),L.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof L.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(M.allowCustomizedBuiltInElements=L.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qt&&(dt=!1),Tt&&(ht=!0),ie&&(nt=zt({},cC),B=[],!0===ie.html&&(zt(nt,lC),zt(B,dC)),!0===ie.svg&&(zt(nt,ff),zt(B,hf),zt(B,Mc)),!0===ie.svgFilters&&(zt(nt,gf),zt(B,hf),zt(B,Mc)),!0===ie.mathMl&&(zt(nt,pf),zt(B,uC),zt(B,Mc))),L.ADD_TAGS&&(nt===A&&(nt=ha(nt)),zt(nt,L.ADD_TAGS,ge)),L.ADD_ATTR&&(B===I&&(B=ha(B)),zt(B,L.ADD_ATTR,ge)),L.ADD_URI_SAFE_ATTR&&zt(we,L.ADD_URI_SAFE_ATTR,ge),L.FORBID_CONTENTS&&(De===ro&&(De=ha(De)),zt(De,L.FORBID_CONTENTS,ge)),Ht&&(nt["#text"]=!0),Z&&zt(nt,["html","head","body"]),nt.table&&(zt(nt,["tbody"]),delete K.tbody),L.TRUSTED_TYPES_POLICY){if("function"!=typeof L.TRUSTED_TYPES_POLICY.createHTML)throw Yi('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof L.TRUSTED_TYPES_POLICY.createScriptURL)throw Yi('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=L.TRUSTED_TYPES_POLICY,_=w.createHTML("")}else void 0===w&&(w=function(wt,ft){if("object"!=typeof wt||"function"!=typeof wt.createPolicy)return null;let Vt=null;const te="data-tt-policy-suffix";ft&&ft.hasAttribute(te)&&(Vt=ft.getAttribute(te));const Ut="dompurify"+(Vt?"#"+Vt:"");try{return wt.createPolicy(Ut,{createHTML:Fe=>Fe,createScriptURL:Fe=>Fe})}catch{return console.warn("TrustedTypes policy "+Ut+" could not be created."),null}}(f,a)),null!==w&&"string"==typeof _&&(_=w.createHTML(""));mn&&mn(L),Vo=L}},Ax=zt({},["mi","mo","mn","ms","mtext"]),Rx=zt({},["annotation-xml"]),VB=zt({},["title","style","font","a","script"]),Tx=zt({},[...ff,...gf,...HA]),Ox=zt({},[...pf,...jA]),_o=function(L){qi(n.removed,{element:L});try{E(L).removeChild(L)}catch{b(L)}},bl=function(L,wt){try{qi(n.removed,{attribute:wt.getAttributeNode(L),from:wt})}catch{qi(n.removed,{attribute:null,from:wt})}if(wt.removeAttribute(L),"is"===L&&!B[L])if(ht||Tt)try{_o(wt)}catch{}else try{wt.setAttribute(L,"")}catch{}},Bx=function(L){let wt=null,ft=null;if(_t)L="<remove></remove>"+L;else{const Ut=sC(L,/^[\r\n\t ]+/);ft=Ut&&Ut[0]}"application/xhtml+xml"===rn&&kr===Ln&&(L='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+L+"</body></html>");const Vt=w?w.createHTML(L):L;if(kr===Ln)try{wt=(new p).parseFromString(Vt,rn)}catch{}if(!wt||!wt.documentElement){wt=k.createDocument(kr,"template",null);try{wt.documentElement.innerHTML=Wo?_:Vt}catch{}}const te=wt.body||wt.documentElement;return L&&ft&&te.insertBefore(o.createTextNode(ft),te.childNodes[0]||null),kr===Ln?P.call(wt,Z?"html":"body")[0]:Z?wt.documentElement:te},Dx=function(L){return S.call(L.ownerDocument||L,L,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Lx=function(L){return L instanceof m&&("string"!=typeof L.nodeName||"string"!=typeof L.textContent||"function"!=typeof L.removeChild||!(L.attributes instanceof u)||"function"!=typeof L.removeAttribute||"function"!=typeof L.setAttribute||"string"!=typeof L.namespaceURI||"function"!=typeof L.insertBefore||"function"!=typeof L.hasChildNodes)},Px=function(L){return"function"==typeof l&&L instanceof l},qo=function(L,wt,ft){N[L]&&Lc(N[L],Vt=>{Vt.call(n,wt,ft,Vo)})},Mx=function(L){let wt=null;if(qo("beforeSanitizeElements",L,null),Lx(L))return _o(L),!0;const ft=ge(L.nodeName);if(qo("uponSanitizeElement",L,{tagName:ft,allowedTags:nt}),L.hasChildNodes()&&!Px(L.firstElementChild)&&fn(/<[/\w]/g,L.innerHTML)&&fn(/<[/\w]/g,L.textContent)||7===L.nodeType||Cn&&8===L.nodeType&&fn(/<[/\w]/g,L.data))return _o(L),!0;if(!nt[ft]||K[ft]){if(!K[ft]&&Fx(ft)&&(M.tagNameCheck instanceof RegExp&&fn(M.tagNameCheck,ft)||M.tagNameCheck instanceof Function&&M.tagNameCheck(ft)))return!1;if(Ht&&!De[ft]){const Vt=E(L)||L.parentNode,te=y(L)||L.childNodes;if(te&&Vt)for(let Ut=te.length-1;Ut>=0;--Ut){const Fe=g(te[Ut],!0);Fe.__removalCount=(L.__removalCount||0)+1,Vt.insertBefore(Fe,v(L))}}return _o(L),!0}return L instanceof c&&!function(Vt){let te=E(Vt);te&&te.tagName||(te={namespaceURI:kr,tagName:"template"});const Ut=Pc(Vt.tagName),Fe=Pc(te.tagName);return!!Eo[Vt.namespaceURI]&&(Vt.namespaceURI===wo?te.namespaceURI===Ln?"svg"===Ut:te.namespaceURI===Sr?"svg"===Ut&&("annotation-xml"===Fe||Ax[Fe]):!!Tx[Ut]:Vt.namespaceURI===Sr?te.namespaceURI===Ln?"math"===Ut:te.namespaceURI===wo?"math"===Ut&&Rx[Fe]:!!Ox[Ut]:Vt.namespaceURI===Ln?!(te.namespaceURI===wo&&!Rx[Fe])&&!(te.namespaceURI===Sr&&!Ax[Fe])&&!Ox[Ut]&&(VB[Ut]||!Tx[Ut]):!("application/xhtml+xml"!==rn||!Eo[Vt.namespaceURI]))}(L)?(_o(L),!0):"noscript"!==ft&&"noembed"!==ft&&"noframes"!==ft||!fn(/<\/no(script|embed|frames)/i,L.innerHTML)?(Qt&&3===L.nodeType&&(wt=L.textContent,Lc([T,U,j],Vt=>{wt=Ki(wt,Vt," ")}),L.textContent!==wt&&(qi(n.removed,{element:L.cloneNode()}),L.textContent=wt)),qo("afterSanitizeElements",L,null),!1):(_o(L),!0)},Ix=function(L,wt,ft){if(X&&("id"===wt||"name"===wt)&&(ft in o||ft in WB))return!1;if((!dt||V[wt]||!fn(H,wt))&&(!it||!fn(tt,wt)))if(!B[wt]||V[wt]){if(!(Fx(L)&&(M.tagNameCheck instanceof RegExp&&fn(M.tagNameCheck,L)||M.tagNameCheck instanceof Function&&M.tagNameCheck(L))&&(M.attributeNameCheck instanceof RegExp&&fn(M.attributeNameCheck,wt)||M.attributeNameCheck instanceof Function&&M.attributeNameCheck(wt))||"is"===wt&&M.allowCustomizedBuiltInElements&&(M.tagNameCheck instanceof RegExp&&fn(M.tagNameCheck,ft)||M.tagNameCheck instanceof Function&&M.tagNameCheck(ft))))return!1}else if(!we[wt]&&!fn(Y,Ki(ft,st,""))&&("src"!==wt&&"xlink:href"!==wt&&"href"!==wt||"script"===L||0!==FA(ft,"data:")||!qe[L])&&(!vt||fn(rt,Ki(ft,st,"")))&&ft)return!1;return!0},Fx=function(L){return"annotation-xml"!==L&&sC(L,lt)},Ux=function(L){qo("beforeSanitizeAttributes",L,null);const{attributes:wt}=L;if(!wt)return;const ft={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B};let Vt=wt.length;for(;Vt--;){const te=wt[Vt],{name:Ut,namespaceURI:Fe,value:Ko}=te,xo=ge(Ut);let Je="value"===Ut?Ko:UA(Ko);const KB=Je;if(ft.attrName=xo,ft.attrValue=Je,ft.keepAttr=!0,ft.forceKeepAttr=void 0,qo("uponSanitizeAttribute",L,ft),Je=ft.attrValue,ft.forceKeepAttr)continue;if(!ft.keepAttr){bl(Ut,L);continue}if(!Zt&&fn(/\/>/i,Je)){bl(Ut,L);continue}Qt&&Lc([T,U,j],Hx=>{Je=Ki(Je,Hx," ")});const zx=ge(L.nodeName);if(Ix(zx,xo,Je))if(!ut||"id"!==xo&&"name"!==xo||(bl(Ut,L),Je="user-content-"+Je),Cn&&fn(/((--!?|])>)|<\/(style|title)/i,Je))bl(Ut,L);else{if(w&&"object"==typeof f&&"function"==typeof f.getAttributeType&&!Fe)switch(f.getAttributeType(zx,xo)){case"TrustedHTML":Je=w.createHTML(Je);break;case"TrustedScriptURL":Je=w.createScriptURL(Je)}if(Je!==KB)try{Fe?L.setAttributeNS(Fe,Ut,Je):L.setAttribute(Ut,Je),Lx(L)?_o(L):aC(n.removed)}catch{}}else bl(Ut,L)}qo("afterSanitizeAttributes",L,null)},qB=function L(wt){let ft=null;const Vt=Dx(wt);for(qo("beforeSanitizeShadowDOM",wt,null);ft=Vt.nextNode();)qo("uponSanitizeShadowNode",ft,null),Mx(ft)||(ft.content instanceof s&&L(ft.content),Ux(ft));qo("afterSanitizeShadowDOM",wt,null)};return n.sanitize=function(L){let wt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ft=null,Vt=null,te=null,Ut=null;if(Wo=!L,Wo&&(L="\x3c!--\x3e"),"string"!=typeof L&&!Px(L)){if("function"!=typeof L.toString)throw Yi("toString is not a function");if("string"!=typeof(L=L.toString()))throw Yi("dirty is not a string, aborting")}if(!n.isSupported)return L;if(yt||Zg(wt),n.removed=[],"string"==typeof L&&(jt=!1),jt){if(L.nodeName){const xo=ge(L.nodeName);if(!nt[xo]||K[xo])throw Yi("root node is forbidden and cannot be sanitized in-place")}}else if(L instanceof l)ft=Bx("\x3c!----\x3e"),Vt=ft.ownerDocument.importNode(L,!0),1===Vt.nodeType&&"BODY"===Vt.nodeName||"HTML"===Vt.nodeName?ft=Vt:ft.appendChild(Vt);else{if(!ht&&!Qt&&!Z&&-1===L.indexOf("<"))return w&&Wt?w.createHTML(L):L;if(ft=Bx(L),!ft)return ht?null:Wt?_:""}ft&&_t&&_o(ft.firstChild);const Fe=Dx(jt?L:ft);for(;te=Fe.nextNode();)Mx(te)||(te.content instanceof s&&qB(te.content),Ux(te));if(jt)return L;if(ht){if(Tt)for(Ut=O.call(ft.ownerDocument);ft.firstChild;)Ut.appendChild(ft.firstChild);else Ut=ft;return(B.shadowroot||B.shadowrootmode)&&(Ut=x.call(r,Ut,!0)),Ut}let Ko=Z?ft.outerHTML:ft.innerHTML;return Z&&nt["!doctype"]&&ft.ownerDocument&&ft.ownerDocument.doctype&&ft.ownerDocument.doctype.name&&fn(fC,ft.ownerDocument.doctype.name)&&(Ko="<!DOCTYPE "+ft.ownerDocument.doctype.name+">\n"+Ko),Qt&&Lc([T,U,j],xo=>{Ko=Ki(Ko,xo," ")}),w&&Wt?w.createHTML(Ko):Ko},n.setConfig=function(){Zg(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),yt=!0},n.clearConfig=function(){Vo=null,yt=!1},n.isValidAttribute=function(L,wt,ft){Vo||Zg({});const Vt=ge(L),te=ge(wt);return Ix(Vt,te,ft)},n.addHook=function(L,wt){"function"==typeof wt&&(N[L]=N[L]||[],qi(N[L],wt))},n.removeHook=function(L){if(N[L])return aC(N[L])},n.removeHooks=function(L){N[L]&&(N[L]=[])},n.removeAllHooks=function(){N={}},n}();const pC=W.each,QA=W.trim,JA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],tR={ftp:21,http:80,https:443,mailto:25},eR=["img","video"],hC=(t,e,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!t.allow_html_data_urls&&(/^data:image\//i.test(o)?(a=n,(q(r=t.allow_svg_data_urls)?!r:!q(a)||!Bt(eR,a))&&/^data:image\/svg\+xml/i.test(o)):/^data:/i.test(o)));var r,a};class jn{static parseDataUri(e){let n;const o=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(e,n,o={}){if(o.allow_script_urls)return!0;{const r=Zr.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!hC(o,r,n)}}static getDocumentBaseUrl(e){var n;let o;return o=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(e,n={}){this.path="",this.directory="",e=QA(e),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(r.source=e);const a=0===e.indexOf("//");if(0!==e.indexOf("/")||a||(e=(o&&o.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=o?o.path:new jn(document.location.href).directory;if(""===o?.protocol)e="//mce_host"+r.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);s&&pC(JA,(i,l)=>{let c=s[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),r[i]=c}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||"mce_host"!==r.host||(r.port=o.port),r.host&&"mce_host"!==r.host||(r.host=o.host),r.source=""),a&&(r.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new jn(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===r)return o;let a=this.toRelPath(this.path,n.path);return n.query&&(a+="?"+n.query),n.anchor&&(a+="#"+n.anchor),a}toAbsolute(e,n){const o=new jn(e,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?tR[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let o,r,a=0,s="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(o=0,r=i.length;o<r;o++)if(o>=l.length||i[o]!==l[o]){a=o+1;break}if(i.length<l.length)for(o=0,r=l.length;o<r;o++)if(o>=i.length||i[o]!==l[o]){a=o+1;break}if(1===a)return n;for(o=0,r=i.length-(a-1);o<r;o++)s+="../";for(o=a-1,r=l.length;o<r;o++)s+=o!==a-1?"/"+l[o]:l[o];return s}toAbsPath(e,n){let o=0;const r=/\/$/.test(n)?"/":"",a=e.split("/"),s=n.split("/"),i=[];pC(a,u=>{u&&i.push(u)});const l=[];for(let u=s.length-1;u>=0;u--)0!==s[u].length&&"."!==s[u]&&(".."!==s[u]?o>0?o--:l.push(s[u]):o++);const c=i.length-o;let d;return d=c<=0?Br(l).join("/"):i.slice(0,c).join("/")+"/"+Br(l).join("/"),0!==d.indexOf("/")&&(d="/"+d),r&&d.lastIndexOf("/")!==d.length-1&&(d+=r),d}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const nR=W.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),vf="data-mce-type";let bC=0;const vC=(t,e,n,o,r)=>{var a,s,i,l;const c=e.validate,d=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(a=t.nodeValue)&&void 0!==a?a:"")&&(t.nodeValue=" "+t.nodeValue);const u=null!==(s=r?.tagName)&&void 0!==s?s:t.nodeName.toLowerCase();if("html"!==o&&n.isValid(o))return void(q(r)&&(r.allowedTags[u]=!0));if(1!==t.nodeType||"body"===u)return;const m=R(t),p=cn(m,vf),f=St(m,"data-mce-bogus");if(!p&&at(f))return void("all"===f?Jt(m):cr(m));const h=n.getElementRule(u);if(!c||h){if(q(r)&&(r.allowedTags[u]=!0),c&&h&&!p){if(z(null!==(i=h.attributesForced)&&void 0!==i?i:[],g=>{Et(m,g.name,"{$uid}"===g.value?"mce_"+bC++:g.value)}),z(null!==(l=h.attributesDefault)&&void 0!==l?l:[],g=>{cn(m,g.name)||Et(m,g.name,"{$uid}"===g.value?"mce_"+bC++:g.value)}),h.attributesRequired&&!ee(h.attributesRequired,g=>cn(m,g))||h.removeEmptyAttrs&&(g=>{const b=g.dom.attributes;return null==b||0===b.length})(m))return void cr(m);h.outputName&&h.outputName!==u&&((g,b)=>{const v=((E,w)=>{const _=ke(w),k=He(E);return Lt(_,k),_})(g,b);Po(g,v);const y=je(g);Vr(v,y),Jt(g)})(m,h.outputName)}}else bt(d,u)?Jt(m):cr(m)},yC=(t,e,n,o,r,a)=>"html"!==n&&!Yr(o)||!(r in nR&&hC(t,a,o))&&(!t.validate||e.isValid(o,r)||Dt(r,"data-")||Dt(r,"aria-")),CC=(t,e)=>t.hasAttribute(vf)&&("id"===e||"class"===e||"style"===e),wC=(t,e)=>t in e.getBoolAttrs(),oR=(t,e,n,o)=>{const{attributes:r}=t;for(let a=r.length-1;a>=0;a--){const s=r[a],i=s.name,l=s.value;yC(e,n,o,t.tagName.toLowerCase(),i,l)||CC(t,i)?wC(i,n)&&t.setAttribute(i,i):t.removeAttribute(i)}},aR=t=>e=>{const n=Op(e);if("svg"===n)(o=>{const a={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(s=>`xlink:${s}`)};bf().sanitize(o,a)})(e);else{if("math"!==n)throw new Error("Not a namespace element");((o,r)=>{const a=bf();a.addHook("uponSanitizeElement",(s,i)=>{var l;const c=null!==(l=i.tagName)&&void 0!==l?l:s.nodeName.toLowerCase(),d=r.allow_mathml_annotation_encodings;if("annotation"===c&&Yt(d)&&d.length>0){const u=s.getAttribute("encoding");at(u)&&Bt(d,u)&&(i.allowedTags[c]=!0)}}),a.sanitize(o,{IN_PLACE:!0,USE_PROFILES:{mathMl:!0}})})(e,t)}},EC=W.makeMap,_C=W.extend,xC=(t,e,n,o)=>{const r=t.name,a=r in n&&"title"!==r&&"textarea"!==r&&"noscript"!==r,s=e.childNodes;for(let i=0,l=s.length;i<l;i++){const c=s[i],d=new Ze(c.nodeName.toLowerCase(),c.nodeType);if(ot(c)){const u=c.attributes;for(let m=0,p=u.length;m<p;m++){const f=u[m];d.attr(f.name,f.value)}Yr(d.name)&&(o(c),d.value=c.innerHTML)}else $(c)?(d.value=c.data,a&&(d.raw=!0)):(dr(c)||Xx(c)||Zx(c))&&(d.value=c.data);Yr(d.name)||xC(d,c,n,o),t.append(d)}},ps=(t={},e=ur())=>{const n=Gy(),o=Gy(),r={validate:!0,root_name:"body",sanitize:!0,...t},a=new DOMParser,s=((h,g)=>{const b=(()=>{const v=Fo(),y=()=>v.get().map(Op).getOr("html");return{track:E=>(Xd(E)?v.set(E):v.get().exists(w=>!w.contains(E))&&v.clear(),y()),current:y,reset:()=>{v.clear()}}})();if(h.sanitize){const v=((t,e,n)=>{const o=bf();return o.addHook("uponSanitizeElement",(r,a)=>{vC(r,t,e,n.track(r),a)}),o.addHook("uponSanitizeAttribute",(r,a)=>{((s,i,l,c,d)=>{const u=s.tagName.toLowerCase(),{attrName:m,attrValue:p}=d;d.keepAttr=yC(i,l,c,u,m,p),d.keepAttr?(d.allowedAttributes[m]=!0,wC(m,l)&&(d.attrValue=m),i.allow_svg_data_urls&&Dt(p,"data:image/svg+xml")&&(d.forceKeepAttr=!0)):CC(s,m)&&(d.forceKeepAttr=!0)})(r,t,e,n.current(),a)}),o})(h,g,b);return{sanitizeHtmlElement:(E,w)=>{v.sanitize(E,((_,k)=>{const S={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1};return S.PARSER_MEDIA_TYPE=k,_.allow_script_urls?S.ALLOWED_URI_REGEXP=/.*/:_.allow_html_data_urls&&(S.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),S})(h,w)),v.removed=[],b.reset()},sanitizeNamespaceElement:aR(h)}}return{sanitizeHtmlElement:(v,y)=>{const E=document.createNodeIterator(v,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let w;for(;w=E.nextNode();){const _=b.track(w);vC(w,h,g,_),ot(w)&&oR(w,h,g,_)}b.reset()},sanitizeNamespaceElement:Ct}})(r,e),l=n.getFilters,u=o.getFilters,p=(h,g)=>{const b=at(g.attr(vf)),v=1===g.type&&!bt(h,g.name)&&!nu(e,g)&&!Yr(g.name);return 3===g.type||v&&!b},f={schema:e,addAttributeFilter:o.addFilter,getAttributeFilters:u,removeAttributeFilter:o.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(h,g={})=>{var b;const v=r.validate,y=null!==(b=g.context)&&void 0!==b?b:r.root_name,E=((T,U,j="html")=>{const H="xhtml"===j?"application/xhtml+xml":"text/html",tt=bt(e.getSpecialElements(),U.toLowerCase()),rt=tt?`<${U}>${T}</${U}>`:T,st=a.parseFromString("xhtml"===j?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${rt}</body></html>`:/^[\s]*<head/i.test(T)||/^[\s]*<html/i.test(T)||/^[\s]*<!DOCTYPE/i.test(T)?`<html>${rt}</html>`:`<body>${rt}</body>`,H).body;return s.sanitizeHtmlElement(st,H),tt?st.firstChild:st})(h,y,g.format);Qd(e,E);const w=new Ze(y,11);xC(w,E,e.getSpecialElements(),s.sanitizeNamespaceElement),E.innerHTML="";const[_,k]=((T,U,j,H)=>{const tt=j.validate,rt=U.getNonEmptyElements(),st=U.getWhitespaceElements(),lt=_C(EC("script,style,head,html,body,title,meta,param"),U.getBlockElements()),Y=Zp(U),nt=/[ \t\r\n]+/g,A=/^[ \t\r\n]+/,B=/[ \t\r\n]+$/,I=V=>{let it=V.parent;for(;q(it);){if(it.name in st)return!0;it=it.parent}return!1},M=V=>V.name in lt||nu(U,V)||Yr(V.name)&&V.parent===T,K=(V,it)=>!q(it?V.prev:V.next)&&!ue(V.parent)&&M(V.parent)&&(V.parent!==T||!0===H.isRootContent);return[V=>{var it,vt,Zt;if(3===V.type&&!I(V)){let dt=null!==(it=V.value)&&void 0!==it?it:"";dt=dt.replace(nt," "),Zt=M,(q(vt=V.prev)&&(Zt(vt)||"br"===vt.name)||K(V,!0))&&(dt=dt.replace(A,"")),0===dt.length||" "===dt&&V.prev&&8===V.prev.type&&V.next&&8===V.next.type?V.remove():V.value=dt}},V=>{var it,Zt,Qt;if(1===V.type){const dt=U.getElementRule(V.name);if(tt&&dt){const vt=ji(U,rt,st,V);dt.paddInEmptyBlock&&vt&&(Zt=>{let Qt=Zt;for(;q(Qt);){if(Qt.name in Y)return ji(U,rt,st,Qt);Qt=Qt.parent}return!1})(V)?Hm(j,H,M,V):dt.removeEmpty&&vt?M(V)?V.remove():V.unwrap():dt.paddEmpty&&(vt||ay(Zt=V,"#text")&&(null===(Qt=Zt?.firstChild)||void 0===Qt?void 0:Qt.value)===ye)&&Hm(j,H,M,V)}}else if(3===V.type&&!I(V)){let dt=null!==(it=V.value)&&void 0!==it?it:"";(V.next&&M(V.next)||K(V,!1))&&(dt=dt.replace(B,"")),0===dt.length?V.remove():V.value=dt}}]})(w,e,r,g),S=[],P={nodes:{},attributes:{}},x=T=>ny(l(),u(),T,P);if(((T,U,j)=>{const H=[];for(let tt=T,rt=tt;tt;rt=tt,tt=tt.walk()){const st=tt;z(U,lt=>lt(st)),ue(st.parent)&&st!==T?tt=rt:H.push(st)}for(let tt=H.length-1;tt>=0;tt--){const rt=H[tt];z(j,st=>st(rt))}})(w,[_,x],[k,v?T=>{return j=S,void(Wm(e,U=T)&&j.push(U));var U,j}:Ct]),S.reverse(),v&&S.length>0)if(g.context){const{pass:T,fail:U}=Xo(S,j=>j.parent===w);$m(U,e,w,x),g.invalid=T.length>0}else $m(S,e,w,x);const N=((T,U)=>{var j;const H=null!==(j=U.forced_root_block)&&void 0!==j?j:T.forced_root_block;return!1===H?"":!0===H?"p":H})(r,g);return N&&("body"===w.name||g.isRootContent)&&((T,U)=>{const j=_C(EC("script,style,head,html,body,title,meta,param"),e.getBlockElements()),H=/^[ \t\r\n]+/,tt=/[ \t\r\n]+$/;let rt=T.firstChild,st=null;const lt=Y=>{var nt,A;Y&&(rt=Y.firstChild,rt&&3===rt.type&&(rt.value=null===(nt=rt.value)||void 0===nt?void 0:nt.replace(H,"")),rt=Y.lastChild,rt&&3===rt.type&&(rt.value=null===(A=rt.value)||void 0===A?void 0:A.replace(tt,"")))};if(e.isValidChild(T.name,U.toLowerCase())){for(;rt;){const Y=rt.next;p(j,rt)?(st||(st=new Ze(U,1),st.attr(r.forced_root_block_attrs),T.insert(st,rt)),st.append(rt)):(lt(st),st=null),rt=Y}lt(st)}})(w,N),g.invalid||oy(P,g),w}};return((h,g)=>{var b,v;const y=h.schema;h.addAttributeFilter("href",k=>{let S=k.length;const O=P=>{const x=P?W.trim(P):"";return/\b(noopener)\b/g.test(x)?x:x.split(" ").filter(T=>T.length>0).concat(["noopener"]).sort().join(" ")};if(!g.allow_unsafe_link_target)for(;S--;){const P=k[S];"a"===P.name&&"_blank"===P.attr("target")&&P.attr("rel",O(P.attr("rel")))}}),g.allow_html_in_named_anchor||h.addAttributeFilter("id,name",k=>{let S,O,P,x,N=k.length;for(;N--;)if(x=k[N],"a"===x.name&&x.firstChild&&!x.attr("href"))for(P=x.parent,S=x.lastChild;S&&P;)O=S.prev,P.insert(S,x),S=O}),g.fix_list_elements&&h.addNodeFilter("ul,ol",k=>{let S,O,P=k.length;for(;P--;)if(S=k[P],O=S.parent,O&&("ul"===O.name||"ol"===O.name))if(S.prev&&"li"===S.prev.name)S.prev.append(S);else{const x=new Ze("li",1);x.attr("style","list-style-type: none"),S.wrap(x)}});const E=y.getValidClasses();g.validate&&E&&h.addAttributeFilter("class",k=>{var S;let O=k.length;for(;O--;){const P=k[O],x=null!==(S=P.attr("class"))&&void 0!==S?S:"",N=W.explode(x," ");let T="";for(let U=0;U<N.length;U++){const j=N[U];let H=!1,tt=E["*"];tt&&tt[j]&&(H=!0),tt=E[P.name],!H&&tt&&tt[j]&&(H=!0),H&&(T&&(T+=" "),T+=j)}T.length||(T=null),P.attr("class",T)}}),((k,S)=>{const{blob_cache:O}=S;if(O){const P=x=>{const N=x.attr("src");var T;(T=x).attr("src")===Rt.transparentSrc||q(T.attr("data-mce-placeholder"))||(T=>q(T.attr("data-mce-bogus")))(x)||ue(N)||tC(O,N,!0).each(T=>{x.attr("src",T.blobUri())})};k.addAttributeFilter("src",x=>z(x,P))}})(h,g);const w=null!==(b=g.sandbox_iframes)&&void 0!==b&&b,_=_l(null!==(v=g.sandbox_iframes_exclusions)&&void 0!==v?v:[]);g.convert_unsafe_embeds&&h.addNodeFilter("object,embed",k=>z(k,S=>{S.replace((({type:O,src:P,width:x,height:N}={},T,U)=>{const j=ce(tt=O)?"iframe":cf(tt,"image")?"img":cf(tt,"video")?"video":cf(tt,"audio")?"audio":"iframe",H=new Ze(j,1);var tt;return H.attr("audio"===j?{src:P}:{src:P,width:x,height:N}),"audio"!==j&&"video"!==j||H.attr("controls",""),"iframe"===j&&T&&eC(H,U),H})({type:S.attr("type"),src:S.attr("object"===S.name?"data":"src"),width:S.attr("width"),height:S.attr("height")},w,_))})),w&&h.addNodeFilter("iframe",k=>z(k,S=>eC(S,_)))})(f,r),(g=r).inline_styles&&((t,e,n)=>{var o;const r=du();var a,s,i;e.convert_fonts_to_spans&&(a=t,s=r,i=W.explode(null!==(o=e.font_size_legacy_values)&&void 0!==o?o:""),a.addNodeFilter("font",l=>{z(l,c=>{const d=s.parse(c.attr("style")),u=c.attr("color"),m=c.attr("face"),p=c.attr("size");var f;u&&(d.color=u),m&&(d["font-family"]=m),p&&er(p).each(f=>{d["font-size"]=i[f-1]}),c.name="span",c.attr("style",s.serialize(d)),f=c,z(["color","face","size"],g=>{f.attr(g,null)})})})),((a,s,i)=>{a.addNodeFilter("strike",l=>{const c="html4"!==s.type;z(l,d=>{if(c)d.name="s";else{const u=i.parse(d.attr("style"));u["text-decoration"]="line-through",d.name="span",d.attr("style",i.serialize(u))}})})})(t,n,r)})(f,g,e),f;var g},SC=(t,e,n)=>{const o=Tc(a=t)?vr({validate:!1}).serialize(a):a,r=e(o);var a;if(r.isDefaultPrevented())return r;if(Tc(t)){if(r.content!==o){const a=ps({validate:!1,forced_root_block:!1,...n}).parse(r.content,{context:t.name});return{...r,content:a}}return{...r,content:t}}return r},kC=t=>({sanitize:pb(t),sandbox_iframes:bb(t),sandbox_iframes_exclusions:Mu(t)}),NC=(t,e)=>{if(e.no_events)return en.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?en.error(b0(t,{content:"",...n}).content):en.value(n)}},AC=(t,e,n)=>n.no_events?e:SC(e,r=>b0(t,{...n,content:r}),kC(t)).content,yf=(t,e)=>{if(e.no_events)return en.value(e);{const n=SC(e.content,o=>{return r=t,a={...e,content:o},r.dispatch("BeforeSetContent",a);var r,a},kC(t));return n.isDefaultPrevented()?(h0(t,n),en.error(void 0)):en.value(n)}},Cf=(t,e,n)=>{n.no_events||h0(t,{...n,content:e})},wf=(t,e,n)=>({element:t,width:e,rows:n}),RC=(t,e)=>({element:t,cells:e}),sR=(t,e)=>({x:t,y:e}),TC=(t,e)=>oe(t,e).bind(er).getOr(1),iR=(t,e,n)=>{const o=t.rows;return!!(o[n]?o[n].cells:[])[e]},OC=t=>Ke(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),BC=(t,e)=>{const n=t.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let a=0;a<r.length;a++)if(Mt(r[a],e))return C.some(sR(a,o))}return C.none()},DC=(t,e,n,o,r)=>{const a=[],s=t.rows;for(let i=n;i<=r;i++){const l=s[i].cells,c=e<o?l.slice(e,o+1):l.slice(o,e+1);a.push(RC(s[i].element,c))}return a},lR=t=>((e,n)=>{const o=ta(e.element),r=ke("tbody");return Vr(r,n),be(o,r),o})(t,At(t.rows,n=>{const o=At(n.cells,a=>{const s=ph(a);return ne(s,"colspan"),ne(s,"rowspan"),s}),r=ta(n.element);return Vr(r,o),r})),LC=()=>cm([]),Ic=(t,e)=>e>=0&&e<t.length&&la(t.charAt(e)),PC=t=>vn(t.innerText),MC=t=>ot(t)?t.outerHTML:$(t)?Zr.encodeRaw(t.data,!1):dr(t)?"\x3c!--"+t.data+"--\x3e":"",fR=pn(()=>document.implementation.createHTMLDocument("undo")),Fc=t=>{const e=t.serializer.getTempAttrs(),n=ov(t.getBody(),e);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:gt(At(Oe(n.childNodes),de(vn,MC)),o=>o.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:vn(n.innerHTML),bookmark:null,beforeBookmark:null}},Ef=(t,e,n)=>{const o=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,o)=>{let r=0;z(n,a=>{var s,i;0===a[0]?r++:1===a[0]?(((s,i,l)=>{const c=(d=>{let u;const m=document.createElement("div"),p=document.createDocumentFragment();for(d&&(m.innerHTML=d);u=m.firstChild;)p.appendChild(u);return p})(i);s.hasChildNodes()&&l<s.childNodes.length?s.insertBefore(c,s.childNodes[l]):s.appendChild(c)})(o,a[1],r),r++):2===a[0]&&(i=r,(s=o).hasChildNodes()&&i<s.childNodes.length&&s.removeChild(s.childNodes[i]))})})(((n,o)=>{const r=n.length+o.length+2,a=new Array(r),s=new Array(r),i=(u,m,p,f,h)=>{const g=c(u,m,p,f);if(null===g||g.start===m&&g.diag===m-f||g.end===u&&g.diag===u-p){let b=u,v=p;for(;b<m||v<f;)b<m&&v<f&&n[b]===o[v]?(h.push([0,n[b]]),++b,++v):m-u>f-p?(h.push([2,n[b]]),++b):(h.push([1,o[v]]),++v)}else{i(u,g.start,p,g.start-g.diag,h);for(let b=g.start;b<g.end;++b)h.push([0,n[b]]);i(g.end,m,g.end-g.diag,f,h)}},l=(u,m,p,f)=>{let h=u;for(;h-m<f&&h<p&&n[h]===o[h-m];)++h;return((g,b,v)=>({start:g,end:b,diag:v}))(u,h,m)},c=(u,m,p,f)=>{const h=m-u,g=f-p;if(0===h||0===g)return null;const b=h-g,v=g+h,y=(v%2==0?v:v+1)/2;let E,w,_,k,S;for(a[1+y]=u,s[1+y]=m+1,E=0;E<=y;++E){for(w=-E;w<=E;w+=2){for(_=w+y,a[_]=w===-E||w!==E&&a[_-1]<a[_+1]?a[_+1]:a[_-1]+1,k=a[_],S=k-u+p-w;k<m&&S<f&&n[k]===o[S];)a[_]=++k,++S;if(b%2!=0&&b-E<=w&&w<=b+E&&s[_-b]<=a[_])return l(s[_-b],w+u-p,m,f)}for(w=b-E;w<=b+E;w+=2){for(_=w+y-b,s[_]=w===b-E||w!==b+E&&s[_+1]<=s[_-1]?s[_+1]-1:s[_-1],k=s[_]-1,S=k-u+p-w;k>=u&&S>=p&&n[k]===o[S];)s[_]=k--,S--;if(b%2==0&&-E<=w&&w<=E&&s[_]<=a[_+b])return l(s[_],w+u-p,m,f)}}return null},d=[];return i(0,n.length,0,o.length,d),d})(At(Oe(e.childNodes),MC),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!q(o)||!zb(o)||!o.isFakeCaret}),o&&(t.selection.moveToBookmark(o),t.selection.scrollIntoView())},_f=t=>"fragmented"===t.type?t.fragments.join(""):t.content,IC=t=>{const e=ke("body",fR());return Pl(e,_f(t)),z(tn(e,"*[data-mce-bogus]"),cr),pp(e)},xf=(t,e)=>{return!(!t||!e)&&(o=e,!(_f(t)!==_f(o))||((n,o)=>IC(n)===IC(o))(t,e));var o},Sf=t=>0===t.get(),Uc=(t,e,n)=>{Sf(n)&&(t.typing=e)},FC=(t,e)=>{t.typing&&(Uc(t,!1,e),t.add())},UC=t=>({init:{bindEvents:Ct},undoManager:{beforeChange:(e,n)=>{return o=t,a=n,void(Sf(e)&&a.set(Tu(o.selection)));var o,a},add:(e,n,o,r,a,s)=>((i,l,c,d,u,m,p)=>{const f=Fc(i),h=W.extend(m||{},f);if(!Sf(d)||i.removed)return null;const g=l.data[c.get()];if(i.dispatch("BeforeAddUndo",{level:h,lastLevel:g,originalEvent:p}).isDefaultPrevented()||g&&xf(g,h))return null;l.data[c.get()]&&u.get().each(y=>{l.data[c.get()].beforeBookmark=y});const b=_k(i);if(b&&l.data.length>b){for(let y=0;y<l.data.length-1;y++)l.data[y]=l.data[y+1];l.data.length--,c.set(l.data.length)}h.bookmark=Tu(i.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(h),c.set(l.data.length-1);const v={level:h,lastLevel:g,originalEvent:p};return c.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",v),i.dispatch("change",v)):i.dispatch("AddUndo",v),h})(t,e,n,o,r,a,s),undo:(e,n,o)=>((r,a,s,i)=>{let l;return a.typing&&(a.add(),a.typing=!1,Uc(a,!1,s)),i.get()>0&&(i.set(i.get()-1),l=a.data[i.get()],Ef(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(t,e,n,o),redo:(e,n)=>((o,r,a)=>{let s;return r.get()<a.length-1&&(r.set(r.get()+1),s=a[r.get()],Ef(o,s,!1),o.setDirty(!0),o.dispatch("Redo",{level:s})),s})(t,e,n),clear:(e,n)=>{return o=t,a=n,(r=e).data=[],a.set(0),r.typing=!1,void o.dispatch("ClearUndos");var o,r,a},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return o=t,r=e,n.get()>0||r.typing&&r.data[0]&&!xf(Fc(o),r.data[0]);var o,r},hasRedo:(e,n)=>{return o=e,n.get()<o.data.length-1&&!o.typing;var o},transact:(e,n,o)=>{return s=o,FC(r=e,n),r.beforeChange(),r.ignore(s),r.add();var r,s},ignore:(e,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(e,n),extra:(e,n,o,r)=>((a,s,i,l,c)=>{if(s.transact(l)){const d=s.data[i.get()].bookmark,u=s.data[i.get()-1];Ef(a,u,!0),s.transact(c)&&(s.data[i.get()-1].beforeBookmark=d)}})(t,e,n,o,r)},formatter:{match:(e,n,o,r)=>Qm(t,e,n,o,r),matchAll:(e,n)=>((o,r,a)=>{const s=[],i={},l=o.selection.getStart();return o.dom.getParent(l,c=>{for(let d=0;d<r.length;d++){const u=r[d];!i[u]&&ho(o,c,u,a)&&(i[u]=!0,s.push(u))}},o.dom.getRoot()),s})(t,e,n),matchNode:(e,n,o,r)=>ho(t,e,n,o,r),canApply:e=>((n,o)=>{const r=n.formatter.get(o),a=n.dom;if(r&&n.selection.isEditable()){const s=n.selection.getStart(),i=uc(a,s);for(let l=r.length-1;l>=0;l--){const c=r[l];if(!kn(c))return!0;for(let d=i.length-1;d>=0;d--)if(a.is(i[d],c.selector))return!0}}return!1})(t,e),closest:e=>((n,o)=>{const r=a=>Mt(a,R(n.getBody()));return C.from(n.selection.getStart(!0)).bind(a=>Gm(R(a),s=>No(o,i=>{return ho(n,s.dom,c=i)?C.some(c):C.none();var c}),r)).getOrNull()})(t,e),apply:(e,n,o)=>jy(t,e,n,o),remove:(e,n,o,r)=>Uy(t,e,n,o,r),toggle:(e,n,o)=>((r,a,s,i)=>{const l=r.formatter.get(a);l&&(!Qm(r,a,s,i)||"toggle"in l[0]&&!l[0].toggle?jy(r,a,s,i):Uy(r,a,s,i))})(t,e,n,o),formatChanged:(e,n,o,r,a)=>{return((m,p,f,h,g,b)=>{const v=p.get();z(f.split(","),y=>{const E=Kt(v,y).getOrThunk(()=>{const _={withSimilar:{state:Ae(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ae(!1),similar:!1,callbacks:[]},withVars:[]};return v[y]=_,_}),w=()=>{const _=qy(m);return Vy(m,_,y,g,b).isSome()};if(ce(b)){const _=g?E.withSimilar:E.withoutSimilar;_.callbacks.push(h),1===_.callbacks.length&&_.state.set(w())}else E.withVars.push({state:Ae(w()),similar:g,vars:b,callback:h})}),p.set(v)})(t,i=e,l=n,c=o,r,a),{unbind:()=>((m,p,f)=>{const h=m.get();z(p.split(","),g=>Kt(h,g).each(b=>{h[g]={withSimilar:{...b.withSimilar,callbacks:gt(b.withSimilar.callbacks,v=>v!==f)},withoutSimilar:{...b.withoutSimilar,callbacks:gt(b.withoutSimilar.callbacks,v=>v!==f)},withVars:gt(b.withVars,v=>v.callback!==f)}})),m.set(h)})(i,l,c)};var i,l,c}},editor:{getContent:e=>{return o=e,C.from((n=t).getBody()).fold(G("tree"===o.format?new Ze("body",11):""),r=>((t,e,n)=>{let o;return o="raw"===e.format?W.trim(vn(ov(n,t.serializer.getTempAttrs()).innerHTML)):"text"===e.format?((r,a)=>{const s=r.getDoc(),i=lr(R(r.getBody())),l=ke("div",s);Et(l,"data-mce-bogus","all"),Dl(l,{position:"fixed",left:"-9999999px",top:"0"}),Pl(l,a.innerHTML),rv(l),av(l);const c=Id(u=i)?u:R(sr(u).dom.body);var u;be(c,l);const d=vn(l.dom.innerText);return Jt(l),d})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((r,a)=>{const s=We(r),i=new RegExp(`^(<${s}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${s}>[\r\n]*|<br \\/>[\r\n]*)$`);return a.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!ql(R(n))&&at(o)?W.trim(o):o})(n,o,r));var n,o},setContent:(e,n)=>{return r=e,a=n,C.from((o=t).getBody()).map(s=>Tc(r)?((i,l,c,d)=>{ry(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),c);const u=vr({validate:!1},i.schema).serialize(c),m=vn(ql(R(l))?u:W.trim(u));return Ym(i,m,d.no_selection),{content:c,html:m}})(o,s,r,a):((i,l,c,d)=>{if(0===(c=vn(c)).length||/^\s+$/.test(c)){const u='<br data-mce-bogus="1">';"TABLE"===l.nodeName?c="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+u+"</li>");const m=We(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),m.toLowerCase())?(c=u,c=i.dom.createHTML(m,_i(i),c)):c||(c=u),Ym(i,c,d.no_selection),{content:c,html:c}}{"raw"!==d.format&&(c=vr({validate:!1},i.schema).serialize(i.parser.parse(c,{isRootContent:!0,insert:!0})));const u=ql(R(l))?c:W.trim(c);return Ym(i,u,d.no_selection),{content:u,html:u}}})(o,s,r,a)).getOr({content:r,html:Tc(a.content)?"":a.content});var o,r,a},insertContent:(e,n)=>kA(t,e,n),addVisual:e=>((n,o)=>{const r=n.dom,a=q(o)?o:n.getBody();z(r.select("table,a",a),s=>{switch(s.nodeName){case"TABLE":const i=Rk(n),l=r.getAttrib(s,"border");l&&"0"!==l||!n.hasVisual?r.removeClass(s,i):r.addClass(s,i);break;case"A":if(!r.getAttrib(s,"href")){const c=r.getAttrib(s,"name")||s.id,d=mb(n);c&&n.hasVisual?r.addClass(s,d):r.removeClass(s,d)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((o,r,a={})=>{const s=(i=a,l=r,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return NC(o,s).fold(me,i=>{const l=((c,d)=>{if("text"===d.format)return C.from((u=c).selection.getRng()).map(m=>{var p;const f=C.from(u.dom.getParent(m.commonAncestorContainer,u.dom.isBlock)),h=u.getBody(),g=f.map(_=>_.nodeName).getOr("div").toLowerCase(),b=R(m.cloneContents());rv(b),av(b);const v=u.dom.add(h,g,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},b.dom),y=PC(v),E=vn(null!==(p=v.textContent)&&void 0!==p?p:"");if(u.dom.remove(v),Ic(E,0)||Ic(E,E.length-1)){const w=f.getOr(h),_=PC(w),k=_.indexOf(y);return-1===k?y:(Ic(_,k-1)?" ":"")+y+(Ic(_,k+y.length)?" ":"")}return y}).getOr("");var u;{const u=((m,p)=>{const f=m.selection.getRng(),h=m.dom.create("body"),g=m.selection.getSel(),b=Cm(m,qu(g)),v=p.contextual?((t,e,n)=>{const o=qb(e,t);return o.length>0?((t,e)=>{return(n=t,o=e[0],ni(o,"table",et(Mt,n))).bind(n=>{const o=e[0],r=e[e.length-1],a=(s=>{const i=wf(ta(s),0,[]);return z(tn(s,"tr"),(l,c)=>{z(tn(l,"td,th"),(d,u)=>{((m,p,f,h,g)=>{const b=TC(g,"rowspan"),v=TC(g,"colspan"),y=m.rows;for(let E=f;E<f+b;E++){y[E]||(y[E]=RC(ph(h),[]));for(let w=p;w<p+v;w++)y[E].cells[w]=E===f&&w===p?g:ta(g)}})(i,((m,p,f)=>{for(;iR(m,p,f);)p++;return p})(i,u,c),c,l,d)})}),wf(i.element,OC(i.rows),i.rows)})(n);return(s=a,i=o,l=r,BC(s,i).bind(c=>BC(s,l).map(d=>((u,m,p)=>{const f=m.x,h=m.y,g=p.x,b=p.y,v=h<b?DC(u,f,h,g,b):DC(u,f,b,g,h);return wf(u.element,OC(v),v)})(s,c,d)))).map(s=>cm([lR(s)]));var s,i,l}).getOrThunk(LC);var n,o})(t,o):(r=t,s=n,(a=e).length>0&&a[0].collapsed?LC():(i=r,c=s,((d,u)=>{const m=Ke(u,(p,f)=>(be(f,p),f),d);return u.length>0?cm([m]):m})(R((l=a[0]).cloneContents()),((t,e,n)=>{const o=R(e.commonAncestorContainer),r=Ho(o,t),a=gt(r,l=>n.isWrapper(Nt(l))),s=(c=e,fe(l=r,d=>"li"===Nt(d)&&Yu(d,c)).fold(G([]),d=>{return(u=l,fe(u,m=>"ul"===Nt(m)||"ol"===Nt(m))).map(u=>{const m=ke(Nt(u)),p=Wn(zd(u),(f,h)=>Dt(h,"list-style"));return Dl(m,p),[ke("li"),m]}).getOr([]);var u})),i=a.concat(s.length?s:(l=>Qa(l)?Xn(l).filter(vu).fold(G([]),c=>[l,c]):vu(l)?[l]:[])(o));var l,c;return At(i,ta)})(i,l,c))));var r,a,s,i,l,c})(R(m.getBody()),b,m.schema).dom:f.cloneContents();return v&&h.appendChild(v),m.selection.serializer.serialize(h,p)})(c,d);return"tree"===d.format?u:c.selection.isCollapsed()?"":u}})(o,i);return AC(o,l,i)})})(t,e,n)},autocompleter:{addDecoration:Ct,removeDecoration:Ct},raw:{getModel:()=>C.none()}}),bo=t=>bt(t.plugins,"rtc"),kf=t=>t.rtcInstance?t.rtcInstance:UC(t),ve=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},zC=t=>ve(t).init.bindEvents(),HC=t=>0===t.dom.length?(Jt(t),C.none()):C.some(t),jC=(t,e,n,o,r)=>{t.bind(a=>((o?Rm:Sc)(a.dom,o?a.dom.length:0,r),e.filter(Me).map(s=>((i,l,c,d,u)=>{const m=i.dom,p=l.dom,f=d?m.length:p.length;d?(Tm(m,p,u,!1,!d),c.setStart(p,f)):(Tm(p,m,u,!1,!d),c.setEnd(p,f))})(a,s,n,o,r)))).orThunk(()=>{return(s=e,i=o,s.filter(l=>Li.isBookmarkNode(l.dom)).bind(i?ei:ir)).or(e).filter(Me).map(s=>((i,l,c)=>{Xn(i).each(d=>{const u=i.dom;l&&Ui(d,F(u,0),c)?Sc(u,0,c):!l&&zi(d,F(u,u.length),c)&&Rm(u,u.length,c)})})(s,o,r));var s,i})},$C=(t,e,n)=>{if(bt(t,e)){const o=gt(t[e],r=>r!==n);0===o.length?delete t[e]:t[e]=o}},WC=t=>!(!t||!t.ownerDocument)&&Gn(R(t.ownerDocument),R(t)),VC=(t,e,n,o)=>{let r,a;const{selectorChangedWithUnbind:s}=((g,b)=>{let v,y;const E=(_,k)=>fe(k,S=>g.is(S,_)),w=_=>g.getParents(_,void 0,g.getRoot());return{selectorChangedWithUnbind:(_,k)=>(v||(v={},y={},b.on("NodeChange",S=>{const O=S.element,P=w(O),x={};Ft(v,(N,T)=>{E(T,P).each(U=>{y[T]||(z(N,j=>{j(!0,{node:U,selector:T,parents:P})}),y[T]=N),x[T]=N})}),Ft(y,(N,T)=>{x[T]||(delete y[T],z(N,U=>{U(!1,{node:O,selector:T,parents:P})}))})})),v[_]||(v[_]=[]),v[_].push(k),E(_,w(b.selection.getStart())).each(()=>{y[_]=v[_]}),{unbind:()=>{$C(v,_,k),$C(y,_,k)}})}})(t,o),i=(g,b)=>((v,y,E={})=>{const w=(_=E,k=y,{format:"html",..._,set:!0,selection:!0,content:k});var _,k;yf(v,w).each(_=>{const k=((O,P)=>{if("raw"!==P.format){const x=O.selection.getRng(),N=O.dom.getParent(x.commonAncestorContainer,O.dom.isBlock),T=N?{context:N.nodeName.toLowerCase()}:{},U=O.parser.parse(P.content,{forced_root_block:!1,...T,...P});return vr({validate:!1},O.schema).serialize(U)}return P.content})(v,_),S=v.selection.getRng();((O,P,x)=>{const N=C.from(P.firstChild).map(R),T=C.from(P.lastChild).map(R);O.deleteContents(),O.insertNode(P);const U=N.bind(ir).filter(Me).bind(HC),j=T.bind(ei).filter(Me).bind(HC);jC(U,N,O,!0,x),jC(j,T,O,!1,x),O.collapse(!1)})(S,S.createContextualFragment(k),v.schema),v.selection.setRng(S),Mi(v,S),Cf(v,k,_)})})(o,g,b),l=g=>{const b=d();b.collapse(!!g),u(b)},c=()=>e.getSelection?e.getSelection():e.document.selection,d=()=>{let g;const b=(y,E,w)=>{try{return E.compareBoundaryPoints(y,w)}catch{return-1}},v=e.document;if(q(o.bookmark)&&!fs(o)){const y=pm(o);if(y.isSome())return y.map(E=>Cm(o,[E])[0]).getOr(v.createRange())}try{const y=c();y&&!Il(y.anchorNode)&&(g=y.rangeCount>0?y.getRangeAt(0):v.createRange(),g=Cm(o,[g])[0])}catch{}if(g||(g=v.createRange()),si(g.startContainer)&&g.collapsed){const y=t.getRoot();g.setStart(y,0),g.setEnd(y,0)}return r&&a&&(0===b(g.START_TO_START,g,r)&&0===b(g.END_TO_END,g,r)?g=a:(r=null,a=null)),g},u=(g,b)=>{if(!((y=g)&&WC(y.startContainer)&&WC(y.endContainer)))return;var y;const v=c();if(g=o.dispatch("SetSelectionRange",{range:g,forward:b}).range,v){a=g;try{v.removeAllRanges(),v.addRange(g)}catch{}!1===b&&v.extend&&(v.collapse(g.endContainer,g.endOffset),v.extend(g.startContainer,g.startOffset)),r=v.rangeCount>0?v.getRangeAt(0):null}if(!g.collapsed&&g.startContainer===g.endContainer&&v?.setBaseAndExtent&&g.endOffset-g.startOffset<2&&g.startContainer.hasChildNodes()){const y=g.startContainer.childNodes[g.startOffset];y&&"IMG"===y.nodeName&&(v.setBaseAndExtent(g.startContainer,g.startOffset,g.endContainer,g.endOffset),v.anchorNode===g.startContainer&&v.focusNode===g.endContainer||v.setBaseAndExtent(y,0,y,1))}o.dispatch("AfterSetSelectionRange",{range:g,forward:b})},m=()=>{const g=c(),b=g?.anchorNode,v=g?.focusNode;if(!g||!b||!v||Il(b)||Il(v))return!0;const y=t.createRng(),E=t.createRng();try{y.setStart(b,g.anchorOffset),y.collapse(!0),E.setStart(v,g.focusOffset),E.collapse(!0)}catch{return!0}return y.compareBoundaryPoints(y.START_TO_START,E)<=0},p={dom:t,win:e,serializer:n,editor:o,expand:(g={type:"word"})=>u(ua(t).expand(d(),g)),collapse:l,setCursorLocation:(g,b)=>{const v=t.createRng();q(g)&&q(b)?(v.setStart(g,b),v.setEnd(g,b),u(v),l(!1)):(Gu(t,v,o.getBody(),!0),u(v))},getContent:g=>((b,v={})=>{return E=v.format?v.format:"html",w=v,ve(b).selection.getContent(E,w);var E,w})(o,g),setContent:i,getBookmark:(g,b)=>f.getBookmark(g,b),moveToBookmark:g=>f.moveToBookmark(g),select:(g,b)=>{return(v=t,y=g,E=b,C.from(y).bind(w=>C.from(w.parentNode).map(_=>{const k=v.nodeIndex(w),S=v.createRng();return S.setStart(_,k),S.setEnd(_,k+1),E&&(Gu(v,S,w,!0),Gu(v,S,w,!1)),S}))).each(u),g;var v,y,E},isCollapsed:()=>{const g=d(),b=c();return!(!g||g.item)&&(g.compareEndPoints?0===g.compareEndPoints("StartToEnd",g):!b||g.collapsed)},isEditable:()=>{if(o.mode.isReadOnly())return!1;const g=d(),b=o.getBody().querySelectorAll('[data-mce-selected="1"]');return b.length>0?$n(b,v=>t.isEditable(v.parentElement)):q0(t,g)},isForward:m,setNode:g=>(i(t.getOuterHTML(g)),g),getNode:()=>((g,b)=>{if(!b)return g;let v=b.startContainer,y=b.endContainer;const E=b.startOffset,w=b.endOffset;let _=b.commonAncestorContainer;b.collapsed||(v===y&&w-E<2&&v.hasChildNodes()&&(_=v.childNodes[E]),$(v)&&$(y)&&(v=v.length===E?X0(v.nextSibling,!0):v.parentNode,y=0===w?X0(y.previousSibling,!1):y.parentNode,v&&v===y&&(_=v)));const k=$(_)?_.parentNode:_;return Mo(k)?k:g})(o.getBody(),d()),getSel:c,setRng:u,getRng:d,getStart:g=>Y0(o.getBody(),d(),g),getEnd:g=>G0(o.getBody(),d(),g),getSelectedBlocks:(g,b)=>((v,y,E,w)=>{const _=[],k=v.getRoot(),S=v.getParent(E||Y0(k,y,y.collapsed),v.isBlock),O=v.getParent(w||G0(k,y,y.collapsed),v.isBlock);if(S&&S!==k&&_.push(S),S&&O&&S!==O){let P;const x=new Ne(S,k);for(;(P=x.next())&&P!==O;)v.isBlock(P)&&_.push(P)}return O&&S!==O&&O!==k&&_.push(O),_})(t,d(),g,b),normalize:()=>{const g=d(),b=c();if(!(qu(b).length>1)&&cc(o)){const v=hc(t,g);return v.each(y=>{u(y,m())}),v.getOr(g)}return g},selectorChanged:(g,b)=>(s(g,b),p),selectorChangedWithUnbind:s,getScrollContainer:()=>{let g,b=t.getRoot();for(;b&&"BODY"!==b.nodeName;){if(b.scrollHeight>b.clientHeight){g=b;break}b=b.parentNode}return g},scrollIntoView:(g,b)=>{var v;q(g)?((v=o).inline?FN:zN)(v,g,b):Mi(o,d(),b)},placeCaretAt:(g,b)=>u(S0(g,b,o.getDoc())),getBoundingClientRect:()=>{const g=d();return g.collapsed?F.fromRangeStart(g).getClientRects()[0]:g.getBoundingClientRect()},destroy:()=>{e=r=a=null,h.destroy()}},f=Li(p),h=C0(p,o);return p.bookmarkManager=f,p.controlSelection=h,p},gR=(t,e,n)=>{-1===W.inArray(e,n)&&(t.addAttributeFilter(n,(o,r)=>{let a=o.length;for(;a--;)o[a].attr(r,null)}),e.push(n))},qC=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},r=e&&e.dom?e.dom:qt.DOM,a=e&&e.schema?e.schema:ur(o),s=ps(o,a);return l=o,c=r,(i=s).addAttributeFilter("data-mce-tabindex",(d,u)=>{let m=d.length;for(;m--;){const p=d[m];p.attr("tabindex",p.attr("data-mce-tabindex")),p.attr(u,null)}}),i.addAttributeFilter("src,href,style",(d,u)=>{const m="data-mce-"+u,p=l.url_converter,f=l.url_converter_scope;let h=d.length;for(;h--;){const g=d[h];let b=g.attr(m);void 0!==b?(g.attr(u,b.length>0?b:null),g.attr(m,null)):(b=g.attr(u),"style"===u?b=c.serializeStyle(c.parseStyle(b),g.name):p&&(b=p.call(f,b,u,g.name)),g.attr(u,b.length>0?b:null))}}),i.addAttributeFilter("class",d=>{let u=d.length;for(;u--;){const m=d[u];let p=m.attr("class");p&&(p=p.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),m.attr("class",p.length>0?p:null))}}),i.addAttributeFilter("data-mce-type",(d,u,m)=>{let p=d.length;for(;p--;){const f=d[p];"bookmark"===f.attr("data-mce-type")&&!m.cleanup&&(C.from(f.firstChild).exists(g=>{var b;return!Kl(null!==(b=g.value)&&void 0!==b?b:"")})?f.unwrap():f.remove())}}),i.addNodeFilter("script,style",(d,u)=>{var m;const p=h=>h.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=d.length;for(;f--;){const h=d[f],g=h.firstChild,b=null!==(m=g?.value)&&void 0!==m?m:"";if("script"===u){const v=h.attr("type");v&&h.attr("type","mce-no/type"===v?null:v.replace(/^mce\-/,"")),"xhtml"===l.element_format&&g&&b.length>0&&(g.value="// <![CDATA[\n"+p(b)+"\n// ]]>")}else"xhtml"===l.element_format&&g&&b.length>0&&(g.value="\x3c!--\n"+p(b)+"\n--\x3e")}}),i.addNodeFilter("#comment",d=>{let u=d.length;for(;u--;){const m=d[u],p=m.value;l.preserve_cdata&&0===p?.indexOf("[CDATA[")?(m.name="#cdata",m.type=4,m.value=c.decode(p.replace(/^\[CDATA\[|\]\]$/g,""))):0===p?.indexOf("mce:protected ")&&(m.name="#text",m.type=3,m.raw=!0,m.value=unescape(p).substr(14))}}),i.addNodeFilter("xml:namespace,input",(d,u)=>{let m=d.length;for(;m--;){const p=d[m];7===p.type?p.remove():1===p.type&&("input"!==u||p.attr("type")||p.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",d=>{z(d,u=>{"format-caret"===u.attr("data-mce-type")&&(u.isEmpty(i.schema.getNonEmptyElements())?u.remove():u.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(d,u)=>{let m=d.length;for(;m--;)d[m].attr(u,null)}),l.remove_trailing_brs&&(d=l,m=i.schema,i.addNodeFilter("br",(p,f,h)=>{const g=W.extend({},m.getBlockElements()),b=m.getNonEmptyElements(),v=m.getWhitespaceElements();g.body=1;const y=E=>E.name in g||nu(m,E);for(let E=0,w=p.length;E<w;E++){let _=p[E],k=_.parent;if(k&&y(k)&&_===k.lastChild){let S=_.prev;for(;S;){const O=S.name;if("span"!==O||"bookmark"!==S.attr("data-mce-type")){"br"===O&&(_=null);break}S=S.prev}if(_&&(_.remove(),ji(m,b,v,k))){const O=m.getElementRule(k.name);O&&(O.removeEmpty?k.remove():O.paddEmpty&&Hm(d,h,y,k))}}else{let S=_;for(;k&&k.firstChild===S&&k.lastChild===S&&(S=k,!g[k.name]);)k=k.parent;if(S===k){const O=new Ze("#text",3);O.value=ye,_.replace(O)}}}})),{schema:a,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:(i,l={})=>{const c={format:"html",...l},d=(f=i,b=h=c,q(g=p=e)&&g.hasEventListeners("PreProcess")&&!b.no_events?((g,b,v)=>{let y;const E=g.dom;let w=b.cloneNode(!0);const _=document.implementation;if(_.createHTMLDocument){const k=_.createHTMLDocument("");W.each("BODY"===w.nodeName?w.childNodes:[w],S=>{k.body.appendChild(k.importNode(S,!0))}),w="BODY"!==w.nodeName?k.body.firstChild:k.body,y=E.doc,E.doc=k}return S={...v,node:w},g.dispatch("PreProcess",S),y&&(E.doc=y),w;var S})(p,f,h):f),u=((p,f,h)=>{const g=vn(h.getInner?f.innerHTML:p.getOuterHTML(f));return h.selection||ql(R(f))?g:W.trim(g)})(r,d,c),m=((p,f,h)=>{const g=h.selection?{forced_root_block:!1,...h}:h,b=p.parse(f,g);return(v=>{const y=w=>"br"===w?.name,E=v.lastChild;if(y(E)){const w=E.prev;y(w)&&(E.remove(),w.remove())}})(b),b})(s,u,c);var p,f,h,g,b;return"tree"===c.format?m:((p,f,h,g,b)=>{var w;return((y,E,w)=>{return!E.no_events&&y?(k=y,S={...E,content:w},k.dispatch("PostProcess",S)).content:w;var k,S})(p,b,(w=g,vr(f,h).serialize(w)))})(e,o,a,m,c)},addRules:a.addValidElements,setRules:a.setValidElements,addTempAttr:et(gR,s,n),getTempAttrs:G(n),getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter};var i,l,c,d,m})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Nf=(t,e,n={})=>{const o=(r=n,a=e,{format:"html",...r,set:!0,content:a});var r,a;return yf(t,o).map(r=>{const a=(i=r.content,l=r,kf(t).editor.setContent(i,l));var i,l;return Cf(t,a.html,r),a.content}).getOr(e)},hR="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),bR=[],vR="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),KC=[],YC=(t,e)=>{const n=gt(e,o=>bt(t,o));return Ot(n)},GC=(t,e)=>{const n=W.makeMap(t.plugins," "),o=gt(e,r=>bt(n,r));return Ot(o)},_R=t=>fe(KC,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),zc=qt.DOM,Hc=t=>C.from(t).each(e=>e.destroy()),jc=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>bt(t,e)}})(),hs=Xe.ModelManager,XC=(t,e)=>e.dom[t],ZC=(t,e)=>parseInt(io(e,t),10),xR=et(XC,"clientWidth"),SR=et(XC,"clientHeight"),kR=et(ZC,"margin-top"),NR=et(ZC,"margin-left"),QC=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},o=()=>C.from(e[0]),r=()=>{o().each(l=>{l.reposition()})},a=l=>{Or(e,c=>c===l).each(c=>{e.splice(c,1)})},s=(l,c=!0)=>{return t.removed||!(u=(d=t).inline?d.getBody():d.getContentAreaContainer(),C.from(u).map(R)).map(Wa).getOr(!1)?{}:(c&&t.dispatch("BeforeOpenNotification",{notification:l}),fe(e,d=>{return!((u=n().getArgs(d)).type!==(m=l).type||u.text!==m.text||u.progressBar||u.timeout||m.progressBar||m.timeout);var u,m}).getOrThunk(()=>{t.editorManager.setActive(t);const d=n().open(l,()=>{a(d)},()=>V0(t));return(u=>{e.push(u)})(d),r(),t.dispatch("OpenNotification",{notification:{...d}}),d}));var d,u},i=G(e);return(l=t).on("SkinLoaded",()=>{const c=uk(l);c&&s({text:c,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{z(e.slice(),c=>{n().close(c)})}),l.addShortcut("alt+F12","Focus to notification",()=>o().map(c=>R(c.getEl())).each(c=>F0(c))),{open:s,close:()=>{o().each(l=>{n().close(l),a(l),r()})},getNotifications:i};var l},bs=Xe.PluginManager,ba=Xe.ThemeManager,JC=t=>{let e=[];const n=()=>{const s=t.theme;return s&&s.getWindowManagerImpl?s.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},o=(s,i)=>(...l)=>i?i.apply(s,l):void 0,r=s=>{t.dispatch("CloseWindow",{dialog:s}),e=gt(e,i=>i!==s),0===e.length&&t.focus()},a=s=>{t.editorManager.setActive(t),yc(t),t.ui.show();const i=s();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{z(e,s=>{n().close(s)})}),{open:(s,i)=>a(()=>n().open(s,i,r)),openUrl:s=>a(()=>n().openUrl(s,r)),alert:(s,i,l)=>{const c=n();c.alert(s,o(l||c,i))},confirm:(s,i,l)=>{const c=n();c.confirm(s,o(l||c,i))},close:()=>{C.from(e[e.length-1]).each(s=>{n().close(s),r(s)})}}},t1=(t,e)=>{t.notificationManager.open({type:"error",text:e})},$c=(t,e)=>{t._skinLoaded?t1(t,e):t.on("SkinLoaded",()=>{t1(t,e)})},Xi=(t,e,n)=>{f0(t,e,{message:n}),console.error(n)},Zi=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,Wc=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},Af=t=>"content/"+t+"/content.css",e1=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`;return At(e,r=>tinymce.Resource.has(Af(r))?r:/^[a-z0-9\-]+$/i.test(r)&&!t.inline?`${n}/${r}/${o}`:t.documentBaseURI.toAbsolute(r))},n1=()=>{let t={};const e=(o,r)=>({status:o,resultUri:r}),n=o=>o in t;return{hasBlobUri:n,getResultUri:o=>{const r=t[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&1===t[o].status,isUploaded:o=>!!n(o)&&2===t[o].status,markPending:o=>{t[o]=e(1,null)},markUploaded:(o,r)=>{t[o]=e(2,r)},removeFailed:o=>{delete t[o]},destroy:()=>{t={}}}};let RR=0;const o1=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),r1=(t,e)=>((t,e)=>{const n={},o=(l,c)=>new Promise((d,u)=>{const m=new XMLHttpRequest;m.open("POST",e.url),m.withCredentials=e.credentials,m.upload.onprogress=f=>{c(f.loaded/f.total*100)},m.onerror=()=>{u("Image upload failed due to a XHR Transport error. Code: "+m.status)},m.onload=()=>{if(m.status<200||m.status>=300)return void u("HTTP Error: "+m.status);const f=JSON.parse(m.responseText);var h,g;f&&at(f.location)?d((g=f.location,(h=e.basePath)?h.replace(/\/$/,"")+"/"+g.replace(/^\//,""):g)):u("Invalid JSON: "+m.responseText)};const p=new FormData;p.append("file",l.blob(),l.filename()),m.send(p)}),r=kt(e.handler)?e.handler:o,a=(l,c)=>({url:c,blobInfo:l,status:!0}),s=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),i=(l,c)=>{W.each(n[l],d=>{d(c)}),delete n[l]};return{upload:(l,c)=>{return e.url||r!==o?(u=c,d=W.grep(d=l,m=>!t.isUploaded(m.blobUri())),Promise.all(W.map(d,m=>{return t.isPending(m.blobUri())?(p=>{const f=p.blobUri();return new Promise(h=>{n[f]=n[f]||[],n[f].push(h)})})(m):(f=r,h=u,t.markPending((p=m).blobUri()),new Promise(g=>{let b,v;try{const y=()=>{b&&(b.close(),v=Ct)},E=_=>{y(),t.markUploaded(p.blobUri(),_),i(p.blobUri(),a(p,_)),g(a(p,_))},w=_=>{y(),t.removeFailed(p.blobUri()),i(p.blobUri(),s(p,_)),g(s(p,_))};v=_=>{_<0||_>100||C.from(b).orThunk(()=>C.from(h).map(Bs)).each(k=>{b=k,k.progressBar.value(_)})},f(p,v).then(E,_=>{w(at(_)?{message:_}:_)})}catch(y){g(s(p,y))}}));var p,f,h}))):new Promise(d=>{d([])});var d,u}}})(e,{url:QS(t),basePath:JS(t),credentials:tk(t),handler:ek(t)}),a1={remove_similar:!0,inherit:!1},vs={selector:"td,th",...a1},BR={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...vs},tablecellverticalalign:{styles:{"vertical-align":"%value"},...vs},tablecellbordercolor:{styles:{borderColor:"%value"},...vs},tablecellclass:{classes:["%value"],...vs},tableclass:{selector:"table",classes:["%value"],...a1},tablecellborderstyle:{styles:{borderStyle:"%value"},...vs},tablecellborderwidth:{styles:{borderWidth:"%value"},...vs}},DR=G(BR),Vc=W.each,Tn=qt.DOM,Rf=t=>q(t)&&le(t),s1=(t,e)=>{const n=e&&e.schema||ur({}),o=s=>{const i=at(s)?{name:s,classes:[],attrs:{}}:s,l=Tn.create(i.name);return c=l,(d=i).classes.length>0&&Tn.addClass(c,d.classes.join(" ")),Tn.setAttribs(c,d.attrs),l;var c,d},r=(s,i,l)=>{let c;const d=i[0],u=Rf(d)?d.name:void 0,m=((h,g)=>{const b=n.getElementRule(h.nodeName.toLowerCase()),v=b?.parentsRequired;return!(!v||!v.length)&&(g&&Bt(v,g)?g:v[0])})(s,u);if(m)u===m?(c=d,i=i.slice(1)):c=m;else if(d)c=d,i=i.slice(1);else if(!l)return s;const p=c?o(c):Tn.create("div");p.appendChild(s),l&&W.each(l,h=>{const g=o(h);p.insertBefore(g,s)});const f=Rf(c)?c.siblings:void 0;return r(p,i,f)},a=Tn.create("div");if(t.length>0){const s=t[0],i=o(s),l=Rf(s)?s.siblings:void 0;a.appendChild(r(i,t.slice(1),l))}return a},LR=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=W.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,a,s,i)=>{switch(r){case"#":n.attrs.id=a;break;case".":n.classes.push(a);break;case":":-1!==W.inArray("checked disabled enabled read-only required".split(" "),a)&&(n.attrs[a]=a)}if("["===s){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},PR=(t,e)=>{let n="",o=pk(t);if(""===o)return"";const r=p=>at(p)?p.replace(/%(\w+)/g,""):"",a=(p,f)=>Tn.getStyle(f??t.getBody(),p,!0);if(at(e)){const p=t.formatter.get(e);if(!p)return"";e=p[0]}if("preview"in e){const p=e.preview;if(!1===p)return"";o=p||o}let s,i=e.block||e.inline||"span";const l=at(c=e.selector)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),W.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),p=>{const f=W.map(p.split(/(?:~\+|~|\+)/),LR),h=f.pop();return f.length&&(h.siblings=f),h}).reverse()):[];var c;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,s=s1(l,t)):s=s1([i],t);const d=Tn.select(i,s)[0]||s.firstChild;Vc(e.styles,(p,f)=>{const h=r(p);h&&Tn.setStyle(d,f,h)}),Vc(e.attributes,(p,f)=>{const h=r(p);h&&Tn.setAttrib(d,f,h)}),Vc(e.classes,p=>{const f=r(p);Tn.hasClass(d,f)||Tn.addClass(d,f)}),t.dispatch("PreviewFormats"),Tn.setStyles(s,{position:"absolute",left:-65535}),t.getBody().appendChild(s);const u=a("fontSize"),m=/px$/.test(u)?parseInt(u,10):0;return Vc(o.split(" "),p=>{let f=a(p,d);if(!("background-color"===p&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(f)&&(f=a(p),"#ffffff"===li(f).toLowerCase())||"color"===p&&"#000000"===li(f).toLowerCase())){if("font-size"===p&&/em|%$/.test(f)){if(0===m)return;f=parseFloat(f)/(/%$/.test(f)?100:1)*m+"px"}"border"===p&&f&&(n+="padding:0 2px;"),n+=p+":"+f+";"}}),t.dispatch("AfterPreviewFormats"),Tn.remove(s),n},i1=t=>{const e=(o=>{const r={},a=(s,i)=>{s&&(at(s)?(Yt(i)||(i=[i]),z(i,l=>{ce(l.deep)&&(l.deep=!kn(l)),ce(l.split)&&(l.split=!kn(l)||Ce(l)),ce(l.remove)&&kn(l)&&!Ce(l)&&(l.remove="none"),kn(l)&&Ce(l)&&(l.mixed=!0,l.block_expand=!0),at(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[s]=i):Ft(s,(l,c)=>{a(c,l)}))};return a((s=>{const i=s.dom,l=s.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:d=>{i.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:d=>{i.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const d={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[m,d,u]:[d,m,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(d,u,m)=>ot(d)&&d.hasAttribute("href"),onformat:(d,u,m)=>{W.each(m,(p,f)=>{i.setAttrib(d,f,p)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":d=>{var u;return null!==(u=d?.customValue)&&void 0!==u?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return W.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),d=>{c[d]={block:d,remove:"all"}}),c})(o)),a(DR()),a(gk(o)),{get:s=>q(s)?r[s]:r,has:s=>bt(r,s),register:a,unregister:s=>(s&&r[s]&&delete r[s],r)}})(t),n=Ae({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(o=t).on("mouseup keydown",r=>{var a;((s,i,l)=>{const c=s.selection,d=s.getBody();ef(s,null,l),8!==i&&46!==i||!c.isCollapsed()||c.getStart().innerHTML!==$i||ef(s,ia(d,c.getStart()),!0),37!==i&&39!==i||ef(s,ia(d,c.getStart()),!0)})(o,r.keyCode,(a=o.selection.getRng().endContainer,$(a)&&Ba(a.data,ye)))}),bo(t)||((o,r)=>{o.set({}),r.on("NodeChange",a=>{Ky(r,a.element,o.get())}),r.on("FormatApply FormatRemove",a=>{const s=C.from(a.node).map(i=>Bi(i)?i:i.startContainer).bind(i=>ot(i)?C.some(i):C.from(i.parentElement)).getOrThunk(()=>Wy(r));Ky(r,s,o.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(o,r,a)=>{var i,l,c;i=o,l=r,c=a,ve(t).formatter.apply(i,l,c)},remove:(o,r,a,s)=>{var l,c,d,u;l=o,c=r,d=a,u=s,ve(t).formatter.remove(l,c,d,u)},toggle:(o,r,a)=>{var i,l,c;i=o,l=r,c=a,ve(t).formatter.toggle(i,l,c)},match:(o,r,a,s)=>{return l=o,c=r,d=a,u=s,ve(t).formatter.match(l,c,d,u);var l,c,d,u},closest:o=>{return a=o,ve(t).formatter.closest(a);var a},matchAll:(o,r)=>{return s=o,i=r,ve(t).formatter.matchAll(s,i);var s,i},matchNode:(o,r,a,s)=>{return l=o,c=r,d=a,u=s,ve(t).formatter.matchNode(l,c,d,u);var l,c,d,u},canApply:o=>{return a=o,ve(t).formatter.canApply(a);var a},formatChanged:(o,r,a,s)=>{return l=n,c=o,d=r,u=a,m=s,ve(t).formatter.formatChanged(l,c,d,u,m);var l,c,d,u,m},getCssText:et(PR,t)};var o},l1=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},c1=t=>{const e=Fo(),n=Ae(0),o=Ae(0),r={data:[],typing:!1,beforeChange:()=>{var s,i;s=n,i=e,ve(t).undoManager.beforeChange(s,i)},add:(a,s)=>{return l=r,c=o,d=n,u=e,m=a,p=s,ve(t).undoManager.add(l,c,d,u,m,p);var l,c,d,u,m,p},dispatchChange:()=>{t.setDirty(!0);const a=Fc(t);a.bookmark=Tu(t.selection),t.dispatch("change",{level:a,lastLevel:xt(r.data,o.get()).getOrUndefined()})},undo:()=>{return s=r,i=n,l=o,ve(t).undoManager.undo(s,i,l);var s,i,l},redo:()=>{return s=o,i=r.data,ve(t).undoManager.redo(s,i);var s,i},clear:()=>{var s,i;s=r,i=o,ve(t).undoManager.clear(s,i)},reset:()=>{var s;s=r,ve(t).undoManager.reset(s)},hasUndo:()=>{return s=r,i=o,ve(t).undoManager.hasUndo(s,i);var s,i},hasRedo:()=>{return s=r,i=o,ve(t).undoManager.hasRedo(s,i);var s,i},transact:a=>{return i=r,l=n,c=a,ve(t).undoManager.transact(i,l,c);var i,l,c},ignore:a=>{var i,l;i=n,l=a,ve(t).undoManager.ignore(i,l)},extra:(a,s)=>{var l,c,d,u;l=r,c=o,d=a,u=s,ve(t).undoManager.extra(l,c,d,u)}};return bo(t)||((a,s,i)=>{const l=Ae(!1),c=d=>{Uc(s,!1,i),s.add({},d)};a.on("init",()=>{s.add()}),a.on("BeforeExecCommand",d=>{l1(d.command)||(FC(s,i),s.beforeChange())}),a.on("ExecCommand",d=>{l1(d.command)||c(d)}),a.on("ObjectResizeStart cut",()=>{s.beforeChange()}),a.on("SaveContent ObjectResized blur",c),a.on("dragend",c),a.on("keyup",d=>{const u=d.keyCode;if(d.isDefaultPrevented())return;const m=Rt.os.isMacOS()&&"Meta"===d.key;(u>=33&&u<=36||u>=37&&u<=40||45===u||d.ctrlKey||m)&&(c(),a.nodeChanged()),46!==u&&8!==u||a.nodeChanged(),l.get()&&s.typing&&!xf(Fc(a),s.data[0])&&(a.isDirty()||a.setDirty(!0),a.dispatch("TypingUndo"),l.set(!1),a.nodeChanged())}),a.on("keydown",d=>{const u=d.keyCode;if(!d.isDefaultPrevented()){if(!(u>=33&&u<=36||u>=37&&u<=40||45===u))return!(u<16||u>20)||224===u||91===u||s.typing||d.ctrlKey&&!d.altKey||d.metaKey?void((Rt.os.isMacOS()?d.metaKey:d.ctrlKey&&!d.altKey)&&s.beforeChange()):(s.beforeChange(),Uc(s,!0,i),s.add({},d),void l.set(!0));s.typing&&c(d)}}),a.on("mousedown",d=>{s.typing&&c(d)}),a.on("input",d=>{var u,m;d.inputType&&("insertReplacementText"===d.inputType||"insertText"===(u=d).inputType&&null===u.data||"insertFromPaste"===(m=d).inputType||"insertFromDrop"===m.inputType)&&c(d)}),a.on("AddUndo Undo Redo ClearUndos",d=>{d.isDefaultPrevented()||a.nodeChanged()})})(t,r,n),(a=t).addShortcut("meta+z","","Undo"),a.addShortcut("meta+y,meta+shift+z","","Redo"),r;var a},MR=[9,27,Q.HOME,Q.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Q.DOWN,Q.UP,Q.LEFT,Q.RIGHT].concat(Rt.browser.isFirefox()?[224]:[]),d1="data-mce-placeholder",u1=t=>"keydown"===t.type||"keyup"===t.type,m1=t=>{const e=t.keyCode;return e===Q.BACKSPACE||e===Q.DELETE},IR=(t,e)=>({from:t,to:e}),Tf=(t,e)=>{const n=R(t),o=R(e.container());return Nc(n,o).map(r=>((a,s)=>({block:a,position:s}))(r,e))},f1=(t,e)=>$r(e,n=>vi(n)||Un(n.dom),n=>Mt(n,t)).filter(Ge).getOr(t),g1=(t,e)=>{const n=((o,r)=>{const a=je(o);return Or(a,s=>r.isBlock(Nt(s))).fold(G(a),s=>a.slice(0,s))})(t,e);return z(n,Jt),n},p1=(t,e,n)=>{const o=Ho(n,e);return fe(o.reverse(),r=>$e(t,r)).each(Jt)},FR=(t,e,n,o,r)=>{if($e(o,n))return mr(n),Ve(n.dom);var s;s=o,0===gt(sp(r),l=>!$e(s,l)).length&&$e(o,e)&&dn(r,ke("br"));const a=un(n.dom,F.before(r.dom));return z(g1(e,o),s=>{dn(r,s)}),p1(o,t,e),a},UR=(t,e,n,o)=>{if($e(o,n)){if($e(o,e)){const s=Zo((i=>{const l=(c,d)=>Ld(c).fold(()=>d,u=>o.isInline(Nt(u))?l(u,d.concat(ta(u))):d);return l(i,[])})(n),(i,l)=>(gp(i,l),l),Ja());qa(e),be(e,s)}return Jt(n),Ve(e.dom)}const r=zn(n.dom);return z(g1(e,o),a=>{be(n,a)}),p1(o,t,e),r},h1=(t,e)=>{is(t,e.dom).bind(n=>C.from(n.getNode())).map(R).filter(na).each(Jt)},b1=(t,e,n,o)=>{return h1(!0,e),h1(!1,n),(r=e,a=n,Gn(a,r)?((s,i)=>{const l=Ho(i,s);return C.from(l[l.length-1])})(a,r):C.none()).fold(et(UR,t,e,n,o),et(FR,t,e,n,o));var r,a},v1=(t,e,n,o,r)=>e?b1(t,o,n,r):b1(t,n,o,r),Of=(t,e)=>{const n=R(t.getBody());return(r=t.schema,a=n.dom,s=e,i=t.selection.getRng(),i.collapsed?((l,c,d,u)=>{const m=Tf(c,F.fromRangeStart(u)),p=m.bind(f=>_n(d,c,f.position).bind(h=>Tf(c,h).map(g=>{return b=l,v=c,y=d,ae((E=g).position.getNode())&&!$e(b,E.block)?is(!1,E.block.dom).bind(w=>w.isEqual(E.position)?_n(y,v,w).bind(_=>Tf(v,_)):C.some(E)).getOr(E):E;var b,v,y,E})));return Se(m,p,IR).filter(f=>{return!Mt((h=f).from.block,h.to.block)&&((h,g)=>{const b=R(h);return Mt(f1(b,g.from.block),f1(b,g.to.block))})(c,f)&&(h=>!1===Xt(h.from.block.dom)&&!1===Xt(h.to.block.dom))(f)&&(h=>{const g=b=>vh(b)||Jd(b.dom)||Qa(b);return g(h.from.block)&&g(h.to.block)})(f)&&(h=>!(Gn(h.to.block,h.from.block)||Gn(h.from.block,h.to.block)))(f);var h})})(r,a,s,i):C.none()).map(r=>()=>{v1(n,e,r.from.block,r.to.block,t.schema).each(a=>{t.selection.setRng(a.toRange())})});var r,a,s,i},y1=(t,e)=>{const n=R(e),o=et(Mt,t);return Lo(n,vi,o).isSome()},Bf=(t,e)=>t.selection.isCollapsed()?C.none():(t=>{const e=R(t.getBody());return((n,o)=>{const r=un(n.dom,F.fromRangeStart(o)).isNone(),a=nn(n.dom,F.fromRangeEnd(o)).isNone();return!(y1(s=n,(i=o).startContainer)||y1(s,i.endContainer))&&r&&a;var s,i})(e,t.selection.getRng())?(n=t,C.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,o,r)=>{const a=o.getRng();return Se(Nc(n,R(a.startContainer)),Nc(n,R(a.endContainer)),(s,i)=>Mt(s,i)?C.none():C.some(()=>{a.deleteContents(),v1(n,!0,s,i,r).each(l=>{o.setRng(l.toRange())})})).getOr(C.none())})(e,t.selection,t.schema);var n})(t),jo=(t,e,n,o,r)=>C.from(e._selectionOverrides.showCaret(t,n,o,r)),Qi=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?C.none():C.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(e)),Df=(t,e,n)=>e.collapsed?((o,r,a)=>{const s=Uu(1,o.getBody(),r),i=F.fromRangeStart(s),l=i.getNode();if(Si(l))return jo(1,o,l,!i.isAtEnd(),!1);const c=i.getNode(!0);if(Si(c))return jo(1,o,c,!1,!1);const d=ga(o.dom.getRoot(),i.getNode());return Si(d)?jo(1,o,d,!1,a):C.none()})(t,e,n).getOr(e):e,HR=t=>Cr(t)||Ii(t),jR=t=>wr(t)||Fi(t),C1=(t,e,n,o,r,a)=>{var s,i;jo(o,t,a.getNode(!r),r,!0).each(s=>{if(e.collapsed){const i=e.cloneRange();r?i.setEnd(s.startContainer,s.startOffset):i.setStart(s.endContainer,s.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(s)}),s=t.dom,$(i=n)&&0===i.data.length&&s.remove(i)},Lf=(t,e)=>((n,o)=>{const r=n.selection.getRng();if(!$(r.commonAncestorContainer))return C.none();const a=o?Te.Forwards:Te.Backwards,s=go(n.getBody()),i=et(zu,o?s.next:s.prev),l=o?HR:jR,c=Ti(a,n.getBody(),r),d=i(c),u=d&&An(o,d);if(!u||!ac(c,u))return C.none();if(l(u))return C.some(()=>C1(n,r,c.getNode(),a,o,u));const m=i(u);return m&&l(m)&&ac(u,m)?C.some(()=>C1(n,r,c.getNode(),a,o,m)):C.none()})(t,e),Pf=(t,e)=>{const n=t.getBody();return e?Ve(n).filter(Cr):zn(n).filter(wr)},Mf=t=>{const e=t.selection.getRng();return!e.collapsed&&(Pf(t,!0).exists(n=>n.isEqual(F.fromRangeStart(e)))||Pf(t,!1).exists(n=>n.isEqual(F.fromRangeEnd(e))))},On=uo([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),w1=(t,e,n,o)=>_n(e,t,n).bind(r=>{return a=r.getNode(),q(a)&&(vi(R(a))||Qa(R(a)))||((s,i,l,c,d)=>{const u=m=>d.isInline(m.nodeName.toLowerCase())&&!mo(l,c,s);return Tb(!i,l).fold(()=>Tb(i,c).fold(Gt,u),u)})(t,e,n,r,o)?C.none():e&&Xt(r.getNode())||!e&&Xt(r.getNode(!0))?((s,i,l,c,d)=>{const u=d.getNode(!l);return Nc(R(i),R(c.getNode())).map(m=>$e(s,m)?On.remove(m.dom):On.moveToElement(u)).orThunk(()=>C.some(On.moveToElement(u)))})(o,t,e,n,r):e&&wr(n)||!e&&Cr(n)?C.some(On.moveToPosition(r)):C.none();var a}),E1=(t,e)=>C.from(ga(t.getBody(),e)),_1=t=>{const e=t.dom,n=t.selection,o=ga(t.getBody(),n.getNode());if(Un(o)&&e.isBlock(o)&&e.isEmpty(o)){const r=e.create("br",{"data-mce-bogus":"1"});e.setHTML(o,""),o.appendChild(r),n.setRng(F.before(r).toRange())}return!0},If=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return E1(t,n).filter(Xt).fold(()=>((o,r,a,s)=>{const i=Uu(r?1:-1,o,a),l=F.fromRangeStart(i),c=R(o);return!r&&wr(l)?C.some(On.remove(l.getNode(!0))):r&&Cr(l)?C.some(On.remove(l.getNode())):!r&&Cr(l)&&xc(c,l,s)?wv(c,l,s).map(d=>On.remove(d.getNode())):r&&wr(l)&&km(c,l,s)?lA(c,l,s).map(d=>On.remove(d.getNode())):(d=o,p=s,((f,h)=>{const g=h.getNode(!f),b=f?"after":"before";return ot(g)&&g.getAttribute("data-mce-caret")===b})(u=r,m=l)?(f=u,h=m.getNode(!u),ue(h)?C.none():f&&Xt(h.nextSibling)?C.some(On.moveToElement(h.nextSibling)):!f&&Xt(h.previousSibling)?C.some(On.moveToElement(h.previousSibling)):C.none()).orThunk(()=>w1(d,u,m,p)):w1(d,u,m,p).bind(f=>((h,g,b)=>b.fold(v=>C.some(On.remove(v)),v=>C.some(On.moveToElement(v)),v=>mo(g,v,h)?C.none():C.some(On.moveToPosition(v))))(d,m,f)));var d,u,m,p,f,h})(t.getBody(),e,t.selection.getRng(),t.schema).map(o=>()=>o.fold(((r,a)=>s=>(r._selectionOverrides.hideFakeCaret(),ma(r,a,R(s)),!0))(t,e),((r,a)=>s=>{const i=a?F.before(s):F.after(s);return r.selection.setRng(i.toRange()),!0})(t,e),(r=>a=>(r.selection.setRng(a.toRange()),!0))(t))),()=>C.some(Ct))})(t,e):((n,o)=>{const r=n.selection.getNode();return Xt(r)&&!Ul(r)?E1(n,r.parentNode).filter(Xt).fold(()=>C.some(()=>{var a;a=R(n.getBody()),z(tn(a,".mce-offscreen-selection"),Jt),ma(n,o,R(n.selection.getNode())),Om(n)}),()=>C.some(Ct)):Mf(n)?C.some(()=>{$v(n,n.selection.getRng(),R(n.getBody()))}):C.none()})(t,e),x1=t=>t.hasOwnProperty("text"),S1=t=>t.hasOwnProperty("marker"),k1=(t,e)=>{const n=(r,a)=>{if($(r))return{text:r,offset:a};{const s=e(),i=r.childNodes;return a<i.length?(r.insertBefore(s,i[a]),{marker:s,before:!0}):(r.appendChild(s),{marker:s,before:!1})}},o=n(t.endContainer,t.endOffset);return{start:n(t.startContainer,t.startOffset),end:o}},N1=t=>{var e,n;const{start:o,end:r}=t,a=new window.Range;return x1(o)?a.setStart(o.text,o.offset):S1(o)&&(o.before?a.setStartBefore(o.marker):a.setStartAfter(o.marker),null===(e=o.marker.parentNode)||void 0===e||e.removeChild(o.marker)),x1(r)?a.setEnd(r.text,r.offset):S1(r)&&(r.before?a.setEndBefore(r.marker):a.setEndAfter(r.marker),null===(n=r.marker.parentNode)||void 0===n||n.removeChild(r.marker)),a},Ff=(t,e)=>{var n;const o=t.dom,r=o.getParent(t.selection.getStart(),o.isBlock),a=o.getParent(t.selection.getEnd(),o.isBlock),s=t.getBody();if("div"===(null===(n=r?.nodeName)||void 0===n?void 0:n.toLowerCase())&&r&&a&&r===s.firstChild&&a===s.lastChild&&!o.isEmpty(s)){const i=r.cloneNode(!1);return C.some(()=>{if(e?zv(t):kc(t),s.firstChild!==r){const c=k1(t.selection.getRng(),()=>document.createElement("span"));Array.from(s.childNodes).forEach(d=>i.appendChild(d)),s.appendChild(i),t.selection.setRng(N1(c))}})}return C.none()},Uf=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=F.fromRangeStart(n.selection.getRng());return _n(o,n.getBody(),r).filter(a=>o?oA(a):rA(a)).bind(a=>Fu(o?0:-1,a)).map(a=>()=>n.selection.select(a))})(t,e):C.none(),ys=$,A1=t=>ys(t)&&t.data[0]===Re,R1=t=>ys(t)&&t.data[t.data.length-1]===Re,T1=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(Re)},qc=(t,e)=>t?(n=>{var o;if(ys(n.previousSibling))return R1(n.previousSibling)||n.previousSibling.appendData(Re),n.previousSibling;if(ys(n))return A1(n)||n.insertData(0,Re),n;{const r=T1(n);return null===(o=n.parentNode)||void 0===o||o.insertBefore(r,n),r}})(e):(n=>{var o,r;if(ys(n.nextSibling))return A1(n.nextSibling)||n.nextSibling.insertData(0,Re),n.nextSibling;if(ys(n))return R1(n)||n.appendData(Re),n;{const a=T1(n);return n.nextSibling?null===(o=n.parentNode)||void 0===o||o.insertBefore(a,n.nextSibling):null===(r=n.parentNode)||void 0===r||r.appendChild(a),a}})(e),WR=et(qc,!0),VR=et(qc,!1),O1=(t,e)=>$(t.container())?qc(e,t.container()):qc(e,t.getNode()),B1=(t,e)=>{const n=e.get();return n&&t.container()===n&&fr(n)},zf=(t,e)=>e.fold(n=>{aa(t.get());const o=WR(n);return t.set(o),C.some(F(o,o.length-1))},n=>Ve(n).map(o=>{if(B1(o,t)){const r=t.get();return F(r,1)}{aa(t.get());const r=O1(o,!0);return t.set(r),F(r,1)}}),n=>zn(n).map(o=>{if(B1(o,t)){const r=t.get();return F(r,r.length-1)}{aa(t.get());const r=O1(o,!1);return t.set(r),F(r,r.length-1)}}),n=>{aa(t.get());const o=VR(n);return t.set(o),C.some(F(o,1))}),D1=(t,e)=>{for(let n=0;n<t.length;n++){const o=t[n].apply(null,e);if(o.isSome())return o}return C.none()},Qe=uo([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),L1=(t,e)=>hr(e,t)||t,qR=(t,e,n)=>{const o=Iv(n),r=L1(e,o.container());return Er(t,r,o).fold(()=>nn(r,o).bind(et(Er,t,r)).map(a=>Qe.before(a)),C.none)},KR=(t,e)=>null===ia(t,e),P1=(t,e,n)=>Er(t,e,n).filter(et(KR,e)),YR=(t,e,n)=>{const o=Fv(n);return P1(t,e,o).bind(r=>un(r,o).isNone()?C.some(Qe.start(r)):C.none())},GR=(t,e,n)=>{const o=Iv(n);return P1(t,e,o).bind(r=>nn(r,o).isNone()?C.some(Qe.end(r)):C.none())},XR=(t,e,n)=>{const o=Fv(n),r=L1(e,o.container());return Er(t,r,o).fold(()=>un(r,o).bind(et(Er,t,r)).map(a=>Qe.after(a)),C.none)},M1=t=>!Mv(Hf(t)),vo=(t,e,n)=>D1([qR,YR,GR,XR],[t,e,n]).filter(M1),Hf=t=>t.fold(me,me,me,me),I1=t=>t.fold(G("before"),G("start"),G("end"),G("after")),Kc=t=>t.fold(Qe.before,Qe.before,Qe.after,Qe.after),jf=t=>t.fold(Qe.start,Qe.start,Qe.end,Qe.end),ZR=(t,e,n,o,r,a)=>Se(Er(e,n,o),Er(e,n,r),(s,i)=>s!==i&&((l,c,d)=>{const u=hr(c,l),m=hr(d,l);return q(u)&&u===m})(n,s,i)?Qe.after(t?s:i):a).getOr(a),QR=(t,e)=>t.fold(se,n=>{return r=e,!(I1(o=n)===I1(r)&&Hf(o)===Hf(r));var o,r}),JR=(t,e)=>t?e.fold(de(C.some,Qe.start),C.none,de(C.some,Qe.after),C.none):e.fold(C.none,de(C.some,Qe.before),C.none,de(C.some,Qe.end)),F1=(t,e,n)=>{const o=t?1:-1;return e.setRng(F(n.container(),n.offset()+o).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var yo;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(yo||(yo={}));const Yc=(t,e)=>t===Te.Backwards?Br(e):e,tT=(t,e,n)=>t===Te.Forwards?e.next(n):e.prev(n),eT=(t,e,n,o)=>ae(o.getNode(e===Te.Forwards))?yo.Br:!1===mo(n,o)?yo.Block:yo.Wrap,U1=(t,e,n,o)=>{const r=go(n);let a=o;const s=[];for(;a;){const i=tT(e,r,a);if(!i)break;if(ae(i.getNode(!1)))return e===Te.Forwards?{positions:Yc(e,s).concat([i]),breakType:yo.Br,breakAt:C.some(i)}:{positions:Yc(e,s),breakType:yo.Br,breakAt:C.some(i)};if(i.isVisible()){if(t(a,i)){const l=eT(0,e,a,i);return{positions:Yc(e,s),breakType:l,breakAt:C.some(i)}}s.push(i),a=i}else a=i}return{positions:Yc(e,s),breakType:yo.Eol,breakAt:C.none()}},z1=(t,e,n,o)=>e(n,o).breakAt.map(r=>{const a=e(n,r).positions;return t===Te.Backwards?a.concat(r):[r].concat(a)}).getOr([]),$f=(t,e)=>Ke(t,(n,o)=>n.fold(()=>C.some(o),r=>Se(It(r.getClientRects()),It(o.getClientRects()),(a,s)=>{const i=Math.abs(e-a.left);return Math.abs(e-s.left)<=i?o:r}).or(n)),C.none()),Gc=(t,e)=>It(e.getClientRects()).bind(n=>$f(t,n.left)),Ji=et(U1,F.isAbove,-1),tl=et(U1,F.isBelow,1),H1=et(z1,-1,Ji),j1=et(z1,1,tl),$1=(t,e)=>Ji(t,e).breakAt.isNone(),W1=(t,e)=>tl(t,e).breakAt.isNone(),nT=(t,e)=>Gc(H1(t,e),e),oT=(t,e)=>Gc(j1(t,e),e),rT=Xt,V1=(t,e)=>Math.abs(t.left-e),q1=(t,e)=>Math.abs(t.right-e),K1=(t,e)=>Ta(t,(n,o)=>{const r=Math.min(V1(n,e),q1(n,e)),a=Math.min(V1(o,e),q1(o,e));return a===r&&Vn(o,"node")&&rT(o.node)||a<r?o:n}),aT=t=>{const e=n=>At(n,o=>{const r=oa(o);return r.node=t,r});if(ot(t))return e(t.getClientRects());if($(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},Y1=t=>an(t,aT);var el;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(el||(el={}));const G1=(t,e,n,o,r,a)=>{let s=0;const i=[],l=u=>{let m=Y1([u]);-1===t&&(m=m.reverse());for(let p=0;p<m.length;p++){const f=m[p];if(!n(f,c)){if(i.length>0&&e(f,qn(i))&&s++,f.line=s,r(f))return!0;i.push(f)}}return!1},c=qn(a.getClientRects());if(!c)return i;const d=a.getNode();return d&&(l(d),((u,m,p,f)=>{let h=f;for(;h=Ni(h,u,Nh,m);)if(p(h))return})(t,o,l,d)),i},sT=et(G1,el.Up,yi,Ci),iT=et(G1,el.Down,Ci,yi),X1=t=>qn(t.getClientRects()),Z1=t=>e=>e.line>t,Wf=t=>e=>e.line===t,$o=(t,e)=>{t.selection.setRng(e),Mi(t,t.selection.getRng())},Vf=(t,e,n)=>C.some(Df(t,e,n)),Q1=(t,e,n,o,r,a)=>{const s=e===Te.Forwards,i=go(t.getBody()),l=et(zu,s?i.next:i.prev),c=s?o:r;if(!n.collapsed){const f=Xl(n);if(a(f))return jo(e,t,f,e===Te.Backwards,!1);if(Mf(t)){const h=n.cloneRange();return h.collapse(e===Te.Backwards),C.from(h)}}const d=Ti(e,t.getBody(),n);if(c(d))return Qi(t,d.getNode(!s));let u=l(d);const m=Ch(n);if(!u)return m?C.some(n):C.none();if(u=An(s,u),c(u))return jo(e,t,u.getNode(!s),s,!1);const p=l(u);return p&&c(p)&&ac(u,p)?jo(e,t,p.getNode(!s),s,!1):m?Vf(t,u.toRange(),!1):C.none()},J1=(t,e,n,o,r,a)=>{const s=Ti(e,t.getBody(),n),i=qn(s.getClientRects()),l=e===el.Down,c=t.getBody();if(!i)return C.none();if(Mf(t)){const h=l?F.fromRangeEnd(n):F.fromRangeStart(n);return(l?oT:nT)(c,h).orThunk(()=>C.from(h)).map(g=>g.toRange())}const d=(l?iT:sT)(c,Z1(1),s),u=gt(d,Wf(1)),m=i.left,p=K1(u,m);if(p&&a(p.node)){const h=Math.abs(m-p.left),g=Math.abs(m-p.right);return jo(e,t,p.node,h<g,!1)}let f;if(f=o(s)?s.getNode():r(s)?s.getNode(!0):Xl(n),f){const h=((b,v,y,E)=>{const w=go(v);let _,k,S,O;const P=[];let x=0;1===b?(_=w.next,k=Ci,S=yi,O=F.after(E)):(_=w.prev,k=yi,S=Ci,O=F.before(E));const N=X1(O);do{if(!O.isVisible())continue;const T=X1(O);if(S(T,N))continue;P.length>0&&k(T,qn(P))&&x++;const U=oa(T);if(U.position=O,U.line=x,y(U))return P;P.push(U)}while(O=_(O));return P})(e,c,Z1(1),f);let g=K1(gt(h,Wf(1)),m);if(g||(g=qn(gt(h,Wf(0))),g))return Vf(t,g.position.toRange(),!1)}return 0===u.length?qf(t,l).filter(l?r:o).map(h=>Df(t,h.toRange(),!1)):C.none()},qf=(t,e)=>{const n=t.selection.getRng(),o=e?F.fromRangeEnd(n):F.fromRangeStart(n),r=(a=o.container(),s=t.getBody(),Lo(R(a),i=>mN(i.dom),i=>i.dom===s).map(i=>i.dom).getOr(s));var a,s;if(e){const i=tl(r,o);return pe(i.positions)}{const i=Ji(r,o);return It(i.positions)}},tw=(t,e,n)=>qf(t,e).filter(n).exists(o=>(t.selection.setRng(o.toRange()),!0)),Xc=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},ew=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},nw=(t,e,n)=>zf(e,n).map(o=>(Xc(t,o),n)),ow=(t,e,n)=>!!xi(t)&&((t,e,n)=>{const o=t.getBody(),r=((a,s,i)=>{const l=F.fromRangeStart(a);if(a.collapsed)return l;{const c=F.fromRangeEnd(a);return i?un(s,c).getOr(c):nn(s,l).getOr(l)}})(t.selection.getRng(),o,n);return((a,s,i,l)=>{const c=An(a,l),d=vo(s,i,c);return vo(s,i,c).bind(et(JR,a)).orThunk(()=>((u,m,p,f,h)=>{const g=An(u,h);return _n(u,p,g).map(et(An,u)).fold(()=>f.map(Kc),b=>vo(m,p,b).map(et(ZR,u,m,p,g,b)).filter(et(QR,f))).filter(M1)})(a,s,i,d,l))})(n,et(fa,t),o,r).bind(a=>nw(t,e,a))})(t,e,n).isSome(),rw=(t,e,n)=>!!xi(e)&&((o,r)=>{const a=r.selection.getRng(),s=o?F.fromRangeEnd(a):F.fromRangeStart(a);return!!kt(r.selection.getSel().modify)&&(o&&yu(s)?F1(!0,r.selection,s):!(o||!Cu(s))&&F1(!1,r.selection,s))})(t,e),dT=et(rw,!0),uT=et(rw,!1),Zc=(t,e,n)=>{if(xi(t)){const o=qf(t,e).getOrThunk(()=>{const r=t.selection.getRng();return e?F.fromRangeEnd(r):F.fromRangeStart(r)});return vo(et(fa,t),t.getBody(),o).exists(r=>{const a=Kc(r);return zf(n,a).exists(s=>(Xc(t,s),!0))})}return!1},aw=(t,e)=>n=>zf(e,n).map(o=>()=>Xc(t,o)),sw=(t,e,n,o)=>{const r=t.getBody(),a=et(fa,t);t.undoManager.ignore(()=>{t.selection.setRng(((s,i)=>{const l=document.createRange();return l.setStart(s.container(),s.offset()),l.setEnd(i.container(),i.offset()),l})(n,o)),kc(t),vo(a,r,F.fromRangeStart(t.selection.getRng())).map(jf).bind(aw(t,e)).each(ko)}),t.nodeChanged()},Kf=(t,e,n)=>{if(t.selection.isCollapsed()&&xi(t)){const o=F.fromRangeStart(t.selection.getRng());return((r,a,s,i)=>{const l=(u=r.getBody(),m=i.container(),hr(m,u)||u),c=et(fa,r),d=vo(c,l,i);var u,m;return d.bind(u=>s?u.fold(G(C.some(jf(u))),C.none,G(C.some(Kc(u))),C.none):u.fold(C.none,G(C.some(Kc(u))),C.none,G(C.some(jf(u))))).map(aw(r,a)).getOrThunk(()=>{const u=ss(s,l,i),m=u.bind(p=>vo(c,l,p));return Se(d,m,()=>Er(c,l,i).bind(p=>{return Se(Ve(f=p),zn(f),(h,g)=>{const b=An(!0,h),v=An(!1,g);return nn(f,b).forall(y=>y.isEqual(v))}).getOr(!0)?C.some(()=>{ma(r,s,R(p))}):C.none();var f})).getOrThunk(()=>m.bind(()=>u.map(p=>()=>{s?sw(r,a,i,p):sw(r,a,p,i)})))})})(t,e,n,o)}return C.none()},iw=(t,e)=>{const n=R(t.getBody()),o=R(t.selection.getStart()),r=Ho(o,n);return Or(r,e).fold(G(r),a=>r.slice(0,a))},mT=t=>1===Md(t),lw=(t,e)=>{const n=et(by,t);return an(e,o=>n(o)?[o.dom]:[])},cw=t=>{const e=iw(n=t,o=>n.schema.isBlock(Nt(o)));var n;return lw(t,e)},dw=(t,e)=>{const n=t.selection.getStart(),o=((r,a)=>{const s=a.parentElement;return ae(a)&&!Ee(s)&&r.dom.isEmpty(s)})(t,n)||rm(R(n))?hy(n,e):((r,a)=>{const{caretContainer:s,caretPosition:i}=py(a);return r.insertNode(s.dom),i})(t.selection.getRng(),e);t.selection.setRng(o.toRange())},uw=t=>$(t.startContainer),Yf=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=gt(iw(o=t,r=>o.schema.isBlock(Nt(r))||Md(r)>1),mT);var o;return pe(n).bind(o=>{const r=F.fromRangeStart(t.selection.getRng());return Hv(e,r,o.dom)&&!rm(o)?C.some(()=>((a,s,i,l)=>{const c=lw(s,l);if(0===c.length)ma(s,a,i);else{const d=hy(i.dom,c);s.selection.setRng(d.toRange())}})(e,t,o,n)):C.none()})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&uw(n)&&((n,o)=>{const r=o.startContainer.parentElement;return!Ee(r)&&by(n,R(r))})(t,e)&&(n=>{return(r=>{const a=r.startContainer.parentNode,s=r.endContainer.parentNode;return!Ee(a)&&!Ee(s)&&a.isEqualNode(s)})(o=n)&&(r=>{const a=r.endContainer;return r.endOffset===($(a)?a.length:a.childNodes.length)})(o)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n);var o})(e);var n})(n)){const o=cw(n);return C.some(()=>{kc(n),((r,a)=>{const s=Na(a,cw(r));s.length>0&&dw(r,s)})(n,o)})}return C.none()})(t),nl=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(uw(n)||e.dom.isEmpty(n.startContainer))&&(r=R((o=e).selection.getStart()),a=o.schema,!Ep(r,s=>xn(s.dom),s=>a.isBlock(Nt(s))));var o,r,a})(t)&&dw(t,[]),!0),Gf=(t,e,n)=>q(n)?C.some(()=>{t._selectionOverrides.hideFakeCaret(),ma(t,e,R(n))}):C.none(),Xf=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=o?Ii:Fi,s=Ti(o?Te.Forwards:Te.Backwards,n.getBody(),n.selection.getRng());return r(s)?Gf(n,o,s.getNode(!o)):C.from(An(o,s)).filter(i=>r(i)&&ac(s,i)).bind(i=>Gf(n,o,i.getNode(!o)))})(t,e):((n,o)=>{const r=n.selection.getNode();return co(r)?Gf(n,o,r):C.none()})(t,e),Zf=t=>er(t??"").getOr(0),mw=(t,e)=>(t||"table"===Nt(e)?"margin":"padding")+("rtl"===io(e,"direction")?"-right":"-left"),fw=t=>{const e=pw(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,$n(e,r=>{const a=mw(sb(n),r),s=Ll(r,a).map(Zf).getOr(0);return"false"!==n.dom.getContentEditable(r.dom)&&s>0})));var n},gw=t=>vu(t)||Qa(t),pw=t=>gt(jd(t.selection.getSelectedBlocks()),e=>!gw(e)&&!Xn(e).exists(gw)&&$r(e,n=>Un(n.dom)||Xt(n.dom)).exists(n=>Un(n.dom))),hw=(t,e)=>{var n,o;if(t.mode.isReadOnly())return;const{dom:r}=t,a=rk(t),s=null!==(o=null===(n=/[a-z%]+$/i.exec(a))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",i=Zf(a),l=sb(t);z(pw(t),c=>{((d,u,m,p,f,h)=>{const g=mw(m,R(h)),b=Zf(d.getStyle(h,g));if("outdent"===u){const v=Math.max(0,b-p);d.setStyle(h,g,v?v+f:"")}else d.setStyle(h,g,b+p+f)})(r,e,l,i,s,c.dom)})},bw=t=>hw(t,"outdent"),vw=t=>{if(t.selection.isCollapsed()&&fw(t)){const e=t.dom,n=t.selection.getRng(),o=F.fromRangeStart(n),r=e.getParent(n.startContainer,e.isBlock);if(null!==r&&Sm(R(r),o,t.schema))return C.some(()=>bw(t))}return C.none()},yw=(t,e,n)=>No([vw,If,Lf,(o,r)=>Kf(o,e,r),Of,Um,Uf,Xf,Bf,Yf,Ff],o=>o(t,n)).filter(o=>t.selection.isEditable()),Cw=t=>void 0===t.touches||1!==t.touches.length?C.none():C.some(t.touches[0]),Qf=(t,e)=>bt(t,e.nodeName),pT=(t,e)=>!!$(e)||!!ot(e)&&!(Qf(t.getBlockElements(),e)||Sn(e)||Gr(t,e)||Xd(e)),hT=(t,e)=>{if($(e)){if(0===e.data.length)return!0;if(/^\s+$/.test(e.data))return!e.nextSibling||Qf(t,e.nextSibling)||Xd(e.nextSibling)}return!1},Jf=t=>t.dom.create(We(t),_i(t)),ww=(t,e,n)=>{const o=R(Jf(t)),r=Ja();be(o,r),n(e,o);const a=document.createRange();return a.setStartBefore(r.dom),a.setEndBefore(r.dom),a},Ew=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),bT=(t,e,n)=>function(o){const r=arguments,a=r[r.length-2],s=a>0?e.charAt(a-1):"";if('"'===s)return o;if(">"===s){const i=e.lastIndexOf("<",a);if(-1!==i&&-1!==e.substring(i,a).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(r[0])+'">'+t.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},vT=(t,e)=>$n(t,n=>{const o=e.match(n);return null!==o&&o[0].length===e.length}),_w=(t,e)=>{e.hasAttribute("data-mce-caret")&&(wu(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},yT=(t,e)=>{const n=Bl(R(t.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void _w(t,n)):void(yh(n)&&(_w(t,n),t.undoManager.add()))},xw=Xt,Sw=(t,e,n)=>{const o=go(t.getBody()),r=et(zu,1===e?o.next:o.prev);if(n.collapsed){const a=t.dom.getParent(n.startContainer,"PRE");if(!a)return;if(!r(F.fromRangeStart(n))){const s=R((i=>{const l=i.dom.create(We(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?Po(R(a),s):dn(R(a),s),t.selection.select(s.dom,!0),t.selection.collapse()}}},kw=(t,e)=>((n,o)=>{const r=o?Te.Forwards:Te.Backwards,a=n.selection.getRng();return(s=r,i=n,l=a,Q1(i,s,l,Cr,wr,xw)).orThunk(()=>(Sw(n,r,a),C.none()));var s,i,l})(t,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return Mv(r)?!o:o})(t.selection,e)).exists(n=>($o(t,n),!0)),Nw=(t,e)=>((n,o)=>{const r=o?1:-1,a=n.selection.getRng();return(s=r,i=n,l=a,J1(i,s,l,c=>Cr(c)||pv(c),c=>wr(c)||_m(c),xw)).orThunk(()=>(Sw(n,r,a),C.none()));var s,i,l})(t,e).exists(n=>($o(t,n),!0)),Aw=(t,e)=>tw(t,e,e?wr:Cr),Qc=(t,e)=>Pf(t,!e).map(n=>{const o=n.toRange(),r=t.selection.getRng();return e?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>($o(t,n),!0)),CT=t=>Bt(["figcaption"],Nt(t)),Rw=(t,e)=>!!t.selection.isCollapsed()&&((n,o)=>{const r=R(n.getBody()),a=F.fromRangeStart(n.selection.getRng());return((s,i,l)=>{const c=et(Mt,i);return $r(R(s.container()),d=>l.isBlock(Nt(d)),c).filter(CT)})(a,r,n.schema).exists(()=>{if(s=r,l=a,o?W1(s.dom,l):$1(s.dom,l)){const s=ww(n,r,o?be:Hd);return n.selection.setRng(s),!0}var s,l;return!1})})(t,e),Tw=(t,e)=>{return n=t,e?C.from(n.dom.getParent(n.selection.getNode(),"details")).map(r=>((a,s)=>{const i=a.selection.getRng(),l=F.fromRangeStart(i);return!(a.getBody().lastChild!==s||!W1(s,l)||(a.execCommand("InsertNewBlockAfter"),0))})(n,r)).getOr(!1):C.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(r=>C.from(n.dom.getParent(r,"details")).map(a=>((s,i,l)=>{const c=s.selection.getRng(),d=F.fromRangeStart(c);return!(s.getBody().firstChild!==i||!$1(l,d)||(s.execCommand("InsertNewBlockBefore"),0))})(n,a,r))).getOr(!1);var n},Ow={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},Bw=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,mt=(t,...e)=>()=>t.apply(null,e),ol=(t,e)=>{return fe((o=e,an(At(t,a=>({...Ow,...a})),r=>Bw(r,o)?[r]:[])),n=>n.action());var o},Dw=(t,e)=>{return No((o=e,an(At(t,a=>({...Ow,...a})),r=>Bw(r,o)?[r]:[])),n=>n.action());var o},Lw=(t,e)=>{const n=e?Te.Forwards:Te.Backwards,o=t.selection.getRng();return Q1(t,n,o,Ii,Fi,co).exists(r=>($o(t,r),!0))},Pw=(t,e)=>{const n=e?1:-1,o=t.selection.getRng();return J1(t,n,o,Ii,Fi,co).exists(r=>($o(t,r),!0))},Mw=(t,e)=>tw(t,e,e?Fi:Ii),Iw=uo([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),rl={...Iw,none:t=>Iw.none(t)},Fw=(t,e,n)=>an(je(t),o=>Yn(o,e)?n(o)?[o]:[]:Fw(o,e,n)),Uw=(t,e)=>Va(t,"table",e),tg=(t,e,n,o,r=se)=>{const a=1===o;if(!a&&n<=0)return rl.first(t[0]);if(a&&n>=t.length-1)return rl.last(t[t.length-1]);{const s=n+o,i=t[s];return r(i)?rl.middle(e,i):tg(t,e,s,o,r)}},zw=(t,e)=>Uw(t,e).bind(n=>{const o=Fw(n,"th,td",se);return Or(o,r=>Mt(t,r)).map(r=>({index:r,all:o}))}),wT=["img","br"],ET=t=>{return(e=t,bu.getOption(e)).filter(n=>0!==n.trim().length||n.indexOf(ye)>-1).isSome()||Bt(wT,Nt(t))||jr(n=t)&&"false"===St(n,"contenteditable");var n,e},Hw=(t,e,n,o,r)=>{const a=tn(R(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,c)=>Ke(i,(d,u)=>d.fold(()=>C.some(u),m=>{const p=Math.sqrt(Math.abs(m.x-l)+Math.abs(m.y-c)),f=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-c));return C.some(f<p?u:m)}),C.none()))(gt((i=t,an(a,c=>{const d={left:(u=oa(c.getBoundingClientRect())).left- -1,top:u.top- -1,right:u.right+-2,bottom:u.bottom+-2,width:u.width+-1,height:u.height+-1};var u;return[{x:d.left,y:i(d),cell:c},{x:d.right,y:i(d),cell:c}]})),i=>e(i,r)),o,r).map(i=>i.cell)},_T=et(Hw,t=>t.bottom,(t,e)=>t.y<e),xT=et(Hw,t=>t.top,(t,e)=>t.y>e),jw=(t,e,n)=>{const o=t(e,n);return(r=o).breakType===yo.Wrap&&0===r.positions.length||!ae(n.getNode())&&(r=>r.breakType===yo.Br&&1===r.positions.length)(o)?!((r,a,s)=>s.breakAt.exists(i=>r(a,i).breakAt.isSome()))(t,e,o):o.breakAt.isNone();var r},ST=et(jw,Ji),kT=et(jw,tl),NT=(t,e,n,o)=>{const r=t.selection.getRng(),a=e?1:-1;return!(!xb()||!((s,i,l)=>{const c=F.fromRangeStart(i);return is(!s,l).exists(d=>d.isEqual(c))})(e,r,n)||(jo(a,t,n,!e,!1).each(s=>{$o(t,s)}),0))},$w=(t,e,n)=>{const o=((a,s)=>{const i=s.getNode(a);return lo(i)?C.some(i):C.none()})(!!e,n),r=!1===e;o.fold(()=>$o(t,n.toRange()),a=>is(r,t.getBody()).filter(s=>s.isEqual(n)).fold(()=>$o(t,n.toRange()),s=>{return i=e,c=a,void(l=t).undoManager.transact(()=>{const d=i?Po:dn,u=ww(l,R(c),d);$o(l,u)});var i,l,c}))},AT=(t,e,n,o)=>{const r=t.selection.getRng(),a=F.fromRangeStart(r),s=t.getBody();if(!e&&ST(o,a)){const i=(l=s,(u=c=n,m=d=a,It(m.getClientRects()).bind(p=>_T(u,p.left,p.top)).bind(p=>{return Gc(zn(f=p).map(h=>Ji(f,h).positions.concat(h)).getOr([]),m);var f})).orThunk(()=>It(d.getClientRects()).bind(u=>$f(H1(l,F.before(c)),u.left))).getOr(F.before(c)));return $w(t,e,i),!0}var l,c,d,u,m;if(e&&kT(o,a)){const i=((l,c,d)=>((u,m)=>pe(m.getClientRects()).bind(p=>xT(u,p.left,p.top)).bind(p=>{return Gc(Ve(f=p).map(h=>[h].concat(tl(f,h).positions)).getOr([]),m);var f}))(c,d).orThunk(()=>It(d.getClientRects()).bind(u=>$f(j1(l,F.after(c)),u.left))).getOr(F.after(c)))(s,n,a);return $w(t,e,i),!0}return!1},Ww=(t,e,n)=>C.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>C.from(t.dom.getParent(o,"table")).map(r=>n(t,e,r,o))).getOr(!1),Vw=(t,e)=>Ww(t,e,NT),eg=(t,e)=>Ww(t,e,AT),qw=(t,e,n)=>n.fold(C.none,C.none,(o,r)=>{return(a=r,Ud(a,ET)).map(s=>{return(t=>{const e=us.getWin(t).dom,n=(r,a,s,i)=>im(e,r,a,s,i),o=t.match({domRange:a=>{const s=R(a.startContainer),i=R(a.endContainer);return x0(s,a.startOffset,i,a.endOffset)},relative:AN,exact:x0});return((r,a)=>{var i;return((i,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(d=>!1===d.collapsed).map(d=>Pi.rtl(R(d.endContainer),d.endOffset,R(d.startContainer),d.startOffset)).getOrThunk(()=>E0(0,Pi.ltr,c)):E0(0,Pi.ltr,c)})(0,(i=r,a.match({domRange:c=>({ltr:G(c),rtl:C.none}),relative:(c,d)=>({ltr:pn(()=>w0(i,c,d)),rtl:pn(()=>C.some(w0(i,d,c)))}),exact:(c,d,u,m)=>({ltr:pn(()=>im(i,c,d,u,m)),rtl:pn(()=>C.some(im(i,u,m,c,d)))})})))})(e,o).match({ltr:n,rtl:n})})(us.exact(i=s,0,i,0));var i});var a},o=>t.mode.isReadOnly()?C.none():(t.execCommand("mceTableInsertRowAfter"),Kw(t,e,o))),Kw=(t,e,n)=>{return qw(t,e,(r=Wr,zw(o=n,void 0).fold(()=>rl.none(o),a=>tg(a.all,o,a.index,1,r))));var o,r},RT=(t,e,n)=>{return qw(t,e,(r=Wr,zw(o=n,void 0).fold(()=>rl.none(),a=>tg(a.all,o,a.index,-1,r))));var o,r},Yw=(t,e)=>{const n=["table","li","dl"],o=R(t.getBody()),r=s=>{const i=Nt(s);return Mt(s,o)||Bt(n,i)},a=t.selection.getRng();return(s=R(e?a.endContainer:a.startContainer),i=r,((l,c,d=Gt)=>d(c)?C.none():Bt(l,Nt(c))?C.some(c):ni(c,l.join(","),u=>Yn(u,"table")||d(u)))(["td","th"],s,i)).map(s=>(Uw(s,r).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?Kw:RT)(t,r,s).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var s,i},oo=(t,e)=>({container:t,offset:e}),Jc=qt.DOM,td=t=>e=>t===e?-1:0,ng=(t,e,n)=>{if($(t)&&e>=0)return C.some(oo(t,e));{const o=ea(Jc);return C.from(o.backwards(t,e,td(t),n)).map(r=>oo(r.container,r.container.data.length))}},og=(t,e,n)=>{if(!$(t))return C.none();if(e>=0&&e<=t.data.length)return C.some(oo(t,e));{const r=ea(Jc);return C.from(r.backwards(t,e,td(t),n)).bind(a=>og(a.container,e+a.container.data.length,n))}},Gw=(t,e,n)=>{if(!$(t))return C.none();const o=t.data;if(e<=o.length)return C.some(oo(t,e));{const r=ea(Jc);return C.from(r.forwards(t,e,td(t),n)).bind(a=>Gw(a.container,e-o.length,n))}},rg=(t,e,n,o,r)=>{const a=ea(t,(s=>i=>s.isBlock(i)||Bt(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===s.getContentEditable(i))(t));return C.from(a.backwards(e,n,o,r))},Xw=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),TT=(t,e)=>t.substring(e.length),ag=(t,e,n,o=!1)=>{if(!(r=e).collapsed||!$(r.startContainer))return C.none();var r;const a={text:"",offset:0},s=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return rg(t,e.startContainer,e.startOffset,(i,l,c)=>(a.text=c+a.text,a.offset+=l,((d,u,m,p=!1)=>{let f;const h=m.charAt(0);for(f=u-1;f>=0;f--){const g=d.charAt(f);if(!p&&Xw(g))return C.none();if(h===g&&_e(d,m,f,u))break}return C.some(f)})(a.text,a.offset,n,o).getOr(l)),s).bind(i=>{const l=e.cloneRange();if(l.setStart(i.container,i.offset),l.setEnd(e.endContainer,e.endOffset),l.collapsed)return C.none();const c=vn(l.toString().replace(/\u00A0/g," "));return 0!==c.lastIndexOf(n)?C.none():C.some({text:TT(c,n),range:l,trigger:n})})},Zw=t=>{if(3===t.nodeType)return oo(t,t.data.length);{const e=t.childNodes;return e.length>0?Zw(e[e.length-1]):oo(t,e.length)}},Qw=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?Qw(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?Zw(n[n.length-1]):oo(t,e)},Jw=(t,e,n,o={})=>{var r;const a=e(),s=null!==(r=t.selection.getRng().startContainer.nodeValue)&&void 0!==r?r:"",i=gt(a.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>(d=>u=>{const m=Qw(u.startContainer,u.startOffset);return!((p,f)=>{var h;const g=null!==(h=p.getParent(f.container,p.isBlock))&&void 0!==h?h:p.getRoot();return rg(p,f.container,f.offset,(b,v)=>0===v?-1:v,g).filter(b=>{const v=b.container.data.charAt(b.offset-1);return!Xw(v)}).isSome()})(d,m)})(t.dom))(n.range,s,n.text));if(0===i.length)return C.none();const l=Promise.all(At(i,c=>c.fetch(n.text,c.maxResults,o).then(d=>({matchText:n.text,items:d,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return C.some({lookupData:l,context:n})};var Co;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Co||(Co={}));const sg=(t,e,n)=>t.stype===Co.Error?e(t.serror):n(t.svalue),Cs=t=>({stype:Co.Value,svalue:t}),al=t=>({stype:Co.Error,serror:t}),OT=sg,ig=t=>le(t)&&Pe(t).length>100?" removed due to size":JSON.stringify(t,null,2),ed=(t,e)=>al([{path:t,getErrorInfo:e}]),tE=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<e.length;o++){const r=e[o];for(const a in r)bt(r,a)&&(n[a]=t(n[a],r[a]))}return n},lg=tE((t,e)=>xa(t)&&xa(e)?lg(t,e):e),DT=tE((t,e)=>e),eE=t=>({tag:"defaultedThunk",process:G(t)}),nE=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},cg=t=>({extract:(e,n)=>{return(o=t(n)).stype===Co.Error?ed(e,G(o.serror)):o;var o},toString:G("val")}),PT=cg(Cs),oE=(t,e,n,o)=>o(Kt(t,e).getOrThunk(()=>n(t))),MT=(t,e,n,o,r)=>{const a=i=>r.extract(e.concat([o]),i),s=i=>i.fold(()=>Cs(C.none()),l=>{return(d=r.extract(e.concat([o]),l)).stype===Co.Value?{stype:Co.Value,svalue:(0,C.some)(d.svalue)}:d;var d});switch(t.tag){case"required":return i=e,d=a,Kt(l=n,c=o).fold(()=>{return m=c,p=l,ed(i,()=>'Could not find valid *required* value for "'+m+'" in '+ig(p));var m,p},d);case"defaultedThunk":return oE(n,o,t.process,a);case"option":return((i,l,c)=>c(Kt(i,l)))(n,o,s);case"defaultedOptionThunk":return((i,l,c,d)=>d(Kt(i,l).map(u=>!0===u?c(i):u)))(n,o,t.process,s);case"mergeWithThunk":return oE(n,o,G({}),i=>{const l=lg(t.process(n),i);return a(l)})}var i,l,c,d},dg=t=>({extract:(e,n)=>((o,r,a)=>{const s={},i=[];for(const l of a)nE(l,(c,d,u,m)=>{const p=MT(u,o,r,c,m);OT(p,f=>{i.push(...f)},f=>{s[d]=f})},(c,d)=>{s[c]=d(r)});return i.length>0?al(i):Cs(s)})(e,n,t),toString:()=>"obj{\n"+At(t,n=>nE(n,(o,r,a,s)=>o+" -> "+s.toString(),(o,r)=>"state("+o+")")).join("\n")+"}"}),rE=t=>({extract:(e,n)=>(t=>{const e=(o=>{const r=[],a=[];return z(o,s=>{sg(s,i=>a.push(i),i=>r.push(i))}),{values:r,errors:a}})(t);return e.errors.length>0?(n=e.errors,de(al,El)(n)):Cs(e.values);var n})(At(n,(r,a)=>t.extract(e.concat(["["+a+"]"]),r))),toString:()=>"array("+t.toString()+")"}),aE=(t,e)=>((t,e)=>({extract:(n,o)=>Kt(o,t).fold(()=>{return a=t,ed(n,()=>'Choice schema did not contain choice key: "'+a+'"');var a},r=>{return a=n,s=o,Kt(i=e,l=r).fold(()=>{return d=i,u=l,ed(a,()=>'The chosen schema: "'+u+'" did not exist in branches: '+ig(d));var d,u},c=>c.extract(a.concat(["branch: "+l]),s));var a,s,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+Pe(e)}))(t,Dr(e,dg)),FT=G(PT),nd=(t,e)=>cg(n=>{const o=typeof n;return t(n)?Cs(n):al(`Expected type: ${e} but got: ${o}`)}),UT=nd(re,"number"),od=nd(at,"string"),zT=nd(Mn,"boolean"),ug=nd(kt,"function"),sl=(t,e,n,o)=>({tag:"field",key:t,newKey:e,presence:n,prop:o}),sE=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),iE=(t,e)=>sl(t,t,{tag:"required",process:{}},e),lE=t=>iE(t,od),cE=t=>iE(t,ug),mg=(t,e)=>sl(t,t,{tag:"option",process:{}},e),rd=t=>mg(t,od),ws=(t,e,n)=>sl(t,t,eE(e),n),dE=(t,e)=>ws(t,e,UT),uE=(t,e)=>ws(t,e,od),mE=(t,e,n)=>{return ws(t,e,(o=n,r=a=>Bt(o,a)?en.value(a):en.error(`Unsupported value: "${a}", choose one of "${o.join(", ")}".`),cg(a=>r(a).fold(al,Cs))));var o,r},fg=(t,e)=>ws(t,e,zT),gg=(t,e)=>ws(t,e,ug),HT=lE("type"),jT=cE("fetch"),pg=cE("onAction"),$T=gg("onSetup",()=>Ct),WT=rd("text"),VT=rd("icon"),qT=rd("tooltip"),KT=rd("label"),YT=fg("active",!1),GT=fg("enabled",!0),fE=fg("primary",!1),il=t=>uE("type",t),XT=dg([HT,lE("trigger"),dE("minChars",1),(t=>sl(t,t,eE(1),FT()))("columns"),dE("maxResults",10),mg("matches",ug),jT,pg,(gE=od,ws("highlightOn",[],rE(gE)))]);var gE;const hg=[GT,qT,VT,WT,$T,uE("context","mode:design")],pE=[YT].concat(hg),ZT=[gg("predicate",Gt),mE("scope","node",["node","editor"]),mE("position","selection",["node","selection","line"])],QT=hg.concat([il("contextformbutton"),fE,pg,sE("original",me)]),JT=pE.concat([il("contextformbutton"),fE,pg,sE("original",me)]),tO=hg.concat([il("contextformbutton")]),eO=pE.concat([il("contextformtogglebutton")]),nO=aE("type",{contextformbutton:QT,contextformtogglebutton:JT});dg([il("contextform"),gg("initValue",G("")),KT,((t,e)=>sl(t,t,{tag:"required",process:{}},rE(e)))("commands",nO),mg("launch",aE("type",{contextformbutton:tO,contextformtogglebutton:eO}))].concat(ZT));const rO=t=>{const e=Fo(),n=Ae(!1),o=e.isSet,r=()=>{o()&&(t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},a=pn(()=>(t=>{const e=t.ui.registry.getAll().popups,n=Dr(e,a=>{return(s=a,((t,e,n)=>{return o=(i=e.extract([t],s=n)).stype===Co.Error?{stype:Co.Error,serror:(i=>({input:s,errors:i}))(i.serror)}:i,sg(o,en.error,en.value);var s,i,o})("Autocompleter",XT,s)).fold(i=>{throw new Error("Errors: \n"+(c=>{const d=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:G("... (only showing first ten failures)")}]):c;return At(d,u=>"Failed path: ("+u.path.join(" > ")+")\n"+u.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+ig(l.input));var l},me);var s}),o=Ue(Aa(n,a=>a.trigger)),r=Ms(n);return{dataset:n,triggers:o,lookupByTrigger:a=>gt(r,s=>s.trigger===a)}})(t)),s=l=>{var c;(c=l,e.get().map(d=>ag(t.dom,t.selection.getRng(),d.trigger,!0).bind(u=>Jw(t,a,u,c))).getOrThunk(()=>((d,u)=>{const m=u(),p=d.selection.getRng();return(f=d.dom,h=p,g=m,No(g.triggers,b=>ag(f,h,b))).bind(f=>Jw(d,u,f));var f,h,g})(t,a))).fold(r,c=>{var d;d=c.context,o()||e.set({trigger:d.trigger,matchLength:d.text.length}),c.lookupData.then(d=>{e.get().map(u=>{const m=c.context;u.trigger===m.trigger&&(e.set({...u,matchLength:m.text.length}),n.get()?(am(t,{range:m.range}),t.dispatch("AutocompleterUpdate",{lookupData:d})):(n.set(!0),am(t,{range:m.range}),t.dispatch("AutocompleterStart",{lookupData:d})))})})})},i=()=>e.get().bind(({trigger:l})=>{const c=t.selection.getRng();return ag(t.dom,c,l,n.get()).filter(({range:d})=>((u,m)=>{const p=u.compareBoundaryPoints(window.Range.START_TO_START,m),f=u.compareBoundaryPoints(window.Range.END_TO_END,m);return p>=0&&f<=0})(c,d)).map(({range:d})=>d)});t.addCommand("mceAutocompleterReload",(l,c)=>{const d=le(c)?c.fetchOptions:{};s(d)}),t.addCommand("mceAutocompleterClose",r),t.addCommand("mceAutocompleterRefreshActiveRange",()=>{i().each(l=>{am(t,{range:l})})}),t.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>i().isSome()),((l,c)=>{const d=hu(c.load,50);l.on("input",u=>{("insertCompositionText"!==u.inputType||l.composing)&&d.throttle()}),l.on("keydown",u=>{const m=u.which;8===m?d.throttle():27===m?(d.cancel(),c.cancelIfNecessary()):38!==m&&40!==m||d.cancel()},!0),l.on("remove",d.cancel)})(t,{cancelIfNecessary:r,load:s})},aO=bn().browser.isSafari(),hE=t=>mr(R(t)),bE=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},ad=(t,e)=>C.from(t.getParent(e.container(),"details")),vE=(t,e)=>ad(t,e).isSome(),yE=(t,e)=>{const n=e.getNode();ce(n)||t.selection.setCursorLocation(n,e.offset())},CE=(t,e,n)=>{const o=t.dom.getParent(e.container(),"details");if(o&&!o.open){const r=t.dom.select("summary",o)[0];r&&(n?Ve(r):zn(r)).each(a=>yE(t,a))}else yE(t,e)},wE=(t,e,n)=>{const{dom:o,selection:r}=t,a=t.getBody();if("character"===n){const s=F.fromRangeStart(r.getRng()),i=o.getParent(s.container(),o.isBlock),l=ad(o,s),c=i&&o.isEmpty(i),d=Ee(i?.previousSibling),u=Ee(i?.nextSibling);return!!(c&&(e?u:d)&&ss(!e,a,s).exists(m=>vE(o,m)&&!Gs(l,ad(o,m))))||ss(e,a,s).fold(Gt,m=>{const p=ad(o,m);if(vE(o,m)&&!Gs(l,p)){if(e||CE(t,m,!1),i&&c){if(e&&d||!e&&u)return!0;CE(t,m,e),t.dom.remove(i)}return!0}return!1})}return!1},va=(t,e,n)=>{return r=e,a=n,((s,i)=>{const l=C.from(s.getParent(i.startContainer,"details")),c=C.from(s.getParent(i.endContainer,"details"));if(l.isSome()||c.isSome()){const d=l.bind(u=>C.from(s.select("summary",u)[0]));return C.some({startSummary:d,startDetails:l,endDetails:c})}return C.none()})((o=t).dom,o.selection.getRng()).fold(()=>wE(o,r,a),s=>((t,e,n,o)=>{const r=t.selection.getRng(),a=F.fromRangeStart(r),s=t.getBody();return"selection"===o?((i,l)=>{const c=l.startSummary.exists(m=>m.contains(i.startContainer)),d=l.startSummary.exists(m=>m.contains(i.endContainer)),u=l.startDetails.forall(m=>l.endDetails.forall(p=>m!==p));return(c||d)&&!(c&&d)||u})(r,e):n?(i=a,e.startSummary.exists(c=>{return d=i,zn(u=c).exists(m=>ae(m.getNode())&&un(u,m).exists(p=>p.isEqual(d))||m.isEqual(d));var d,u})||((i,l,c)=>c.startDetails.exists(d=>nn(i,l).forall(u=>!d.contains(u.container()))))(s,a,e)):((i,l)=>l.startSummary.exists(c=>{return d=i,Ve(c).exists(m=>m.isEqual(d));var d}))(a,e)||((i,l)=>l.startDetails.exists(c=>un(c,i).forall(d=>l.startSummary.exists(u=>!u.contains(i.container())&&u.contains(d.container())))))(a,e);var i})(o,s,r,a)||wE(o,r,a))||aO&&((o,r,a)=>{const s=o.selection,i=s.getNode(),l=s.getRng(),c=F.fromRangeStart(l);return!!tS(i)&&("selection"===a&&bE(l,i)||Hv(r,c,i)?hE(i):o.undoManager.transact(()=>{const d=s.getSel();let{anchorNode:u,anchorOffset:m,focusNode:p,focusOffset:f}=d??{};const h=()=>{q(u)&&q(m)&&q(p)&&q(f)&&d?.setBaseAndExtent(u,m,p,f)},g=(v,y)=>{z(v.childNodes,E=>{Bi(E)&&y.appendChild(E)})},b=o.dom.create("span",{"data-mce-bogus":"1"});g(i,b),i.appendChild(b),h(),"word"!==a&&"line"!==a||null==d||d.modify("extend",r?"right":"left",a),!s.isCollapsed()&&bE(s.getRng(),b)?hE(i):(o.execCommand(r?"ForwardDelete":"Delete"),u=d?.anchorNode,m=d?.anchorOffset,p=d?.focusNode,f=d?.focusOffset,g(b,i),h()),o.dom.remove(b)}),!0)})(t,e,n)?C.some(Ct):C.none();var o,r,a},EE=t=>(e,n,o={})=>{const r=e.getBody(),a={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:Ct,inputType:n},s=nh(new InputEvent(t));return e.dispatch(t,{...s,...a,...o})},ll=EE("input"),sd=EE("beforeinput"),_E=bn(),xE=_E.os,SE=xE.isMacOS()||xE.isiOS(),iO=_E.browser.isFirefox(),Es=(t,e)=>{const n=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const a=(s=>{for(;s;){if(ot(s)||$(s)&&s.data&&/[\r\n\s]/.test(s.data))return s;s=s.nextSibling}return null})(e.firstChild);a&&/^(UL|OL|DL)$/.test(a.nodeName)&&e.insertBefore(n.doc.createTextNode(ye),e.firstChild)}const r=n.createRng();if(e.normalize(),e.hasChildNodes()){const a=new Ne(e,e);let s,i=e;for(;s=a.current();){if($(s)){r.setStart(s,0),r.setEnd(s,0);break}if(o[s.nodeName.toLowerCase()]){r.setStartBefore(s),r.setEndBefore(s);break}i=s,s=a.next()}s||(r.setStart(i,0),r.setEnd(i,0))}else ae(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)):(r.setStart(e,0),r.setEnd(e,0));t.selection.setRng(r),Mi(t,r)},cl=(t,e)=>{const n=t.getRoot();let o,r=e;for(;r!==n&&r&&"false"!==t.getContentEditable(r);){if("true"===t.getContentEditable(r)){o=r;break}r=r.parentNode}return r!==n?o:n},bg=t=>C.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),vg=t=>{t.innerHTML='<br data-mce-bogus="1">'},dl=(t,e)=>{We(t).toLowerCase()===e.tagName.toLowerCase()&&((n,o,r)=>{const a=n.dom;C.from(r.style).map(a.parseStyle).each(d=>{const u={...zd(R(o)),...d};a.setStyles(o,u)});const s=C.from(r.class).map(d=>d.split(/\s+/)),i=C.from(o.className).map(d=>gt(d.split(/\s+/),u=>""!==u));Se(s,i,(d,u)=>{const m=gt(u,f=>!Bt(d,f)),p=[...d,...m];a.setAttrib(o,"class",p.join(" "))});const l=["style","class"],c=Wn(r,(d,u)=>!Bt(l,u));a.setAttribs(o,c)})(t,e,_i(t))},kE=(t,e,n,o,r=!0,a,s)=>{const i=t.dom,l=t.schema,c=We(t),d=n?n.nodeName.toUpperCase():"";let u=e;const m=l.getTextInlineElements();let p;p=a||"TABLE"===d||"HR"===d?i.create(a||c,s||{}):n.cloneNode(!1);let f=p;if(r){do{if(m[u.nodeName]){if(xn(u)||Sn(u))continue;const h=u.cloneNode(!1);i.setAttrib(h,"id",""),p.hasChildNodes()?(h.appendChild(p.firstChild),p.appendChild(h)):(f=h,p.appendChild(h))}}while((u=u.parentNode)&&u!==o)}else i.setAttrib(p,"style",null),i.setAttrib(p,"class",null);return dl(t,p),vg(f),p},NE=(t,e)=>{const n=t?.parentNode;return q(n)&&n.nodeName===e},AE=t=>q(t)&&/^(OL|UL|LI)$/.test(t.nodeName),yg=t=>q(t)&&/^(LI|DT|DD)$/.test(t.nodeName),id=t=>{const e=t.parentNode;return yg(e)?e:t},ld=(t,e,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!ot(o);)o=o[n?"nextSibling":"previousSibling"];return o===e},RE=t=>Ke(Aa(zd(R(t)),(e,n)=>`${n}: ${e};`),(e,n)=>e+n,""),lO=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),Cg=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,wg=(t,e)=>q(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),Eg=(t,e,n)=>$(e)?t?1===n&&e.data.charAt(n-1)===Re?0:n:n===e.data.length-1&&e.data.charAt(n)===Re?e.data.length:n:n,TE={insert:(t,e)=>{let n,o,r,a,s=!1;const i=t.dom,l=t.schema.getNonEmptyElements(),c=t.selection.getRng(),d=We(t),u=R(c.startContainer),m=$a(u,c.startOffset),p=m.exists(O=>jr(O)&&!Wr(O)),f=c.collapsed&&p,h=(O,P)=>kE(t,n,w,E,YS(t),O,P),g=O=>{const P=Eg(O,n,o);if($(n)&&(O?P>0:P<n.data.length))return!1;if((n.parentNode===w||n===w)&&s&&!O||O&&ot(n)&&n===w.firstChild)return!0;if(Cg(n,"TABLE")||Cg(n,"HR"))return"BR"===(T=n).nodeName||T.nextSibling&&"BR"===T.nextSibling.nodeName?!O:s&&!O||!s&&O;var T;const x=new Ne(n,w);let N;for($(n)&&(O&&0===P?x.prev():O||P!==n.data.length||x.next());N=x.current();){if(ot(N)){if(!N.getAttribute("data-mce-bogus")){const T=N.nodeName.toLowerCase();if(l[T]&&"br"!==T)return!1}}else if($(N)&&!Ya(N.data))return!1;O?x.prev():x.next()}return!0},b=()=>{let O;return O=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&"HGROUP"!==_?h(d):h(),((P,x)=>{const N=GS(P);return!ue(x)&&(at(N)?Bt(W.explode(N),x.nodeName.toLowerCase()):N)})(t,a)&&wg(i,a)&&i.isEmpty(w,void 0,{includeZwsp:!0})?O=i.split(a,w):i.insertAfter(O,w),Es(t,O),O};hc(i,c).each(O=>{c.setStart(O.startContainer,O.startOffset),c.setEnd(O.endContainer,O.endOffset)}),n=c.startContainer,o=c.startOffset;const v=!(!e||!e.shiftKey),y=!(!e||!e.ctrlKey);ot(n)&&n.hasChildNodes()&&!f&&(s=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=s&&$(n)?n.data.length:0);const E=cl(i,n);if(!E||((O,P)=>{const x=O.dom.getParent(P,"ol,ul,dl");return null!==x&&"false"===O.dom.getContentEditableParent(x)})(t,n))return;v||(n=((O,P,x,N,T)=>{var U,j;const H=O.dom,tt=null!==(U=cl(H,N))&&void 0!==U?U:H.getRoot();let rt=H.getParent(N,H.isBlock);if(!rt||!wg(H,rt)){if(rt=rt||tt,!rt.hasChildNodes()){const nt=H.create(P);return dl(O,nt),rt.appendChild(nt),x.setStart(nt,0),x.setEnd(nt,0),nt}let st,lt=N;for(;lt&&lt.parentNode!==rt;)lt=lt.parentNode;for(;lt&&!H.isBlock(lt);)st=lt,lt=lt.previousSibling;const Y=null===(j=st?.parentElement)||void 0===j?void 0:j.nodeName;if(st&&Y&&O.schema.isValidChild(Y,P.toLowerCase())){const nt=st.parentNode,A=H.create(P);for(dl(O,A),nt.insertBefore(A,st),lt=st;lt&&!H.isBlock(lt);){const B=lt.nextSibling;A.appendChild(lt),lt=B}x.setStart(N,T),x.setEnd(N,T)}}return N})(t,d,c,n,o));let w=i.getParent(n,i.isBlock)||i.getRoot();a=q(w?.parentNode)?i.getParent(w.parentNode,i.isBlock):null,r=w?w.nodeName.toUpperCase():"";const _=a?a.nodeName.toUpperCase():"";if("LI"!==_||y||(w=a,a=a.parentNode,r=_),ot(a)&&(O=t,x=w,!v&&x.nodeName.toLowerCase()===We(O)&&O.dom.isEmpty(x)&&((N,T)=>{let j=T;for(;j&&j!==N&&Ee(j.nextSibling);){const tt=j.parentElement;if(!tt||(H=tt,!bt(O.schema.getTextBlockElements(),H.nodeName.toLowerCase())))return Yd(tt);j=tt}var H;return!1})(O.getBody(),x)))return((O,P,x)=>{var N,T,U;const j=P(We(O)),H=O.dom.getParent(x,Yd);H&&(O.dom.insertAfter(j,H),Es(O,j),(null!==(U=null===(T=null===(N=x.parentElement)||void 0===N?void 0:N.childNodes)||void 0===T?void 0:T.length)&&void 0!==U?U:0)>1&&O.dom.remove(x))})(t,h,w);var O,x;if(/^(LI|DT|DD)$/.test(r)&&ot(a)&&i.isEmpty(w))return void((O,P,x,N,T)=>{const U=O.dom,j=O.selection.getRng(),H=x.parentNode;if(x===O.getBody()||!H)return;var tt;AE(tt=x)&&AE(tt.parentNode)&&(T="LI");const rt=yg(N)?RE(N):void 0;let st=yg(N)&&rt?P(T,{style:RE(N)}):P(T);if(ld(x,N,!0)&&ld(x,N,!1))if(NE(x,"LI")){const lt=id(x);U.insertAfter(st,lt),(null===(nt=(Y=x).parentNode)||void 0===nt?void 0:nt.firstChild)===Y?U.remove(lt):U.remove(x)}else U.replace(st,x);else if(ld(x,N,!0))NE(x,"LI")?(U.insertAfter(st,id(x)),st.appendChild(U.doc.createTextNode(" ")),st.appendChild(x)):H.insertBefore(st,x),U.remove(N);else if(ld(x,N,!1))U.insertAfter(st,id(x)),U.remove(N);else{x=id(x);const lt=j.cloneRange();lt.setStartAfter(N),lt.setEndAfter(x);const Y=lt.extractContents();if("LI"===T&&(nt=>nt.firstChild&&"LI"===nt.firstChild.nodeName)(Y)){const nt=gt(At(st.children,R),So(pt("br")));st=Y.firstChild,U.insertAfter(Y,x),z(nt,A=>Hd(R(st),A)),rt&&st.setAttribute("style",rt)}else U.insertAfter(Y,x),U.insertAfter(st,x);U.remove(N)}var Y,nt;Es(O,st)})(t,h,a,w,d);if(!(f||w!==t.getBody()&&wg(i,w)))return;const k=w.parentNode;let S;if(f)S=h(d),m.fold(()=>{be(u,R(S))},O=>{dn(O,R(S))}),t.selection.setCursorLocation(S,0);else if(es(w))S=wu(w),i.isEmpty(w)&&vg(w),dl(t,S),Es(t,S);else if(g(!1))S=b();else if(g(!0)&&k){const O=F.fromRangeStart(c),P=_m(O),x=R(w),N=xc(x,O,t.schema)?wv(x,O,t.schema).bind(U=>C.from(U.getNode())):C.none();S=k.insertBefore(h(),w);const T=Cg(w,"HR")||P?S:N.getOr(w);Es(t,T)}else{const O=(x=>{const N=x.cloneRange();return N.setStart(x.startContainer,Eg(!0,x.startContainer,x.startOffset)),N.setEnd(x.endContainer,Eg(!1,x.endContainer,x.endOffset)),N})(c).cloneRange();O.setEndAfter(w);const P=O.extractContents();(x=>{z(wp(R(x),Me),N=>{const T=N.dom;T.nodeValue=vn(T.data)})})(P),(x=>{let N=x;do{$(N)&&(N.data=N.data.replace(/^[\r\n]+/,"")),N=N.firstChild}while(N)})(P),S=P.firstChild,i.insertAfter(P,w),((x,N,T)=>{var U;const j=[];if(!T)return;let H=T;for(;H=H.firstChild;){if(x.isBlock(H))return;ot(H)&&!N[H.nodeName.toLowerCase()]&&j.push(H)}let tt=j.length;for(;tt--;)H=j[tt],(!H.hasChildNodes()||H.firstChild===H.lastChild&&""===(null===(U=H.firstChild)||void 0===U?void 0:U.nodeValue)||lO(x,H))&&x.remove(H)})(i,l,S),((x,N)=>{N.normalize();const T=N.lastChild;(!T||ot(T)&&/^(left|right)$/gi.test(x.getStyle(T,"float",!0)))&&x.add(N,"br")})(i,w),i.isEmpty(w)&&vg(w),S.normalize(),i.isEmpty(S)?(i.remove(S),b()):(dl(t,S),Es(t,S))}i.setAttrib(S,"id",""),t.dispatch("NewBlock",{newBlock:S})},fakeEventName:"insertParagraph"},OE=(t,e,n)=>{const o=t.dom.createRng();n?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),t.selection.setRng(o),Mi(t,o)},cO=(t,e)=>{const n=ke("br");dn(R(e),n),t.undoManager.add()},dO=(t,e)=>{uO(t.getBody(),e)||Po(R(e),ke("br"));const n=ke("br");Po(R(e),n),OE(t,n.dom,!1),t.undoManager.add()},uO=(t,e)=>{return n=F.after(e),!!ae(n.getNode())||nn(t,F.after(e)).map(o=>ae(o.getNode())).getOr(!1);var n},BE=t=>t&&"A"===t.nodeName&&"href"in t,mO=t=>t.fold(Gt,BE,BE,Gt),fO=(t,e)=>{e.fold(Ct,et(cO,t),et(dO,t),Ct)},DE={insert:(t,e)=>{const n=(o=>{const r=et(fa,o),a=F.fromRangeStart(o.selection.getRng());return vo(r,o.getBody(),a).filter(mO)})(t);n.isSome()?n.each(et(fO,t)):((o,r)=>{const s=o.dom,i=o.selection.getRng();let l,c=!1;hc(s,i).each(g=>{i.setStart(g.startContainer,g.startOffset),i.setEnd(g.endContainer,g.endOffset)});let d=i.startOffset,u=i.startContainer;if(ot(u)&&u.hasChildNodes()){const g=d>u.childNodes.length-1;u=u.childNodes[Math.min(d,u.childNodes.length-1)]||u,d=g&&$(u)?u.data.length:0}let m=s.getParent(u,s.isBlock);const p=m&&m.parentNode?s.getParent(m.parentNode,s.isBlock):null;"LI"!==(p?p.nodeName.toUpperCase():"")||!(!r||!r.ctrlKey)||(m=p),$(u)&&d>=u.data.length&&(((g,b,v)=>{const y=new Ne(b,v);let E;const w=g.getNonEmptyElements();for(;E=y.next();)if(w[E.nodeName.toLowerCase()]||$(E)&&E.length>0)return!0;return!1})(o.schema,u,m||s.getRoot())||(l=s.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),c=!0)),l=s.create("br"),Nu(s,i,l),OE(o,l,c),o.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},LE=(t,e)=>bg(t).filter(n=>e.length>0&&Yn(R(n),e)).isSome(),yn=uo([{br:[]},{block:[]},{none:[]}]),gO=(t,e)=>{return LE(n=t,KS(n));var n},PE=t=>(e,n)=>bg(e).filter(r=>Qa(R(r))).isSome()===t,ME=(t,e)=>(n,o)=>bg(n).fold(G(""),s=>s.nodeName.toUpperCase())===t.toUpperCase()===e,pO=t=>{const e=cl(t.dom,t.selection.getStart());return ue(e)},ul=t=>ME("pre",t),cd=t=>(e,n)=>WS(e)===t,hO=(t,e)=>{return LE(n=t,qS(n));var n},dd=(t,e)=>e,bO=t=>{const e=We(t),n=cl(t.dom,t.selection.getStart());return q(n)&&t.schema.isValidChild(n.nodeName,e)},vO=t=>{const e=t.selection.getRng(),n=R(e.startContainer),o=$a(n,e.startOffset).map(r=>jr(r)&&!Wr(r));return e.collapsed&&o.getOr(!0)},Bn=(t,e)=>(n,o)=>Ke(t,(r,a)=>r&&a(n,o),!0)?C.some(e):C.none(),ud=(t,e,n)=>{if(!e.mode.isReadOnly()){if(e.selection.isCollapsed()||e.execCommand("delete"),q(n)&&sd(e,t.fakeEventName).isDefaultPrevented())return;t.insert(e,n),q(n)&&ll(e,t.fakeEventName)}},IE=(t,e)=>{if(t.mode.isReadOnly())return;const n=()=>ud(DE,t,e),o=()=>ud(TE,t,e),r=(a=t,s=e,D1([Bn([gO],yn.none()),Bn([ul(!0),pO],yn.none()),Bn([ME("summary",!0)],yn.br()),Bn([ul(!0),cd(!1),dd],yn.br()),Bn([ul(!0),cd(!1)],yn.block()),Bn([ul(!0),cd(!0),dd],yn.block()),Bn([ul(!0),cd(!0)],yn.br()),Bn([PE(!0),dd],yn.br()),Bn([PE(!0)],yn.block()),Bn([hO],yn.br()),Bn([dd],yn.br()),Bn([bO],yn.block()),Bn([vO],yn.block())],[a,!(!s||!s.shiftKey)]).getOr(yn.none()));var a,s;switch(VS(t)){case"linebreak":r.fold(n,n,Ct);break;case"block":r.fold(o,o,Ct);break;case"invert":r.fold(o,n,Ct);break;default:r.fold(n,o,Ct)}},FE=bn(),yO=FE.os.isiOS()&&FE.browser.isSafari(),UE=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{IE(t,e)}))},CO=bn(),zE=t=>t.stopImmediatePropagation(),HE=t=>t.keyCode===Q.PAGE_UP||t.keyCode===Q.PAGE_DOWN,jE=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",zE,!0):!n&&t.get()&&e.off("NodeChange",zE),t.set(n)},$E=(t,e)=>{const n=e.container(),o=e.offset();return $(n)?(n.insertData(o,t),C.some(F(n,o+t.length))):rc(e).map(r=>{const a=ja(t);return e.isAtEnd()?Po(r,a):dn(r,a),F(a.dom,t.length)})},WE=et($E,ye),VE=et($E," "),qE=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},wO=t=>{const e=F.fromRangeStart(t.selection.getRng()),n=R(t.getBody());if(t.selection.isCollapsed()){const o=et(fa,t),r=F.fromRangeStart(t.selection.getRng());return vo(o,t.getBody(),r).bind((a=>s=>s.fold(i=>un(a.dom,F.before(i)),i=>Ve(i),i=>zn(i),i=>nn(a.dom,F.after(i))))(n)).map(a=>()=>((s,i,l)=>c=>Nv(s,c,l)?WE(i):VE(i))(n,e,t.schema)(a).each(qE(t)))}return C.none()},EO=t=>{return Ye(Rt.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),()=>{const o=R(t.getBody());var r,a,s;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(r=o,a=F.fromRangeStart(t.selection.getRng()),s=t.schema,Nv(r,a,s)?WE(a):VE(a)).each(qE(t))});var e,n},_O=t=>tN(t)?[{keyCode:Q.TAB,action:mt(Yw,t,!0)},{keyCode:Q.TAB,shiftKey:!0,action:mt(Yw,t,!1)}]:[],xO=t=>{if(t.addShortcut("Meta+P","","mcePrint"),rO(t),bo(t))return Ae(null);{const e=(t=>{const e=Ae(null),n=et(fa,t);return t.on("NodeChange",o=>{xi(t)&&(((r,a,s)=>{const i=At(tn(R(a.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),l=gt(i,r),c=gt(s,r);z(Na(l,c),et(ew,!1)),z(Na(c,l),et(ew,!0))})(n,t.dom,o.parents),((r,a)=>{const s=a.get();if(r.selection.isCollapsed()&&!r.composing&&s){const i=F.fromRangeStart(r.selection.getRng());F.isTextPosition(i)&&!yu(l=i)&&!Cu(l)&&(Xc(r,((t,e)=>{return F.isTextPosition(e)?(o=e,vb(n=t)&&o.container()===n?((r,a)=>{const s=Cb(r.data.substr(0,a.offset())),i=Cb(r.data.substr(a.offset()));return(s.text+i.text).length>0?(wb(r),F(r,a.offset()-s.count)):a})(n,o):Eb(n,o)):((n,o)=>o.container()===n.parentNode?((r,a)=>{const s=a.container(),i=((l,c)=>{const d=wl(l,c);return-1===d?C.none():C.some(d)})(Oe(s.childNodes),r).map(l=>l<a.offset()?F(s,a.offset()-1):a).getOr(a);return aa(r),i})(n,o):Eb(n,o))(t,e);var n,o})(s,i)),a.set(null))}var l})(t,e),((r,a,s,i)=>{if(a.selection.isCollapsed()){const l=gt(i,r);z(l,c=>{const d=F.fromRangeStart(a.selection.getRng());vo(r,a.getBody(),d).bind(u=>nw(a,s,u))})}})(n,t,e,o.parents))}),e})(t);return(n=t).on("beforeinput",o=>{n.selection.isEditable()&&!ee(o.getTargetRanges(),r=>!q0(n.dom,r))||o.preventDefault()}),(n=>{n.on("keyup compositionstart",et(yT,n))})(t),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((a,s,i)=>{const l=Rt.os.isMacOS()||Rt.os.isiOS();ol([{keyCode:Q.RIGHT,action:mt(kw,a,!0)},{keyCode:Q.LEFT,action:mt(kw,a,!1)},{keyCode:Q.UP,action:mt(Nw,a,!1)},{keyCode:Q.DOWN,action:mt(Nw,a,!0)},...l?[{keyCode:Q.UP,action:mt(Qc,a,!1),metaKey:!0,shiftKey:!0},{keyCode:Q.DOWN,action:mt(Qc,a,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Q.RIGHT,action:mt(Vw,a,!0)},{keyCode:Q.LEFT,action:mt(Vw,a,!1)},{keyCode:Q.UP,action:mt(eg,a,!1)},{keyCode:Q.DOWN,action:mt(eg,a,!0)},{keyCode:Q.UP,action:mt(eg,a,!1)},{keyCode:Q.UP,action:mt(Tw,a,!1)},{keyCode:Q.DOWN,action:mt(Tw,a,!0)},{keyCode:Q.RIGHT,action:mt(Lw,a,!0)},{keyCode:Q.LEFT,action:mt(Lw,a,!1)},{keyCode:Q.UP,action:mt(Pw,a,!1)},{keyCode:Q.DOWN,action:mt(Pw,a,!0)},{keyCode:Q.RIGHT,action:mt(ow,a,s,!0)},{keyCode:Q.LEFT,action:mt(ow,a,s,!1)},{keyCode:Q.RIGHT,ctrlKey:!l,altKey:l,action:mt(dT,a,s)},{keyCode:Q.LEFT,ctrlKey:!l,altKey:l,action:mt(uT,a,s)},{keyCode:Q.UP,action:mt(Rw,a,!1)},{keyCode:Q.DOWN,action:mt(Rw,a,!0)}],i).each(c=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{let r=!1;n.on("keydown",a=>{r=a.keyCode===Q.BACKSPACE,a.isDefaultPrevented()||((s,i,l)=>{const c=l.keyCode===Q.BACKSPACE?"deleteContentBackward":"deleteContentForward",d=s.selection.isCollapsed(),u=d?"character":"selection",m=p=>d?p?"word":"line":"selection";Dw([{keyCode:Q.BACKSPACE,action:mt(vw,s)},{keyCode:Q.BACKSPACE,action:mt(If,s,!1)},{keyCode:Q.DELETE,action:mt(If,s,!0)},{keyCode:Q.BACKSPACE,action:mt(Lf,s,!1)},{keyCode:Q.DELETE,action:mt(Lf,s,!0)},{keyCode:Q.BACKSPACE,action:mt(Kf,s,i,!1)},{keyCode:Q.DELETE,action:mt(Kf,s,i,!0)},{keyCode:Q.BACKSPACE,action:mt(Um,s,!1)},{keyCode:Q.DELETE,action:mt(Um,s,!0)},{keyCode:Q.BACKSPACE,action:mt(va,s,!1,u)},{keyCode:Q.DELETE,action:mt(va,s,!0,u)},...SE?[{keyCode:Q.BACKSPACE,altKey:!0,action:mt(va,s,!1,m(!0))},{keyCode:Q.DELETE,altKey:!0,action:mt(va,s,!0,m(!0))},{keyCode:Q.BACKSPACE,metaKey:!0,action:mt(va,s,!1,m(!1))}]:[{keyCode:Q.BACKSPACE,ctrlKey:!0,action:mt(va,s,!1,m(!0))},{keyCode:Q.DELETE,ctrlKey:!0,action:mt(va,s,!0,m(!0))}],{keyCode:Q.BACKSPACE,action:mt(Uf,s,!1)},{keyCode:Q.DELETE,action:mt(Uf,s,!0)},{keyCode:Q.BACKSPACE,action:mt(Xf,s,!1)},{keyCode:Q.DELETE,action:mt(Xf,s,!0)},{keyCode:Q.BACKSPACE,action:mt(Bf,s,!1)},{keyCode:Q.DELETE,action:mt(Bf,s,!0)},{keyCode:Q.BACKSPACE,action:mt(Of,s,!1)},{keyCode:Q.DELETE,action:mt(Of,s,!0)},{keyCode:Q.BACKSPACE,action:mt(Yf,s,!1)},{keyCode:Q.DELETE,action:mt(Yf,s,!0)},{keyCode:Q.BACKSPACE,action:mt(Ff,s,!1)},{keyCode:Q.DELETE,action:mt(Ff,s,!0)}],l).filter(p=>s.selection.isEditable()).each(p=>{l.preventDefault(),sd(s,c).isDefaultPrevented()||(p(),ll(s,c))})})(n,o,a)}),n.on("keyup",a=>{var s,i,l;a.isDefaultPrevented()||(i=a,l=r,ol([{keyCode:Q.BACKSPACE,action:mt(_1,s=n)},{keyCode:Q.DELETE,action:mt(_1,s)},...SE?[{keyCode:Q.BACKSPACE,altKey:!0,action:mt(nl,s)},{keyCode:Q.DELETE,altKey:!0,action:mt(nl,s)},...l?[{keyCode:iO?224:91,action:mt(nl,s)}]:[]]:[{keyCode:Q.BACKSPACE,ctrlKey:!0,action:mt(nl,s)},{keyCode:Q.DELETE,ctrlKey:!0,action:mt(nl,s)}]],i)),r=!1})})(t,e),(n=>{let o=C.none();n.on("keydown",r=>{var a;r.keyCode===Q.ENTER&&(yO&&(a=>{if(!a.collapsed)return!1;const s=a.startContainer;if($(s)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=s.data.charAt(a.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(o=C.some((a=n).selection.getBookmark()),a.undoManager.add()):UE(n,r))}),n.on("keyup",r=>{r.keyCode===Q.ENTER&&o.each(()=>{return s=r,(a=n).undoManager.undo(),o.fold(Ct,i=>a.selection.moveToBookmark(i)),UE(a,s),void(o=C.none());var a,s})})})(t),(n=>{n.on("keydown",o=>{var r,a;o.isDefaultPrevented()||(a=o,Dw([{keyCode:Q.SPACEBAR,action:mt(wO,r=n)},{keyCode:Q.SPACEBAR,action:mt(EO,r)}],a).each(s=>{a.preventDefault(),sd(r,"insertText",{data:" "}).isDefaultPrevented()||(s(),ll(r,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",o=>{o.isComposing||(r=>{const a=R(r.getBody());r.selection.isCollapsed()&&((t,e,n)=>{const o=e.container();if(!$(o))return C.none();if((r=>{const a=r.container();return $(a)&&_e(a.data,ye)})(e)){const r=Tv(t,o,!1,n)||(a=>{const s=a.data,i=(l=>{const c=l.split("");return At(c,(d,u)=>lc(d)&&u>0&&u<c.length-1&&Vu(c[u-1])&&Vu(c[u+1])?" ":d).join("")})(s);return i!==s&&(a.data=i,!0)})(o)||Ov(t,o,!1,n);return Ye(r,e)}if(Am(t,e,n)){const r=Tv(t,o,!0,n)||Ov(t,o,!0,n);return Ye(r,e)}return C.none()})(a,F.fromRangeStart(r.selection.getRng()),r.schema).each(s=>{r.selection.setRng(s.toRange())})})(n)})})(t),(n=>{n.on("keydown",o=>{var a;o.isDefaultPrevented()||(a=o,ol([..._O(n)],a).each(s=>{a.preventDefault()}))})})(t),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((a,s,i)=>{const l=Rt.os.isMacOS()||Rt.os.isiOS();ol([{keyCode:Q.END,action:mt(Aw,a,!0)},{keyCode:Q.HOME,action:mt(Aw,a,!1)},...l?[]:[{keyCode:Q.HOME,action:mt(Qc,a,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Q.END,action:mt(Qc,a,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Q.END,action:mt(Mw,a,!0)},{keyCode:Q.HOME,action:mt(Mw,a,!1)},{keyCode:Q.END,action:mt(Zc,a,!0,s)},{keyCode:Q.HOME,action:mt(Zc,a,!1,s)}],i).each(c=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{if(CO.os.isMacOS())return;const r=Ae(!1);n.on("keydown",a=>{HE(a)&&jE(r,n,!0)}),n.on("keyup",a=>{var s,i,l;a.isDefaultPrevented()||(l=a,ol([{keyCode:Q.PAGE_UP,action:mt(Zc,s=n,!1,i=o)},{keyCode:Q.PAGE_DOWN,action:mt(Zc,s,!0,i)}],l)),HE(a)&&r.get()&&(jE(r,n,!1),n.nodeChanged())})})(t,e),e}var n};class SO{constructor(e){let n;this.lastPath=[],this.editor=e;const o=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{const a=e.selection.getRng(),s={startContainer:a.startContainer,startOffset:a.startOffset,endContainer:a.endContainer,endOffset:a.endOffset};"nodechange"!==r.type&&dm(s,n)||e.dispatch("SelectionChange"),n=s}),e.on("contextmenu",()=>{yc(e),e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const r=e.selection.getStart(!0);r&&cc(e)&&!o.isSameElementPath(r)&&e.dom.isChildOf(r,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",r=>{!r.isDefaultPrevented()&&cc(e)&&("IMG"===e.selection.getNode().nodeName?Nn.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor,o=n.selection;let r;if(n.initialized&&o&&!xk(n)){const a=n.getBody();r=o.getStart(!0)||a,r.ownerDocument===n.getDoc()&&n.dom.isChildOf(r,a)||(r=a);const s=[];n.dom.getParent(r,i=>i===a||(s.push(i),!1)),n.dispatch("NodeChange",{...e,element:r,parents:s})}}isSameElementPath(e){let n;const o=this.editor,r=Br(o.dom.getParents(e,se,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=r,!0}return this.lastPath=r,!1}}const KE=hi("image"),_g=hi("event"),md=t=>e=>{e[_g]=t},YE=md(0),kO=md(2),NO=md(1),xg=hi("mode"),fd=t=>e=>{e[xg]=t},GE=(t,e)=>fd(e)(t),XE=fd(0),Sg=fd(2),RO=fd(1),ZE=t=>e=>C.from(e[xg]).exists(o=>o===t),_s=ZE(0),QE=ZE(1),TO=["none","copy","link","move"],OO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],kg=()=>{const t=new window.DataTransfer;let e="move",n="all";const o={get dropEffect(){return e},set dropEffect(r){Bt(TO,r)&&(e=r)},get effectAllowed(){return n},set effectAllowed(r){(t=>C.from(t[_g]).exists(n=>0===n))(o)&&Bt(OO,r)&&(n=r)},get items(){return r=o,a=t.items,{...a,get length(){return a.length},add:(s,i)=>{if(_s(r)){if(!at(s))return a.add(s);if(!ce(i))return a.add(s,i)}return null},remove:s=>{_s(r)&&a.remove(s)},clear:()=>{_s(r)&&a.clear()}};var r,a},get files(){return QE(o)?Object.freeze({length:0,item:r=>null}):t.files},get types(){return t.types},setDragImage:(r,a,s)=>{_s(o)&&(o[KE]={image:r,x:a,y:s},t.setDragImage(r,a,s))},getData:r=>QE(o)?"":t.getData(r),setData:(r,a)=>{_s(o)&&t.setData(r,a)},clearData:r=>{_s(o)&&t.clearData(r)}};return XE(o),o},JE=(t,e)=>t.setData("text/html",e),t_="x-tinymce/html",gd=G(t_),Ng="\x3c!-- "+t_+" --\x3e",BO=t=>Ng+t,e_=t=>-1!==t.indexOf(Ng),n_="%MCEPASTEBIN%",Ag=t=>t.dom.get("mcepastebin"),DO=t=>q(t)&&"mcepastebin"===t.id,o_=t=>t===n_,r_=(t,e)=>(W.each(e,n=>{t=_a(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),a_=t=>r_(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,o)=>n||o?ye:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),s_=(t,e)=>({content:t,cancelled:e}),Rg=(t,e)=>(t.insertContent(e,{merge:jk(t),paste:!0}),!0),Tg=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),LO=(t,e,n)=>{return!(t.selection.isCollapsed()||!Tg(e)||(o=t,r=e,a=n,o.undoManager.extra(()=>{a(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),0));var o,r,a},PO=(t,e,n)=>{return o=t,!(!Tg(r=e)||!ee(hb(o),a=>Ba(r.toLowerCase(),`.${a.toLowerCase()}`)))&&((o,r,a)=>(o.undoManager.extra(()=>{a(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(t,e,n);var o,r},MO=(()=>{let e=0;return()=>"mceclip"+e++})(),IO=t=>{const e=kg();return JE(e,t),Sg(e),e},i_=(t,e,n,o,r)=>{const a=((c,d,u)=>{const m=c.dispatch("PastePreProcess",{content:d,internal:u}),p=((f,h)=>{const g=ps({sanitize:pb(f),sandbox_iframes:bb(f),sandbox_iframes_exclusions:Mu(f),convert_unsafe_embeds:oN(f)},f.schema);g.addNodeFilter("meta",v=>{W.each(v,y=>{y.remove()})});const b=g.parse(h,{forced_root_block:!1,isRootContent:!0});return vr({validate:!0},f.schema).serialize(b)})(c,m.content);return c.hasEventListeners("PastePostProcess")&&!m.isDefaultPrevented()?((f,h,g)=>{const b=f.dom.create("div",{style:"display:none"},h),v=f.dispatch("PastePostProcess",{node:b,internal:g});return s_(v.node.innerHTML,v.isDefaultPrevented())})(c,p,u):s_(p,m.isDefaultPrevented())})(t,e,n);if(!a.cancelled){const s=a.content,i=()=>{return l=t,c=s,void(o||!$k(l)?Rg(l,c):(u=l,m=c,W.each([LO,PO,Rg],p=>!p(u,m,Rg))));var l,c,u,m};r?sd(t,"insertFromPaste",{dataTransfer:IO(s)}).isDefaultPrevented()||(i(),ll(t,"insertFromPaste")):i()}},pd=(t,e,n,o)=>{const r=n||e_(e);i_(t,e.replace(Ng,""),r,!1,o)},Og=(t,e,n)=>{const o=t.dom.encode(e).replace(/\r\n/g,"\n"),r=((a,s,i)=>{const l=a.split(/\n\n/),c=((m,p)=>{let f="<"+m;const h=Aa(p,(g,b)=>b+'="'+Zr.encodeAllRaw(g)+'"');return h.length&&(f+=" "+h.join(" ")),f+">"})(s,i),d="</"+s+">",u=At(l,m=>m.split(/\n/).join("<br />"));return 1===u.length?u[0]:At(u,m=>c+m+d).join("")})(Sp(o,Vk(t)),We(t),_i(t));i_(t,r,!1,!0,n)},l_=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const o=t.types[n];try{e[o]=t.getData(o)}catch{e[o]=""}}return e},_r=(t,e)=>e in t&&t[e].length>0,c_=t=>_r(t,"text/html")||_r(t,"text/plain"),d_=(t,e,n)=>{const o="paste"===e.type?e.clipboardData:e.dataTransfer;var r;if(nc(t)&&o){const a=((s,i)=>{const l=i.items?an(Oe(i.items),d=>"file"===d.kind?[d.getAsFile()]:[]):[],c=i.files?Oe(i.files):[];return gt(l.length>0?l:c,(d=>{const u=hb(d);return m=>Dt(m.type,"image/")&&ee(u,p=>(f=>{const h=f.toLowerCase(),g={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return W.hasOwn(g,h)?"image/"+g[h]:"image/"+h})(p)===m.type)})(s))})(t,o);if(a.length>0)return e.preventDefault(),(r=a,Promise.all(At(r,s=>Zy(s).then(i=>({file:s,uri:i}))))).then(s=>{n&&t.selection.setRng(n),z(s,i=>{var l,c;l=t,lf((c=i).uri).each(({data:d,type:u,base64Encoded:m})=>{const p=m?d:btoa(d),f=c.file,h=l.editorUpload.blobCache,b=h.getByData(p,u)??((v,y,E,w)=>{const _=MO(),k=ob(v)&&q(E.name),S=k?((x,N)=>{const T=N.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return q(T)?x.dom.encode(T[1]):void 0})(v,E.name):_,P=y.create(_,E,w,S,k?E.name:void 0);return y.add(P),P})(l,h,f,p);pd(l,`<img src="${b.blobUri()}">`,!1,!0)})})}),!0}return!1},Bg=(t,e,n,o,r)=>{let a=a_(n);const s=_r(e,gd())||e_(n),i=!s&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(a),l=Tg(a);(o_(a)||!a.length||i&&!l)&&(o=!0),(o||l)&&(a=_r(e,"text/plain")&&i?e["text/plain"]:(c=>{const d=ur(),u=ps({},d);let m="";const p=d.getVoidElements(),f=W.makeMap("script noscript style textarea video audio iframe object"," "),h=d.getBlockElements(),g=b=>{const v=b.name,y=b;if("br"!==v){if("wbr"!==v)if(p[v]&&(m+=" "),f[v])m+=" ";else{if(3===b.type&&(m+=b.value),!(b.name in d.getVoidElements())){let E=b.firstChild;if(E)do{g(E)}while(E=E.next)}h[v]&&y.next&&(m+="\n","p"===v&&(m+="\n"))}}else m+="\n"};return c=r_(c,[/<!\[[^\]]+\]>/g]),g(u.parse(c)),m})(a)),o_(a)||(o?Og(t,a,r):pd(t,a,s,r))},u_=(t,e,n,o)=>{((r,a,s)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",a),r.setData("text/plain",s),r.setData(gd(),a),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),o()):n(e.html,o)},m_=t=>(e,n)=>{const{dom:o,selection:r}=t,a=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),s=o.create("div",{contenteditable:"true"},e);o.setStyles(a,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(s),o.add(t.getBody(),a);const i=r.getRng();s.focus();const l=o.createRng();l.selectNodeContents(s),r.setRng(l),Nn.setEditorTimeout(t,()=>{r.setRng(i),o.remove(a),n()},0)},f_=t=>({html:BO(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),g_=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},p_=(t,e)=>{var n,o;return ua.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(o=e.clientY)&&void 0!==o?o:0,t.getDoc())},h_=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},UO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,b_=t=>W.trim(t).replace(UO,li).toLowerCase(),zO=(t,e,n)=>{const o=zk(t);if(n||"all"===o||!Hk(t))return e;const r=o?o.split(/[, ]/):[];if(r&&"none"!==o){const a=t.dom,s=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,c,d)=>{const u=a.parseStyle(a.decode(c)),m={};for(let f=0;f<r.length;f++){const h=u[r[f]];let g=h,b=a.getStyle(s,r[f],!0);/color/.test(r[f])&&(g=b_(g),b=b_(b)),b!==g&&(m[r[f]]=h)}const p=a.serializeStyle(m,"span");return p?l+' style="'+p+'"'+d:l+d})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(a,s,i,l)=>s+' style="'+i+'"'+l)},jO=ae,v_=$,$O=t=>Xt(t.dom),y_=t=>e=>Mt(R(t),e),C_=(t,e)=>$r(R(t),$O,y_(e)),w_=(t,e,n)=>{const o=new Ne(t,e),r=n?o.next.bind(o):o.prev.bind(o);let a=t;for(let s=n?t:r();s&&!jO(s);s=r())to(s)&&(a=s);return a};var xs;!function(t){t.Before="before",t.After="after"}(xs||(xs={}));const VO=(t,e)=>Math.abs(t.left-e),qO=(t,e)=>Math.abs(t.right-e),YO=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),Dg=(t,e,n,o)=>{const r=d=>to(d.node)?C.some(d):ot(d.node)?Dg(Oe(d.node.childNodes),e,n,!1):C.none(),a=(d,u)=>{const m=Ot(d,(p,f)=>u(p,e,n)-u(f,e,n));return No(m,r).map(p=>{return o&&!$(p.node)&&m.length>1?(f=p,h=m[1],g=u,r(h).filter(b=>Math.abs(g(f,e,n)-g(b,e,n))<2&&$(b.node))).getOr(p):p;var f,h,g})},[s,i]=((t,e)=>{return(n=gt(t,n=>{return(o=e)>=(r=n).top&&o<=r.bottom;var o,r}),Ke(n,(o,r)=>o.fold(()=>C.some(r),a=>{const s=Math.min(r.left,a.left),i=Math.min(r.top,a.top),l=Math.max(r.right,a.right),c=Math.max(r.bottom,a.bottom);return C.some({top:i,right:l,bottom:c,left:s,width:l-s,height:c-i})}),C.none())).fold(()=>[[],t],n=>{const{pass:o,fail:r}=Xo(t,a=>((s,i)=>{const l=(c=s,d=i,Math.max(0,Math.min(c.bottom,d.bottom)-Math.max(c.top,d.top))/Math.min(s.height,i.height));var c,d;return((c,d)=>c.top<d.bottom&&c.bottom>d.top)(s,i)&&l>.5})(a,n));return[o,r]});var n})(Y1(t),n),{pass:l,fail:c}=Xo(i,d=>d.top<n);return a(s,YO).orThunk(()=>a(c,_h)).orThunk(()=>a(l,_h))},E_=(t,e,n)=>((o,r,a)=>{const s=R(o),l=((t,e,n)=>C.from(t.dom.elementFromPoint(e,n)).map(Js))(sr(s),r,a).filter(c=>Gn(s,c)).getOr(s);return((c,d,u,m)=>{const p=(f,h)=>{const g=gt(f.dom.childNodes,So(b=>ot(b)&&b.classList.contains("mce-drag-container")));return h.fold(()=>Dg(g,u,m,!0),b=>{const v=gt(g,y=>y!==b.dom);return Dg(v,u,m,!0)}).orThunk(()=>(Mt(f,c)?C.none():Ol(f)).bind(b=>p(b,C.some(f))))};return p(d,C.none())})(s,l,r,a)})(t,e,n).filter(o=>ki(o.node)).map(o=>{return{node:(r=o).node,position:VO(r,a=e)<qO(r,a)?xs.Before:xs.After};var r,a}),__=t=>{var e,n;const o=t.getBoundingClientRect(),r=t.ownerDocument,a=r.documentElement,s=r.defaultView;return{top:o.top+(null!==(e=s?.scrollY)&&void 0!==e?e:0)-a.clientTop,left:o.left+(null!==(n=s?.scrollX)&&void 0!==n?n:0)-a.clientLeft}},x_=t=>({target:t,srcElement:t}),S_=Xt,XO=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(S_,Un),ZO=(t,e,n,o)=>{const r=t.dom,a=e.cloneNode(!0);r.setStyles(a,{width:n,height:o}),r.setAttrib(a,"data-mce-selected",null);const s=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(s,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(a,{margin:0,boxSizing:"border-box"}),s.appendChild(a),s},hd=(t,e)=>n=>()=>{const o="left"===t?n.scrollX:n.scrollY;n.scroll({[t]:o+e,behavior:"smooth"})},k_=hd("left",-32),N_=hd("left",32),A_=hd("top",-32),R_=hd("top",32),T_=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},ml=(t,e,n,o,r)=>{"dragstart"===e&&JE(o,t.dom.getOuterHTML(n));const a=((t,e,n,o)=>{const r=((a,s)=>{const i=(l=>{const c=kg(),d=C.from(l[xg]);return Sg(l),YE(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(u=l,C.from(u[KE])).each(u=>c.setDragImage(u.image,u.x,u.y)),z(l.types,u=>{"Files"!==u&&c.setData(u,l.getData(u))}),z(l.files,u=>c.items.add(u)),(u=>C.from(u[_g]))(l).each(u=>{var m;m=c,md(u)(m)}),d.each(u=>{GE(l,u),GE(c,u)}),c;var u})(a);return"dragstart"===s?(YE(i),XE(i)):"drop"===s?(kO(i),Sg(i)):(NO(i),RO(i)),i})(n,t);return ce(o)?((a,s,i)=>{const l=Sa("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:a,composedPath:l,initEvent:l,preventDefault:Ct,stopImmediatePropagation:Ct,stopPropagation:Ct,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...x_(s)}})(t,e,r):(a=t,s=o,i=e,l=r,{...s,dataTransfer:l,type:a,...x_(i)});var a,s,i,l})(e,n,o,r);return t.dispatch(e,a)},O_=(t,e,n)=>{t.on(o=>{o.intervalId.clear(),o.dragging&&n.fold(()=>ml(e,"dragend",o.element,o.dataTransfer),r=>ml(e,"dragend",o.element,o.dataTransfer,r))}),B_(t)},B_=t=>{t.on(e=>{e.intervalId.clear(),T_(e.ghost)}),t.clear()},fl=Xt,D_=(t,e)=>ga(t.getBody(),e),tB=t=>{const e=t.selection,n=t.dom,o=t.getBody(),r=((t,e,n,o)=>{const r=Fo();let a,s;const i=We(t),l=t.dom,c=()=>{(d=>{var u,m;const p=tn(R(d),"*[contentEditable=false],video,audio,embed,object");for(let f=0;f<p.length;f++){const h=p[f].dom;let g=h.previousSibling;if(Gl(g)){const b=g.data;1===b.length?null===(u=g.parentNode)||void 0===u||u.removeChild(g):g.deleteData(b.length-1,1)}g=h.nextSibling,Yl(g)&&(1===g.data.length?null===(m=g.parentNode)||void 0===m||m.removeChild(g):g.deleteData(0,1))}})(e),s&&(aa(s),s=null),r.on(d=>{l.remove(d.caret),r.clear()}),a&&(clearInterval(a),a=void 0)};return{show:(d,u)=>{let m;if(c(),dN(u))return null;if(!n(u))return s=((p,f)=>{var h;const g=(null!==(h=p.ownerDocument)&&void 0!==h?h:document).createTextNode(Re),b=p.parentNode;if(f){const v=p.previousSibling;if(ts(v)){if(En(v))return v;if(Gl(v))return v.splitText(v.data.length-1)}b?.insertBefore(g,p)}else{const v=p.nextSibling;if(ts(v)){if(En(v))return v;if(Yl(v))return v.splitText(1),v}p.nextSibling?b?.insertBefore(g,p.nextSibling):b?.appendChild(g)}return g})(u,d),m=u.ownerDocument.createRange(),Si(s.nextSibling)?(m.setStart(s,0),m.setEnd(s,0)):(m.setStart(s,1),m.setEnd(s,1)),m;{const p=((g,b,v)=>{var y;const E=(null!==(y=b.ownerDocument)&&void 0!==y?y:document).createElement(g);E.setAttribute("data-mce-caret",v?"before":"after"),E.setAttribute("data-mce-bogus","all"),E.appendChild(Ja().dom);const w=b.parentNode;return v?w?.insertBefore(E,b):b.nextSibling?w?.insertBefore(E,b.nextSibling):w?.appendChild(E),E})(i,u,d),f=_b(e,u,d);l.setStyle(p,"top",f.top),l.setStyle(p,"caret-color","transparent"),s=p;const h=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(h,{...f}),l.add(e,h),r.set({caret:h,element:u,before:d}),d&&l.addClass(h,"mce-visual-caret-before"),a=setInterval(()=>{r.on(g=>{o()?l.toggleClass(g.caret,"mce-visual-caret-hidden"):l.addClass(g.caret,"mce-visual-caret-hidden")})},500),m=u.ownerDocument.createRange(),m.setStart(p,0),m.setEnd(p,0)}return m},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(d=>{const u=_b(e,d.element,d.before);l.setStyles(d.caret,{...u})})},destroy:()=>clearInterval(a)}})(t,o,n.isBlock,()=>fs(t)),a="sel-"+n.uniqueId(),s="data-mce-selected";let i;const l=g=>g!==o&&(fl(g)||co(g))&&n.isChildOf(g,o)&&n.isEditable(g.parentNode),c=(g,b,v,y=!0)=>t.dispatch("ShowCaret",{target:b,direction:g,before:v}).isDefaultPrevented()?null:(y&&e.scrollIntoView(b,-1===g),r.show(v,b)),d=g=>En(g)||Yl(g)||Gl(g),u=g=>d(g.startContainer)||d(g.endContainer),p=(g,b)=>{if(!g)return null;if(g.collapsed){if(!u(g)){const w=b?1:-1,_=Ti(w,o,g),k=_.getNode(!b);if(q(k)){if(ki(k))return c(w,k,!!b&&!_.isAtEnd(),!1);if(fr(k)&&Xt(k.nextSibling)){const O=n.createRng();return O.setStart(k,0),O.setEnd(k,0),O}}const S=_.getNode(b);if(q(S)){if(ki(S))return c(w,S,!b&&!_.isAtEnd(),!1);if(fr(S)&&Xt(S.previousSibling)){const O=n.createRng();return O.setStart(S,1),O.setEnd(S,1),O}}}return null}let v=g.startContainer,y=g.startOffset;const E=g.endOffset;if($(v)&&0===y&&fl(v.parentNode)&&(v=v.parentNode,y=n.nodeIndex(v),v=v.parentNode),!ot(v))return null;if(E===y+1&&v===g.endContainer){const w=v.childNodes[y];if(l(w))return(_=>{const k=_.cloneNode(!0),S=t.dispatch("ObjectSelected",{target:_,targetClone:k});if(S.isDefaultPrevented())return null;const O=((x,N)=>{const T=R(t.getBody()),U=t.getDoc(),j=Bl(T,"#"+a).getOrThunk(()=>{const rt=Tl('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',U);return Et(rt,"id",a),be(T,rt),rt}),H=n.createRng();qa(j),Vr(j,[ja(ye,U),R(N),ja(ye,U)]),H.setStart(j.dom.firstChild,1),H.setEnd(j.dom.lastChild,0),Dl(j,{top:n.getPos(x,t.getBody()).y+"px"}),F0(j);const tt=e.getSel();return tt&&(tt.removeAllRanges(),tt.addRange(H)),H})(_,S.targetClone),P=R(_);return z(tn(R(t.getBody()),`*[${s}]`),x=>{Mt(P,x)||ne(x,s)}),n.getAttrib(_,s)||_.setAttribute(s,"1"),i=_,h(),O})(w)}return null},f=()=>{i&&i.removeAttribute(s),Bl(R(t.getBody()),"#"+a).each(Jt),i=null},h=()=>{r.hide()};return bo(t)||(t.on("click",g=>{n.isEditable(g.target)||(g.preventDefault(),t.focus())}),t.on("blur NewBlock",f),t.on("ResizeWindow FullscreenStateChanged",r.reposition),t.on("tap",g=>{const b=g.target,v=D_(t,b);fl(v)?(g.preventDefault(),Qi(t,v).each(p)):l(b)&&Qi(t,b).each(p)},!0),t.on("mousedown",g=>{const b=g.target;if(b!==o&&"HTML"!==b.nodeName&&!n.isChildOf(b,o)||!((y,E,w)=>{const _=R(y.getBody()),k=y.inline?_:R(sr(_).dom.documentElement),S=((O,P,x,N)=>{const T=P.dom.getBoundingClientRect();return{x:x-(O?T.left+P.dom.clientLeft+NR(P):0),y:N-(O?T.top+P.dom.clientTop+kR(P):0)}})(y.inline,k,E,w);return((O,P,x)=>{const N=xR(O),T=SR(O);return P>=0&&x>=0&&P<=N&&x<=T})(k,S.x,S.y)})(t,g.clientX,g.clientY))return;f(),h();const v=D_(t,b);fl(v)?(g.preventDefault(),Qi(t,v).each(p)):E_(o,g.clientX,g.clientY).each(y=>{var E;g.preventDefault(),(E=c(1,y.node,y.position===xs.Before,!1))&&e.setRng(E),Mo(v)?v.focus():t.getBody().focus()})}),t.on("keypress",g=>{Q.modifierPressed(g)||fl(e.getNode())&&g.preventDefault()}),t.on("GetSelectionRange",g=>{let b=g.range;if(i){if(!i.parentNode)return void(i=null);b=b.cloneRange(),b.selectNode(i),g.range=b}}),t.on("SetSelectionRange",g=>{g.range=(g=>{const b=t.schema.getVoidElements(),v=n.createRng(),y=g.startContainer,E=g.startOffset,w=g.endContainer,_=g.endOffset;return bt(b,y.nodeName.toLowerCase())?0===E?v.setStartBefore(y):v.setStartAfter(y):v.setStart(y,E),bt(b,w.nodeName.toLowerCase())?0===_?v.setEndBefore(w):v.setEndAfter(w):v.setEnd(w,_),v})(g.range);const b=p(g.range,g.forward);b&&(g.range=b)}),t.on("AfterSetSelectionRange",g=>{const b=g.range,v=b.startContainer.parentElement;var y,E;u(b)||ot(y=v)&&"mcepastebin"===y.id||h(),q(E=v)&&n.hasClass(E,"mce-offscreen-selection")||f()}),(t=>{const e=Fo(),n=qt.DOM,o=document,r=((l,c)=>d=>{if(0===d.button){const u=fe(c.dom.getParents(d.target),XO).getOr(null);if(q(u)&&(m=c.dom,p=c.getBody(),S_(f=u)&&f!==p&&m.isEditable(f.parentElement))){const m=c.dom.getPos(u),p=c.getBody(),f=c.getDoc().documentElement;l.set({element:u,dataTransfer:kg(),dragging:!1,screenX:d.screenX,screenY:d.screenY,maxX:(c.inline?p.scrollWidth:f.offsetWidth)-2,maxY:(c.inline?p.scrollHeight:f.offsetHeight)-2,relX:d.pageX-m.x,relY:d.pageY-m.y,width:u.offsetWidth,height:u.offsetHeight,ghost:ZO(c,u,u.offsetWidth,u.offsetHeight),intervalId:oS(100)})}}var m,p,f})(e,t),a=((t,e)=>{const n=Vl((r,a)=>{return i=r,l=a,(s=e)._selectionOverrides.hideFakeCaret(),void E_(s.getBody(),i,l).fold(()=>s.selection.placeCaretAt(i,l),c=>{const d=s._selectionOverrides.showCaret(1,c.node,c.position===xs.Before,!1);d?s.selection.setRng(d):s.selection.placeCaretAt(i,l)});var s,i,l},0);e.on("remove",n.cancel);const o=t;return r=>t.on(a=>{const s=Math.max(Math.abs(r.screenX-a.screenX),Math.abs(r.screenY-a.screenY));if(!a.dragging&&s>10){const c=ml(e,"dragstart",a.element,a.dataTransfer,r);if(q(c.dataTransfer)&&(a.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;a.dragging=!0,e.focus()}if(a.dragging){const c=r.currentTarget===e.getDoc().documentElement,d=((u,m)=>({pageX:m.pageX-u.relX,pageY:m.pageY+5}))(a,(m=r,p=(g=u=e).inline?__(g.getBody()):{left:0,top:0},f=(g=>{const b=g.getBody();return g.inline?{left:b.scrollLeft,top:b.scrollTop}:{left:0,top:0}})(u),h=((g,b)=>{if(b.target.ownerDocument!==g.getDoc()){const v=__(g.getContentAreaContainer()),y=(E=>{const w=E.getBody(),_=E.getDoc().documentElement;return E.inline?{left:w.scrollLeft,top:w.scrollTop}:{left:w.scrollLeft||_.scrollLeft,top:w.scrollTop||_.scrollTop}})(g);return{left:b.pageX-v.left+y.left,top:b.pageY-v.top+y.top}}return{left:b.pageX,top:b.pageY}})(u,m),{pageX:h.left-p.left+f.left,pageY:h.top-p.top+f.top}));i=a.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((u,m,p,f,h,g,b,v,y,E,w,_)=>{let k=0,S=0;u.style.left=m.pageX+"px",u.style.top=m.pageY+"px",m.pageX+p>h&&(k=m.pageX+p-h),m.pageY+f>g&&(S=m.pageY+f-g),u.style.width=p-k+"px",u.style.height=f-S+"px";const O=y.clientHeight,P=y.clientWidth,x=b+y.getBoundingClientRect().top,N=v+y.getBoundingClientRect().left;w.on(T=>{T.intervalId.clear(),T.dragging&&_&&(b+8>=O?T.intervalId.set(R_(E)):b-8<=0?T.intervalId.set(A_(E)):v+8>=P?T.intervalId.set(N_(E)):v-8<=0?T.intervalId.set(k_(E)):x+16>=window.innerHeight?T.intervalId.set(R_(window)):x-16<=0?T.intervalId.set(A_(window)):N+16>=window.innerWidth?T.intervalId.set(N_(window)):N-16<=0&&T.intervalId.set(k_(window)))})})(a.ghost,d,a.width,a.height,a.maxX,a.maxY,r.clientY,r.clientX,e.getContentAreaContainer(),e.getWin(),o,c),n.throttle(r.clientX,r.clientY)}var u,m,g,p,f,h,i,l})})(e,t),s=((l,c)=>d=>{l.on(u=>{var m,p,f,h;if(u.intervalId.clear(),u.dragging){if(p=c,f=(p=>{const f=p.getSel();if(q(f)){const h=f.getRangeAt(0).startContainer;return $(h)?h.parentNode:h}return null})(c.selection),h=u.element,!ue(f)&&f!==h&&!p.dom.isChildOf(f,h)&&p.dom.isEditable(f)){const p=null!==(m=c.getDoc().elementFromPoint(d.clientX,d.clientY))&&void 0!==m?m:c.getBody();ml(c,"drop",p,u.dataTransfer,d).isDefaultPrevented()||c.undoManager.transact(()=>{((f,h)=>{const g=f.getParent(h.parentNode,f.isBlock);T_(h),g&&g!==f.getRoot()&&f.isEmpty(g)&&mr(R(g))})(c.dom,u.element),(f=>{const h=f.getData("text/html");return""===h?C.none():C.some(h)})(u.dataTransfer).each(f=>c.insertContent(f)),c._selectionOverrides.hideFakeCaret()})}ml(c,"dragend",c.getBody(),u.dataTransfer,d)}}),B_(l)})(e,t),i=((l,c)=>d=>O_(l,c,C.some(d)))(e,t);t.on("mousedown",r),t.on("mousemove",a),t.on("mouseup",s),n.bind(o,"mousemove",a),n.bind(o,"mouseup",i),t.on("remove",()=>{n.unbind(o,"mousemove",a),n.unbind(o,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===Q.ESC&&O_(e,t,C.none())})})(g=t),Nk(g)&&(b=>{const v=w=>{if(!w.isDefaultPrevented()){const _=w.dataTransfer;_&&(Bt(_.types,"Files")||_.files.length>0)&&(w.preventDefault(),"drop"===w.type&&$c(b,"Dropped file type is not supported"))}},y=w=>{Cc(b,w.target)&&v(w)},E=()=>{const w=qt.DOM,_=b.dom,k=document,S=b.inline?b.getBody():b.getDoc(),O=["drop","dragover"];z(O,P=>{w.bind(k,P,y),_.bind(S,P,v)}),b.on("remove",()=>{z(O,P=>{w.unbind(k,P,y),_.unbind(S,P,v)})})};b.on("init",()=>{Nn.setEditorTimeout(b,E,0)})})(g),(g=>{const b=Vl(()=>{if(!g.removed&&g.getBody().contains(document.activeElement)){const v=g.selection.getRng();if(v.collapsed){const y=Df(g,v,!1);g.selection.setRng(y)}}},0);g.on("focus",()=>{b.throttle()}),g.on("blur",()=>{b.cancel()})})(t),(g=>{g.on("init",()=>{g.on("focusin",b=>{const v=b.target;if(co(v)){const y=ga(g.getBody(),v),E=Xt(y)?y:v;g.selection.getNode()!==E&&Qi(g,E).each(w=>g.selection.setRng(w))}})})})(t)),{showCaret:c,showBlockCaretContainer:g=>{g.hasAttribute("data-mce-caret")&&(wu(g),e.scrollIntoView(g))},hideFakeCaret:h,destroy:()=>{r.destroy(),i=null}};var g},eB=(t,e)=>{let n=e;for(let o=t.previousSibling;$(o);o=o.previousSibling)n+=o.data.length;return n},L_=(t,e,n,o,r)=>{if($(n)&&(o<0||o>n.data.length))return[];const a=r&&$(n)?[eB(n,o)]:[o];let s=n;for(;s!==e&&s.parentNode;)a.push(t.nodeIndex(s,r)),s=s.parentNode;return s===e?a.reverse():[]},Lg=(t,e,n,o,r,a,s=!1)=>({start:L_(t,e,n,o,s),end:L_(t,e,r,a,s)}),P_=(t,e)=>{const n=e.slice(),o=n.pop();return re(o)?Ke(n,(r,a)=>r.bind(s=>C.from(s.childNodes[a])),C.some(t)).bind(r=>$(r)&&(o<0||o>r.data.length)?C.none():C.some({node:r,offset:o})):C.none()},M_=(t,e)=>P_(t,e.start).bind(({node:n,offset:o})=>P_(t,e.end).map(({node:r,offset:a})=>{const s=document.createRange();return s.setStart(n,o),s.setEnd(r,a),s})),Ss=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const o=e.parentNode;t.remove(e,$(e.firstChild)&&Ya(e.firstChild.data)),Ss(t,o,n)}},bd=(t,e,n,o=!0)=>{const r=e.startContainer.parentNode,a=e.endContainer.parentNode;e.deleteContents(),o&&!n(e.startContainer)&&($(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),$(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),Ss(t,r,n),r!==a&&Ss(t,a,n))},vd=(t,e)=>C.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),Pg=(t,e,n)=>{const o=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:Gh(o).concat(t.blockPatterns),inlinePatterns:Xh(o).concat(t.inlinePatterns)}},Mg=(t,e,n,o)=>{const r=t.createRng();return r.setStart(e,0),r.setEnd(n,o),r.toString()},I_=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),yd=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},F_=(t,e,n)=>{const o=M_(t.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,a=o.endContainer,s=0===o.endOffset?a:a.splitText(o.endOffset),i=0===o.startOffset?r:r.splitText(o.startOffset),l=i.parentNode;return{prefix:e,end:s.parentNode.insertBefore(I_(t,e+"-end"),s),start:l.insertBefore(I_(t,e+"-start"),i)}},U_=(t,e,n)=>{Ss(t,t.get(e.prefix+"-end"),n),Ss(t,t.get(e.prefix+"-start"),n)},Ig=t=>0===t.start.length,z_=(t,e,n,o)=>{const r=e.start;var a;return rg(t,o.container,o.offset,(a=r,(s,i)=>{const l=s.data.substring(0,i),c=l.lastIndexOf(a.charAt(a.length-1)),d=l.lastIndexOf(a);return-1!==d?d+a.length:-1!==c?c+1:-1}),n).bind(s=>{var i,l;const c=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(r))&&void 0!==l?l:-1;if(-1!==c&&s.offset>=c+r.length){const d=t.createRng();return d.setStart(s.container,s.offset-r.length),d.setEnd(s.container,s.offset),C.some(d)}return og(s.container,s.offset-r.length,n).map(u=>{const m=t.createRng();return m.setStart(u.container,u.offset),m.setEnd(s.container,s.offset),m}).filter(u=>u.toString()===r).orThunk(()=>z_(t,e,n,oo(s.container,0)))})},nB=(t,e,n,o)=>{const r=t.dom,a=r.getRoot(),s=n.pattern,i=n.position.container,l=n.position.offset;return og(i,l-n.pattern.end.length,e).bind(c=>{const d=Lg(r,a,c.container,c.offset,i,l,o);if(Ig(s))return C.some({matches:[{pattern:s,startRng:d,endRng:d}],position:c});{const u=Cd(t,n.remainingPatterns,c.container,c.offset,e,o),m=u.getOr({matches:[],position:c}),p=m.position;return((h,g,b,v,y,E=!1)=>{if(0===g.start.length&&!E){const w=h.createRng();return w.setStart(b,v),w.setEnd(b,v),C.some(w)}return ng(b,v,y).bind(w=>z_(h,g,y,w).bind(_=>{var k;return E&&(_.endContainer===w.container&&_.endOffset===w.offset||0===w.offset&&(null===(k=_.endContainer.textContent)||void 0===k?void 0:k.length)===_.endOffset)?C.none():C.some(_)}))})(r,s,p.container,p.offset,e,u.isNone()).map(h=>{const g=((b,v,y,E=!1)=>Lg(b,v,y.startContainer,y.startOffset,y.endContainer,y.endOffset,E))(r,a,h,o);return{matches:m.matches.concat([{pattern:s,startRng:g,endRng:d}]),position:oo(h.startContainer,h.startOffset)}})}})},Cd=(t,e,n,o,r,a)=>{const s=t.dom;return ng(n,o,s.getRoot()).bind(i=>{const l=Mg(s,r,n,o);for(let c=0;c<e.length;c++){const d=e[c];if(!Ba(l,d.end))continue;const u=e.slice();u.splice(c,1);const m=nB(t,r,{pattern:d,remainingPatterns:u,position:i},a);if(m.isNone()&&o>0)return Cd(t,e,n,o-1,r,a);if(m.isSome())return m}return C.none()})},H_=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?z(e.format,o=>{t.formatter.apply(o)}):t.execCommand(e.cmd,!1,e.value)},j_=(t,e,n,o,r,a)=>{var s;return((i,l)=>{const c=$n(i,d=>ee(l,u=>d.pattern.start===u.pattern.start&&d.pattern.end===u.pattern.end));return i.length===l.length?c?i:l:i.length>l.length?i:l})(Cd(t,r.inlinePatterns,n,o,e,a).fold(()=>[],i=>i.matches),Cd(t,(s=r.inlinePatterns,Ot(s,(i,l)=>l.end.length-i.end.length)),n,o,e,a).fold(()=>[],i=>i.matches))},$_=(t,e)=>{if(0===e.length)return;const n=t.dom,o=t.selection.getBookmark(),r=((a,s)=>{const i=hi("mce_textpattern"),l=Zo(s,(c,d)=>{const u=F_(a,i+`_end${c.length}`,d.endRng);return c.concat([{...d,endMarker:u}])},[]);return Zo(l,(c,d)=>{const u=l.length-c.length-1,m=Ig(d.pattern)?d.endMarker:F_(a,i+`_start${u}`,d.startRng);return c.concat([{...d,startMarker:m}])},[])})(n,e);z(r,a=>{const s=n.getParent(a.startMarker.start,n.isBlock),i=l=>l===s;Ig(a.pattern)?((l,c,d,u)=>{const m=yd(l.dom,d);bd(l.dom,m,u),H_(l,c,m)})(t,a.pattern,a.endMarker,i):((l,c,d,u,m)=>{const p=l.dom,f=yd(p,u),h=yd(p,d);bd(p,h,m),bd(p,f,m);const b=yd(p,{prefix:d.prefix,start:d.end,end:u.start});H_(l,c,b)})(t,a.pattern,a.startMarker,a.endMarker,i),U_(n,a.endMarker,i),U_(n,a.startMarker,i)}),t.selection.moveToBookmark(o)},W_=(t,e,n)=>((o,r,a)=>{if($(o)&&0>=o.length)return C.some(oo(o,0));{const s=ea(Jc);return C.from(s.forwards(o,0,td(o),a)).map(i=>oo(i.container,0))}})(e,0,e).map(o=>{const r=o.container;return Gw(r,n.start.length,e).each(a=>{const s=t.createRng();s.setStart(r,0),s.setEnd(a.container,a.offset),bd(t,s,i=>i===e)}),r}),V_=t=>(e,n)=>{const r=n.pattern,a=M_(e.dom.getRoot(),n.range).getOrDie("Unable to resolve path range");return vd(e,a).each(s=>{"block-format"===r.type?((i,l)=>{const c=l.get(i);return Yt(c)&&It(c).exists(d=>bt(d,"block"))})(r.format,e.formatter)&&e.undoManager.transact(()=>{t(e.dom,s,r),e.formatter.apply(r.format)}):"block-command"===r.type&&e.undoManager.transact(()=>{t(e.dom,s,r),e.execCommand(r.cmd,!1,r.value)})}),!0},q_=t=>(e,n)=>{const o=Ot(e,(s,i)=>i.start.length-s.start.length),r=n.replace(ye," ");return fe(o,a=>t(a,n,r))},K_=(t,e)=>(n,o,r,a,s)=>{var i;void 0===s&&(s=null!==(i=o.textContent)&&void 0!==i?i:"");const l=n.dom,c=We(n);return l.is(o,c)?t(r.blockPatterns,s).map(d=>e&&W.trim(s).length===d.start.length?[]:[{pattern:d,range:Lg(l,l.getRoot(),o,0,o,0,a)}]).getOr([]):[]},oB=V_((t,e,n)=>{W_(t,e,n).each(o=>{const r=R(o),a=bi(r);/^\s[^\s]/.test(a)&&bh(r,a.slice(1))})}),rB=q_((t,e,n)=>0===e.indexOf(t.start)||0===n.indexOf(t.start)),aB=K_(rB,!0),sB=V_(W_),iB=q_((t,e,n)=>e===t.start||n===t.start),lB=K_(iB,!1),Y_=(t,e,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],e))return!0;return!1},Fg=qt.DOM,uB=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,Ug=t=>Wn(t,e=>!1===ce(e)),G_=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return Ug({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_mathml_annotation_encodings:e("allow_mathml_annotation_encodings"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_unsafe_embeds:e("convert_unsafe_embeds"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:uB(t),sandbox_iframes:e("sandbox_iframes"),sandbox_iframes_exclusions:Mu(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},X_=t=>{const e=t.options.get;return Ug({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},zg=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,Z_=t=>{const e=zg(t),n=ib(t),o=t.contentCSS,r=()=>{e.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},a=()=>{t.removed?r():t.on("remove",r)};if(t.contentStyles.length>0){let l="";W.each(t.contentStyles,c=>{l+=c+"\r\n"}),t.dom.addStyle(l)}const s=Promise.all(((l,c,d)=>{const{pass:u,fail:m}=Xo(c,h=>tinymce.Resource.has(Af(h))),f=[...u.map(h=>{const g=tinymce.Resource.get(Af(h));return at(g)?Promise.resolve(zg(l).loadRawCss(h,g)):Promise.resolve()}),zg(l).loadAll(m)];return l.inline?f:f.concat([l.ui.styleSheetLoader.loadAll(d)])})(t,o,n)).then(a).catch(a),i=sk(t);return i&&((l,c)=>{const d=R(l.getBody()),u=Fd(lr(d)),m=ke("style");Et(m,"type","text/css"),be(m,ja(c)),be(u,m),l.on("remove",()=>{Jt(m)})})(t,i),s},Hg=t=>{var e;!0!==t.removed&&(bo(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||cc(o)&&o.selection.getStart(!0)!==r||Ve(r).each(a=>{const s=a.getNode(),i=lo(s)?Ve(s).getOr(a):a;o.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=Ok(e);kt(n)&&n.call(e,e),(o=>{const r=Dk(o);r&&Nn.setEditorTimeout(o,()=>{let a;a=!0===r?o:o.editorManager.get(r),a&&!a.destroyed&&(a.focus(),a.selection.scrollIntoView())},100)})(e)})(t))},Q_=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(Fg.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const o=t.getBody();var s,i;o.disabled=!0,t.readonly=db(t),t._editableRoot=Sk(t),t.hasEditableRoot()&&(t.inline&&"static"===Fg.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let h=[];const g=y=>{if(!y.blob||!y.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const E=y.id||"blobid"+RR+++(()=>{const S=()=>Math.round(4294967295*mh()).toString(36);return"s"+(new Date).getTime().toString(36)+S()+S()+S()})(),w=y.name||E,_=y.blob;var k;return{id:G(E),name:G(w),filename:G(y.filename||w+"."+(k=_.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[k.toLowerCase()]||"dat")),blob:G(_),base64:G(y.base64),blobUri:G(y.blobUri||URL.createObjectURL(_)),uri:G(y.uri)}},b=y=>fe(h,y).getOrUndefined(),v=y=>b(E=>E.id()===y);return{create:(y,E,w,_,k)=>{if(at(y))return g({id:y,name:_,filename:k,blob:E,base64:w});if(le(y))return g(y);throw new Error("Unknown input type")},add:y=>{v(y.id())||h.push(y)},get:v,getByUri:y=>b(E=>E.blobUri()===y),getByData:(y,E)=>b(w=>w.base64()===y&&w.blob().type===E),findFirst:b,removeByUri:y=>{h=gt(h,E=>E.blobUri()!==y||(URL.revokeObjectURL(E.blobUri()),!1))},destroy:()=>{z(h,y=>{URL.revokeObjectURL(y.blobUri())}),h=[]}}})();let n,o;const r=n1(),a=[],s=h=>g=>t.selection?h(g):[],i=(h,g,b)=>{let v=0;do{v=h.indexOf(g,v),-1!==v&&(h=h.substring(0,v)+b+h.substr(v+g.length),v+=b.length-g.length+1)}while(-1!==v);return h},l=(h,g,b)=>(h=i(h,`src="${g}"`,`src="${b}"${b===Rt.transparentSrc?' data-mce-placeholder="1"':""}`),i(h,'data-mce-src="'+g+'"','data-mce-src="'+b+'"')),c=(h,g)=>{z(t.undoManager.data,b=>{"fragmented"===b.type?b.fragments=At(b.fragments,v=>l(v,h,g)):b.content=l(b.content,h,g)})},d=()=>(n||(n=r1(t,r)),p().then(s(h=>{const g=At(h,b=>b.blobInfo);return n.upload(g,o1(t)).then(s(b=>{const v=[];let y=!1;const E=At(b,(w,_)=>{const{blobInfo:k,image:S}=h[_];let O=!1;return w.status&&XS(t)?(w.url&&!_e(S.src,w.url)&&(y=!0),e.removeByUri(S.src),bo(t)||((P,x)=>{const N=t.convertURL(x,"src");var T;c(P.src,x),Lt(R(P),{src:ob(t)?(T=x,T+(-1===T.indexOf("?")?"?":"&")+(new Date).getTime()):x,"data-mce-src":N})})(S,w.url)):w.error&&(w.error.remove&&(c(S.src,Rt.transparentSrc),v.push(S),O=!0),$c(t,Jn.translate(["Failed to upload image: {0}",w.error.message]))),{element:S,status:w.status,uploadUri:w.url,blobInfo:k,removed:O}});return v.length>0&&!bo(t)?t.undoManager.transact(()=>{z(jd(v),w=>{const _=Xn(w);Jt(w),_.each((k=>S=>{var O,P;(O=k).dom.isEmpty((P=S).dom)&&q(O.schema.getTextBlockElements()[Nt(P)])&&be(S,Tl('<br data-mce-bogus="1" />'))})(t)),e.removeByUri(w.dom.src)})}):y&&t.undoManager.dispatchChange(),E}))}))),u=()=>nb(t)?d():Promise.resolve([]),m=h=>$n(a,g=>g(h)),p=()=>(o||(o=((t,e)=>{const n={};return{findAll:(o,r=se)=>{const a=gt((i=o)?Oe(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===Rt.transparentSrc)&&(Dt(l,"blob:")?!t.isUploaded(l)&&r(i):!!Dt(l,"data:")&&r(i))}),s=At(a,i=>{const l=i.src;if(bt(n,l))return n[l].then(c=>at(c)?c:{image:i,blobInfo:c.blobInfo});{const c=((d,u)=>{const m=()=>Promise.reject("Invalid data URI");if(Dt(u,"blob:")){const h=d.getByUri(u);return q(h)?Promise.resolve(h):(p=u,Dt(p,"blob:")?(g=p,fetch(g).then(b=>b.ok?b.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${g} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Dt(p,"data:")?(f=p,new Promise((g,b)=>{lf(f).bind(({type:v,data:y,base64Encoded:E})=>Xy(v,y,E)).fold(()=>b("Invalid data URI"),g)})):Promise.reject("Unknown URI format")).then(g=>Zy(g).then(b=>Qy(b,!1,v=>C.some(Jy(d,g,v))).getOrThunk(m)))}var g,p,f;return Dt(u,"data:")?tC(d,u).fold(m,h=>Promise.resolve(h)):Promise.reject("Unknown image data format")})(e,l).then(d=>(delete n[l],{image:i,blobInfo:d})).catch(d=>(delete n[l],d));return n[l]=c,c}});var i;return Promise.all(s)}}})(r,e)),o.findAll(t.getBody(),m).then(s(h=>{const g=gt(h,b=>at(b)?($c(t,b),!1):"blob"!==b.uriType);return bo(t)||z(g,b=>{c(b.image.src,b.blobInfo.blobUri()),b.image.src=b.blobInfo.blobUri(),b.image.removeAttribute("data-mce-src")}),g}))),f=h=>h.replace(/src="(blob:[^"]+)"/g,(g,b)=>{const v=r.getResultUri(b);if(v)return'src="'+v+'"';let y=e.getByUri(b);return y||(y=Ke(t.editorManager.get(),(E,w)=>E||w.editorUpload&&w.editorUpload.blobCache.getByUri(b),void 0)),y?'src="data:'+y.blob().type+";base64,"+y.base64()+'"':g});return t.on("SetContent",()=>{nb(t)?u():p()}),t.on("RawSaveContent",h=>{h.content=f(h.content)}),t.on("GetContent",h=>{h.source_view||"raw"===h.format||"tree"===h.format||(h.content=f(h.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",h=>{z(h,g=>{const b=g.attr("src");if(!b||e.getByUri(b))return;const v=r.getResultUri(b);v&&g.attr("src",v)})})}),{blobCache:e,addFilter:h=>{a.push(h)},uploadImages:d,uploadImagesAuto:u,scanForImages:p,destroy:()=>{e.destroy(),r.destroy(),o=n=null}}})(t),t.schema=ur(X_(t)),t.dom=qt(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:nk(t),referrerPolicy:Du(t),onSetAttrib:s=>{t.dispatch("SetAttrib",s)}}),t.parser=(s=>{const i=ps(G_(s),s.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const d=s.dom,u="data-mce-"+c;let m=l.length;for(;m--;){const p=l[m];let f=p.attr(c);if(f&&!p.attr(u)){if(0===f.indexOf("data:")||0===f.indexOf("blob:"))continue;"style"===c?(f=d.serializeStyle(d.parseStyle(f),p.name),f.length||(f=null),p.attr(u,f),p.attr(c,f)):"tabindex"===c?(p.attr(u,f),p.attr(c,null)):p.attr(u,s.convertURL(f,c,p.name))}}}),i.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const d=l[c],u=d.attr("type")||"no/type";0!==u.indexOf("mce-")&&d.attr("type","mce-"+u)}}),Zk(s)&&i.addNodeFilter("#cdata",l=>{var c;let d=l.length;for(;d--;){const u=l[d];u.type=8,u.name="#comment",u.value="[CDATA["+s.dom.encode(null!==(c=u.value)&&void 0!==c?c:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const d=s.schema.getNonEmptyElements();for(;c--;){const u=l[c];u.isEmpty(d)&&0===u.getAll("br").length&&u.append(new Ze("br",1))}}),i})(t),t.serializer=qC((s=>{const i=s.options.get;return{...G_(s),...X_(s),...Ug({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=VC(t.dom,t.getWin(),t.serializer,t),t.annotator=u0(t),t.formatter=i1(t),t.undoManager=c1(t),t._nodeChangeDispatcher=new SO(t),t._selectionOverrides=tB(t),(s=>{const i=Fo(),l=Ae(!1),c=hu(d=>{s.dispatch("longpress",{...d,type:"longpress"}),l.set(!0)},400);s.on("touchstart",d=>{Cw(d).each(u=>{c.cancel();const m={x:u.clientX,y:u.clientY,target:d.target};c.throttle(d),l.set(!1),i.set(m)})},!0),s.on("touchmove",d=>{c.cancel(),Cw(d).each(u=>{i.on(m=>{((p,f)=>{const h=Math.abs(p.clientX-f.x),g=Math.abs(p.clientY-f.y);return h>5||g>5})(u,m)&&(i.clear(),l.set(!1),s.dispatch("longpresscancel"))})})},!0),s.on("touchend touchcancel",d=>{c.cancel(),"touchcancel"!==d.type&&i.get().filter(u=>u.target.isEqualNode(d.target)).each(()=>{l.get()?d.preventDefault():s.dispatch("tap",{...d,type:"tap"})})},!0)})(t),(i=s=t).on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}),(i=>{i.parser.addNodeFilter("details",l=>{const c=eN(i);z(l,d=>{"expanded"===c?d.attr("open","open"):"collapsed"===c&&d.attr("open",null)})}),i.serializer.addNodeFilter("details",l=>{const c=nN(i);z(l,d=>{"expanded"===c?d.attr("open","open"):"collapsed"===c&&d.attr("open",null)})})})(s),(s=>{const i="contenteditable",l=" "+W.trim(Gk(s))+" ",c=" "+W.trim(gb(s))+" ",d=Ew(l),u=Ew(c),m=Xk(s);m.length>0&&s.on("BeforeSetContent",p=>{((f,h,g)=>{let b=h.length,v=g.content;if("raw"!==g.format){for(;b--;)v=v.replace(h[b],bT(f,v,gb(f)));g.content=v}})(s,m,p)}),s.parser.addAttributeFilter("class",p=>{let f=p.length;for(;f--;){const h=p[f];d(h)?h.attr(i,"true"):u(h)&&h.attr(i,"false")}}),s.serializer.addAttributeFilter(i,p=>{let f=p.length;for(;f--;){const h=p[f];if(!d(h)&&!u(h))continue;const g=h.attr("data-mce-content");m.length>0&&g?vT(m,g)?(h.name="#text",h.type=3,h.raw=!0,h.value=g):h.remove():h.attr(i,null)}})})(t),bo(t)||((s=>{s.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,o,r)=>{const a=F.fromRangeStart(n).getNode(),s=(u=o,m=r,$r(R(a),p=>Un(p.dom)||m.isBlock(Nt(p)),y_(u)).getOr(R(u)).dom),i=w_(a,s,!1),l=w_(a,s,!0),c=document.createRange();var u,m;return C_(i,s).fold(()=>{v_(i)?c.setStart(i,0):c.setStartBefore(i)},d=>c.setStartBefore(d.dom)),C_(l,s).fold(()=>{v_(l)?c.setEnd(l,l.data.length):c.setEndAfter(l)},d=>c.setEndAfter(d.dom)),c})(t.selection.getRng(),t.getBody(),t.schema);t.selection.setRng(Vm(e))})(s))})})(t),(s=>{(t=>{const e=[",",".",";",":","!","?"],n=[32],o=()=>{return s=Kk(t).filter(l=>"inline-command"!==l.type&&"block-command"!==l.type||t.queryCommandSupported(l.cmd)),i=Yk(t),{inlinePatterns:Xh(s),blockPatterns:Gh(s),dynamicPatternsLookup:i};var s,i},r=()=>t.options.isSet("text_patterns_lookup");t.on("keydown",s=>{if(13===s.keyCode&&!Q.modifierPressed(s)&&t.selection.isCollapsed()&&t.selection.isEditable()){const i=Ou(o(),"enter");(i.inlinePatterns.length>0||i.blockPatterns.length>0||r())&&((d,u)=>{const m=d.selection.getRng();return vd(d,m).map(p=>{var f;const h=Math.max(0,m.startOffset),g=Pg(u,p,null!==(f=p.textContent)&&void 0!==f?f:"");return{inlineMatches:j_(d,p,m.startContainer,h,g,!0),blockMatches:aB(d,p,g,!0)}}).filter(({inlineMatches:p,blockMatches:f})=>f.length>0||p.length>0)})(l=t,i).fold(Gt,({inlineMatches:d,blockMatches:u})=>(l.undoManager.add(),l.undoManager.extra(()=>{l.execCommand("mceInsertNewLine")},()=>{l.insertContent(Re,{preserve_zwsp:!0}),$_(l,d),((f,h)=>{if(0===h.length)return;const g=f.selection.getBookmark();z(h,b=>oB(f,b)),f.selection.moveToBookmark(g)})(l,u);const m=l.selection.getRng(),p=ng(m.startContainer,m.startOffset,l.dom.getRoot());l.execCommand("mceInsertNewLine"),p.each(f=>{const h=f.container;"\ufeff"===h.data.charAt(f.offset-1)&&(h.deleteData(f.offset-1,1),Ss(l.dom,h.parentNode,g=>g===l.dom.getRoot()))})}),!0))&&s.preventDefault()}var l},!0),t.on("keydown",s=>{if(32===s.keyCode&&t.selection.isCollapsed()&&t.selection.isEditable()){const i=Ou(o(),"space");(i.blockPatterns.length>0||r())&&((d,u)=>{const m=d.selection.getRng();return vd(d,m).map(p=>{const f=Math.max(0,m.startOffset),h=Mg(d.dom,p,m.startContainer,f),g=Pg(u,p,h);return lB(d,p,g,!1,h)}).filter(p=>p.length>0)})(l=t,i).fold(Gt,d=>(l.undoManager.transact(()=>{var u;u=l,z(d,p=>sB(u,p))}),!0))&&s.preventDefault()}var l},!0);const a=()=>{if(t.selection.isCollapsed()&&t.selection.isEditable()){const s=Ou(o(),"space");(s.inlinePatterns.length>0||r())&&((i,l)=>{const c=i.selection.getRng();vd(i,c).map(d=>{const u=Math.max(0,c.startOffset-1),m=Mg(i.dom,d,c.startContainer,u),p=Pg(l,d,m),f=j_(i,d,c.startContainer,u,p,!1);f.length>0&&i.undoManager.transact(()=>{$_(i,f)})})})(t,s)}};t.on("keyup",s=>{Y_(n,s,(i,l)=>i===l.keyCode&&!Q.modifierPressed(l))&&a()}),t.on("keypress",s=>{Y_(e,s,(i,l)=>i.charCodeAt(0)===l.charCode)&&Nn.setEditorTimeout(t,a)})})(s)})(t));const r=xO(t);((s,i)=>{s.addCommand("delete",()=>{var l;yw(l=s,i,!1).fold(()=>{l.selection.isEditable()&&(kc(l),Om(l))},ko)}),s.addCommand("forwardDelete",()=>{var l;yw(l=s,i,!0).fold(()=>{l.selection.isEditable()&&zv(l)},ko)})})(t,r),(s=>{s.on("NodeChange",()=>(i=>{const l=i.dom,c=i.selection,d=i.schema,u=d.getBlockElements(),m=c.getStart(),p=i.getBody();let f,h,g=null;const b=We(i);if(!m||!ot(m))return;const v=p.nodeName.toLowerCase();if(!d.isValidChild(v,b.toLowerCase())||(E=u,w=p,ee(hv(R(m),R(w)),k=>Qf(E,k.dom))))return;var E,w;if(p.firstChild===p.lastChild&&ae(p.firstChild))return f=Jf(i),f.appendChild(Ja().dom),p.replaceChild(f,p.firstChild),i.selection.setCursorLocation(f,0),void i.nodeChanged();let y=p.firstChild;for(;y;)if(ot(y)&&sS(d,y),pT(d,y)){if(hT(u,y)){h=y,y=y.nextSibling,l.remove(h);continue}if(!f){if(!g&&i.hasFocus()&&(g=k1(i.selection.getRng(),()=>document.createElement("span"))),!y.parentNode){y=null;break}f=Jf(i),p.insertBefore(f,y)}h=y,y=y.nextSibling,f.appendChild(h)}else f=null,y=y.nextSibling;g&&(i.selection.setRng(N1(g)),i.nodeChanged())})(s))})(t),(s=>{var i;const l=s.dom,c=We(s),d=null!==(i=dk(s))&&void 0!==i?i:"",u=(m,p)=>{if((g=>{if(u1(g)){const b=g.keyCode;return!m1(g)&&(Q.metaKeyPressed(g)||g.altKey||b>=112&&b<=123||Bt(MR,b))}return!1})(m))return;const f=s.getBody(),h=!(u1(g=m)&&!(m1(g)||"keyup"===g.type&&229===g.keyCode))&&((g,b,v)=>{if(g.isEmpty(b,void 0,{skipBogus:!1,includeZwsp:!0})){const y=b.firstElementChild;return!y||!g.getStyle(b.firstElementChild,"padding-left")&&!g.getStyle(b.firstElementChild,"padding-right")&&v===y.nodeName.toLowerCase()}return!1})(l,f,c);var g;(""!==l.getAttrib(f,d1)!==h||p)&&(l.setAttrib(f,d1,h?d:null),((g,b)=>{g.dispatch("PlaceholderToggle",{state:b})})(s,h),s.on(h?"keydown":"keyup",u),s.off(h?"keyup":"keydown",u))};hn(d)&&s.on("init",m=>{u(m,!0),s.on("change SetContent ExecCommand",u),s.on("paste",p=>Nn.setEditorTimeout(s,()=>u(p)))})})(t),(t=>{const e=Ae(!1),n=Ae(Wk(t)?"text":"html"),o=(r=>{const a=Ae(null);return{create:()=>((s,i)=>{const{dom:l,selection:c}=s,d=s.getBody();i.set(c.getRng());const u=l.add(s.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n_);Rt.browser.isFirefox()&&l.setStyle(u,"left","rtl"===l.getStyle(d,"direction",!0)?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),u.focus(),c.select(u,!0)})(r,a),remove:()=>((s,i)=>{const l=s.dom;if(Ag(s)){let c;const d=i.get();for(;c=Ag(s);)l.remove(c),l.unbind(c);d&&s.selection.setRng(d)}i.set(null)})(r,a),getEl:()=>Ag(r),getHtml:()=>(s=>{const i=s.dom,l=(m,p)=>{m.appendChild(p),i.remove(p,!0)},[c,...d]=gt(s.getBody().childNodes,DO);z(d,m=>{l(c,m)});const u=i.select("div[id=mcepastebin]",c);for(let m=u.length-1;m>=0;m--){const p=i.create("div");c.insertBefore(p,u[m]),l(p,u[m])}return c?c.innerHTML:""})(r),getLastRng:a.get}})(t);var r,a,s;r=t,(Rt.browser.isChromium()||Rt.browser.isSafari())&&(s=zO,(a=r).on("PastePreProcess",i=>{i.content=s(a,i.content,i.internal)})),((r,a)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((s,i)=>{"text"===i.get()?(i.set("html"),v0(s,!1)):(i.set("text"),v0(s,!0)),s.focus()})(r,a)}),r.addCommand("mceInsertClipboardContent",(s,i)=>{i.html&&pd(r,i.html,i.internal,!1),i.text&&Og(r,i.text,!1)})})(t,n),(r=>{const a=l=>c=>{l(r,c)},s=Ik(r);kt(s)&&r.on("PastePreProcess",a(s));const i=Fk(r);kt(i)&&r.on("PastePostProcess",a(i))})(t),t.addQueryStateHandler("mceTogglePlainTextPaste",()=>"text"===n.get()),t.on("PreInit",()=>{(r=>{r.on("cut",(a=>s=>{!s.isDefaultPrevented()&&g_(a)&&a.selection.isEditable()&&u_(s,f_(a),m_(a),()=>{if(Rt.browser.isChromium()||Rt.browser.isFirefox()){const i=a.selection.getRng();Nn.setEditorTimeout(a,()=>{a.selection.setRng(i),a.execCommand("Delete")},0)}else a.execCommand("Delete")})})(r)),r.on("copy",(a=>s=>{!s.isDefaultPrevented()&&g_(a)&&u_(s,f_(a),m_(a),Ct)})(r))})(t),((r,a)=>{Mk(r)&&r.on("dragend dragover draggesture dragdrop drop drag",s=>{s.preventDefault(),s.stopPropagation()}),nc(r)||r.on("drop",s=>{const i=s.dataTransfer;i&&ee(i.files,c=>/^image\//.test(c.type))&&s.preventDefault()}),r.on("drop",s=>{if(s.isDefaultPrevented())return;const i=p_(r,s);if(ue(i))return;const l=l_(s.dataTransfer),c=_r(l,gd());if((!c_(l)||(f=>{const h=f["text/plain"];return!!h&&0===h.indexOf("file://")})(l))&&d_(r,s,i))return;const d=l[gd()],u=d||l["text/html"]||l["text/plain"],m=((f,h,g,b)=>{const v=f.getParent(g,y=>Gr(h,y));if(!Ee(f.getParent(g,"summary")))return!0;if(v&&bt(b,"text/html")){const y=(new DOMParser).parseFromString(b["text/html"],"text/html").body;return!Ee(y.querySelector(v.nodeName.toLowerCase()))}return!1})(r.dom,r.schema,i.startContainer,l),p=a.get();p&&!m||u&&(s.preventDefault(),Nn.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{(d||p&&m)&&r.execCommand("Delete"),h_(r,i);const f=a_(u);l["text/html"]?pd(r,f,c,!0):Og(r,f,!0)})}))}),r.on("dragstart",s=>{a.set(!0)}),r.on("dragover dragend",s=>{nc(r)&&!a.get()&&(s.preventDefault(),h_(r,p_(r,s))),"dragend"===s.type&&a.set(!1)}),(s=>{s.on("input",i=>{const l=c=>Ee(c.querySelector("summary"));if("deleteByDrag"===i.inputType){const c=gt(s.dom.select("details"),l);z(c,d=>{ae(d.firstChild)&&d.firstChild.remove();const u=s.dom.create("summary");u.appendChild(Ja().dom),d.prepend(u)})}})})(r)})(t,e),((t,e,n)=>{((o,r,a)=>{let s;o.on("keydown",i=>{var l;(Q.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(s=i.shiftKey&&86===i.keyCode)}),o.on("paste",i=>{if(i.isDefaultPrevented()||(d=i,Rt.os.isAndroid()&&0===(null===(m=null===(u=d.clipboardData)||void 0===u?void 0:u.items)||void 0===m?void 0:m.length)))return;var d,u,m;const l="text"===a.get()||s;s=!1;const c=l_(i.clipboardData);!c_(c)&&d_(o,i,r.getLastRng()||o.selection.getRng())||(_r(c,"text/html")?(i.preventDefault(),Bg(o,c,c["text/html"],l,!0)):_r(c,"text/plain")&&_r(c,"text/uri-list")?(i.preventDefault(),Bg(o,c,c["text/plain"],l,!0)):(r.create(),Nn.setEditorTimeout(o,()=>{const d=r.getHtml();r.remove(),Bg(o,c,d,l,!1)},0)))})})(t,e,n),(o=>{const r=s=>Dt(s,"webkit-fake-url"),a=s=>Dt(s,"data:");o.parser.addNodeFilter("img",(s,i,l)=>{if(!nc(o)&&!0===(null===(d=l.data)||void 0===d?void 0:d.paste))for(const c of s){const d=c.attr("src");at(d)&&!c.attr("data-mce-object")&&d!==Rt.transparentSrc&&(r(d)||!qk(o)&&a(d))&&c.remove()}var d})})(t)})(t,o,n)})})(t);const a=(s=>{const i=s;return(l=s,Kt(l.plugins,"rtc").bind(c=>C.from(c.setup))).fold(()=>(i.rtcInstance=UC(s),C.none()),l=>(i.rtcInstance=(()=>{const c=G(null),d=G("");return{init:{bindEvents:Ct},undoManager:{beforeChange:Ct,add:c,undo:c,redo:c,clear:Ct,reset:Ct,hasUndo:Gt,hasRedo:Gt,transact:c,ignore:Ct,extra:Ct},formatter:{match:Gt,matchAll:G([]),matchNode:G(void 0),canApply:Gt,closest:d,apply:Ct,remove:Ct,toggle:Ct,formatChanged:G({unbind:Ct})},editor:{getContent:d,setContent:G({content:"",html:""}),insertContent:G(""),addVisual:Ct},selection:{getContent:d},autocompleter:{addDecoration:Ct,removeDecoration:Ct},raw:{getModel:G(C.none())}}})(),C.some(()=>l().then(c=>(i.rtcInstance=(d=>{const u=y=>le(y)?y:{},{init:m,undoManager:p,formatter:f,editor:h,selection:g,autocompleter:b,raw:v}=d;return{init:{bindEvents:m.bindEvents},undoManager:{beforeChange:p.beforeChange,add:p.add,undo:p.undo,redo:p.redo,clear:p.clear,reset:p.reset,hasUndo:p.hasUndo,hasRedo:p.hasRedo,transact:(y,E,w)=>p.transact(w),ignore:(y,E)=>p.ignore(E),extra:(y,E,w,_)=>p.extra(w,_)},formatter:{match:(y,E,w,_)=>f.match(y,u(E),_),matchAll:f.matchAll,matchNode:f.matchNode,canApply:y=>f.canApply(y),closest:y=>f.closest(y),apply:(y,E,w)=>f.apply(y,u(E)),remove:(y,E,w,_)=>f.remove(y,u(E)),toggle:(y,E,w)=>f.toggle(y,u(E)),formatChanged:(y,E,w,_,k)=>f.formatChanged(E,w,_,k)},editor:{getContent:y=>h.getContent(y),setContent:(y,E)=>({content:h.setContent(y,E),html:""}),insertContent:(y,E)=>(h.insertContent(y),""),addVisual:h.addVisual},selection:{getContent:(y,E)=>g.getContent(E)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>C.some(v.getRawModel())}}})(c),c.rtc.isRemote)))));var l})(t);(s=>{const i=s.getDoc(),l=s.getBody();s.dispatch("PreInit"),Lk(s)||(i.body.spellcheck=!1,Fg.setAttrib(l,"spellcheck","false")),s.quirks=(t=>{const e=W.each,n=Q.BACKSPACE,o=Q.DELETE,r=t.dom,a=t.selection,s=t.parser,i=Rt.browser,l=i.isFirefox(),c=i.isChromium()||i.isSafari(),d=Rt.deviceType.isiPhone()||Rt.deviceType.isiPad(),u=Rt.os.isMacOS()||Rt.os.isiOS(),m=(x,N)=>{try{t.getDoc().execCommand(x,!1,String(N))}catch{}},p=x=>x.isDefaultPrevented(),f=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{t.inline||r.bind(t.getDoc(),"mousedown mouseup",x=>{let N;if(x.target===t.getDoc().documentElement)if(N=a.getRng(),t.getBody().focus(),"mousedown"===x.type){if(En(N.startContainer))return;a.placeCaretAt(x.clientX,x.clientY)}else a.setRng(N)})},g=()=>{Range.prototype.getClientRects||t.on("mousedown",x=>{if(!p(x)&&"HTML"===x.target.nodeName){const N=t.getBody();N.blur(),Nn.setEditorTimeout(t,()=>{N.focus()})}})},b=()=>{const x=mb(t);t.on("click",N=>{const T=N.target;/^(IMG|HR)$/.test(T.nodeName)&&r.isEditable(T)&&(N.preventDefault(),t.selection.select(T),t.nodeChanged()),"A"===T.nodeName&&r.hasClass(T,x)&&0===T.childNodes.length&&r.isEditable(T.parentNode)&&(N.preventDefault(),a.select(T))})},v=()=>{t.on("keydown",x=>{if(!p(x)&&x.keyCode===n&&a.isCollapsed()&&0===a.getRng().startOffset){const N=a.getNode().previousSibling;if(N&&N.nodeName&&"table"===N.nodeName.toLowerCase())return x.preventDefault(),!1}return!0})},y=()=>{db(t)||t.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),lb(t)||m("enableObjectResizing",!1)})},E=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},_=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",x=>{let N;"HTML"===x.target.nodeName&&(N=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(N),t.selection.normalize(),t.nodeChanged())}))},k=()=>{u&&t.on("keydown",x=>{!Q.metaKeyPressed(x)||x.shiftKey||37!==x.keyCode&&39!==x.keyCode||(x.preventDefault(),t.selection.getSel().modify("move",37===x.keyCode?"backward":"forward","lineboundary"))})},S=()=>{t.on("click",x=>{let N=x.target;do{if("A"===N.tagName)return void x.preventDefault()}while(N=N.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},O=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",x=>{x.preventDefault()})})},P=Ct;return bo(t)?(c&&(h(),b(),O(),f(),d&&(w(),_(),S())),l&&(g(),y(),E(),k())):(t.on("keydown",x=>{if(p(x)||x.keyCode!==Q.BACKSPACE)return;let N=a.getRng();const T=N.startContainer,U=N.startOffset,j=r.getRoot();let H=T;if(N.collapsed&&0===U){for(;H.parentNode&&H.parentNode.firstChild===H&&H.parentNode!==j;)H=H.parentNode;"BLOCKQUOTE"===H.nodeName&&(t.formatter.toggle("blockquote",void 0,H),N=r.createRng(),N.setStart(T,0),N.setEnd(T,0),a.setRng(N))}}),(()=>{const x=N=>{const T=r.create("body"),U=N.cloneContents();return T.appendChild(U),a.serializer.serialize(T,{format:"html"})};t.on("keydown",N=>{const T=N.keyCode;if(!p(N)&&(T===o||T===n)&&t.selection.isEditable()){const U=t.selection.isCollapsed(),j=t.getBody();if(U&&!Io(t.schema,j)||!U&&!(H=>{const tt=x(H),rt=r.createRng();return rt.selectNode(t.getBody()),tt===x(rt)})(t.selection.getRng()))return;N.preventDefault(),t.setContent(""),j.firstChild&&r.isBlock(j.firstChild)?t.selection.setCursorLocation(j.firstChild,0):t.selection.setCursorLocation(j,0),t.nodeChanged()}})})(),Rt.windowsPhone||t.on("keyup focusin mouseup",x=>{Q.modifierPressed(x)||(N=>{const T=N.getBody(),U=N.selection.getRng();return U.startContainer===U.endContainer&&U.startContainer===T&&0===U.startOffset&&U.endOffset===T.childNodes.length})(t)||a.normalize()},!0),c&&(h(),b(),t.on("init",()=>{m("DefaultParagraphSeparator",We(t))}),O(),v(),s.addNodeFilter("br",x=>{let N=x.length;for(;N--;)"Apple-interchange-newline"===x[N].attr("class")&&x[N].remove()}),d?(w(),_(),S()):f()),l&&(t.on("keydown",x=>{if(!p(x)&&x.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(a.isCollapsed()&&0===a.getRng().startOffset){const N=a.getNode(),T=N.previousSibling;if("HR"===N.nodeName)return r.remove(N),void x.preventDefault();T&&T.nodeName&&"hr"===T.nodeName.toLowerCase()&&(r.remove(T),x.preventDefault())}}}),g(),(()=>{const x=()=>{const T=r.getAttribs(a.getStart().cloneNode(!1));return()=>{const U=a.getStart();U!==t.getBody()&&(r.setAttrib(U,"style",null),e(T,j=>{U.setAttributeNode(j.cloneNode(!0))}))}},N=()=>!a.isCollapsed()&&r.getParent(a.getStart(),r.isBlock)!==r.getParent(a.getEnd(),r.isBlock);t.on("keypress",T=>{let U;return!(!(p(T)||8!==T.keyCode&&46!==T.keyCode)&&N()&&(U=x(),t.getDoc().execCommand("delete",!1),U(),T.preventDefault(),1))}),r.bind(t.getDoc(),"cut",T=>{if(!p(T)&&N()){const U=x();Nn.setEditorTimeout(t,()=>{U()})}})})(),y(),t.on("SetContent ExecCommand",x=>{"setcontent"!==x.type&&"mceInsertLink"!==x.command||e(r.select("a:not([data-mce-block])"),N=>{var T;let U=N.parentNode;const j=r.getRoot();if(U?.lastChild===N){for(;U&&!r.isBlock(U);){if((null===(T=U.parentNode)||void 0===T?void 0:T.lastChild)!==U||U===j)return;U=U.parentNode}r.add(U,"br",{"data-mce-bogus":1})}})}),E(),k(),v())),{refreshContentEditable:P,isHidden:()=>{if(!l||t.removed)return!1;const x=t.selection.getSel();return!x||!x.rangeCount||0===x.rangeCount}}})(s),s.dispatch("PostRender");const c=ik(s);void 0!==c&&(l.dir=c);const d=Pk(s);d&&s.on("BeforeSetContent",u=>{W.each(d,m=>{u.content=u.content.replace(m,p=>"\x3c!--mce:protected "+escape(p)+"--\x3e")})}),s.on("SetContent",()=>{s.addVisual(s.getBody())}),s.on("compositionstart compositionend",u=>{s.composing="compositionstart"===u.type})})(t),(s=>{const i=rN(s);var c,l;at(aN(s))||!ce(i)&&"INVALID"!=("gpl"===(l=i).toLowerCase()||(c=l).length>=64&&c.length<=255?"VALID":"INVALID")||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(t),a.fold(()=>{const s=(i=>{let l=!1;const c=setTimeout(()=>{l||i.setProgressState(!0)},500);return()=>{clearTimeout(c),l=!0,i.setProgressState(!1)}})(t);Z_(t).then(()=>{Hg(t),s()})},s=>{t.setProgressState(!0),Z_(t).then(()=>{s().then(i=>{t.setProgressState(!1),Hg(t),zC(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),Hg(t),zC(t)})})})},mB=se,jg=qt.DOM,J_=qt.DOM,tx=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),ex=t=>{const e=t.getElement();return t.inline?tx(null):(n=>{const o=J_.create("div");return J_.insertAfter(o,n),tx(o,o)})(e)},fB=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const o=W.trim(rb(n)),r=n.ui.registry.getAll().icons,a={...jc.get("default").icons,...jc.get(o).icons};Ft(a,(s,i)=>{bt(r,i)||n.ui.registry.addIcon(i,s)})})(t),(n=>{const o=os(n);if(at(o)){const r=ba.get(o);n.theme=r(n,ba.urls[o])||{},kt(n.theme.init)&&n.theme.init(n,ba.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const o=Lu(n),r=hs.get(o);n.model=r(n,hs.urls[o])})(t),(n=>{const o=[];z(ec(n),r=>{((a,s,i)=>{const l=bs.get(i),c=bs.urls[i]||a.documentBaseUrl.replace(/\/$/,"");if(i=W.trim(i),l&&-1===W.inArray(s,i)){if(a.plugins[i])return;try{const d=l(a,c)||{};a.plugins[i]=d,kt(d.init)&&(d.init(a,c),s.push(i))}catch(d){((u,m,p)=>{const f=Jn.translate(["Failed to initialize plugin: {0}",m]);f0(u,"PluginLoadError",{message:f}),Wc(f,p),$c(u,f)})(a,i,d)}}})(n,o,r.replace(/^\-/,""))})})(t);const e=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,at(os(n))?(r=>{const a=r.theme.renderUI;return a?a():ex(r)})(n):kt(os(n))?(r=>{const a=r.getElement(),s=os(r)(r,a);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||r.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||r.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:a.offsetHeight,s})(n):ex(n)})(t);var n,o;((n,o)=>{const r={show:C.from(o.show).getOr(Ct),hide:C.from(o.hide).getOr(Ct),isEnabled:C.from(o.isEnabled).getOr(se),setEnabled:a=>{a&&"readonly"===n.mode.get()||C.from(o.setEnabled).each(s=>s(a))}};n.ui={...n.ui,...r}})(t,C.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(e1(o=n,ak(o)),(o=>e1(o,ib(o)))(n)),t.inline?Q_(t):((n,o)=>{((r,a)=>{const s=Rt.browser.isFirefox()?fb(r):"Rich Text Area",i=r.translate(s),l=oe(R(r.getElement()),"tabindex").bind(er),c=((d,u,m,p)=>{const f=ke("iframe");return p.each(h=>Et(f,"tabindex",h)),Lt(f,m),Lt(f,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:u}),Ha(f,"tox-edit-area__iframe"),f})(r.id,i,zS(r),l).dom;c.onload=()=>{c.onload=null,r.dispatch("load")},r.contentAreaContainer=a.iframeContainer,r.iframeElement=c,r.iframeHTML=(d=>{let u=HS(d)+"<html><head>";tb(d)!==d.documentBaseUrl&&(u+='<base href="'+d.documentBaseURI.getURI()+'" />'),u+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const m=jS(d),p=$S(d),f=d.translate(fb(d));return eb(d)&&(u+='<meta http-equiv="Content-Security-Policy" content="'+eb(d)+'" />'),u+=`</head><body id="${m}" class="mce-content-body ${p}" data-id="${d.id}" aria-label="${f}"><br></body></html>`,u})(r),jg.add(a.iframeContainer,c)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=jg.isHidden(o.editorContainer)),n.getElement().style.display="none",jg.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const a=r.iframeElement,s=()=>{r.contentDocument=a.contentDocument,Q_(r)};if(Jk(r)||Rt.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close(),s()}else{const l=((t,e,n)=>((r,a,s,i)=>{const c=((d,u)=>m=>{d(m)&&u((p=>{const f=R(lp(p).getOr(p.target)),h=()=>p.stopPropagation(),g=()=>p.preventDefault(),b=de(g,h);return((v,y,E,w,_,k,S)=>({target:v,x:y,y:E,stop:w,prevent:_,kill:k,raw:S}))(f,p.clientX,p.clientY,h,g,b,p)})(m))})(s,i);return r.dom.addEventListener(a,c,!1),{unbind:et(Kx,r,a,c,!1)}})(t,"load",n,()=>{l.unbind(),s()}))(R(a),0,mB);a.srcdoc=r.iframeHTML}})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},ya=qt.DOM,nx=t=>"-"===t.charAt(0),ox=(t,e,n)=>C.from(e).filter(o=>hn(o)&&!jc.has(o)).map(o=>({url:`${t.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:C.some(o)})),rx=bn().deviceType,ax=rx.isPhone(),pB=rx.isTablet(),gl=t=>{if(ue(t))return[];{const e=Yt(t)?t:t.split(/[ ,]/),n=At(e,Ao);return gt(n,hn)}},$g=(t,e)=>bt(t.sections(),e),bB=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Kt(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),vB=(t,e)=>{var n;const o=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?W.extend({},t.external_plugins,o):o},wB=(t,e)=>{const n=t.selection,o=t.dom;return/^ | $/.test(e)?((r,a,s,i)=>{const l=R(r.getRoot());return s=Ui(l,F.fromRangeStart(a),i)?s.replace(/^ /,"&nbsp;"):s.replace(/^&nbsp;/," "),zi(l,F.fromRangeEnd(a),i)?s.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):s.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),e,t.schema):e},wd=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:o}=(r=>{if("string"!=typeof r){const a=W.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:a}}return{content:r,details:{}}})(e);yf(t,{...o,content:wB(t,n),format:"html",set:!1,selection:!0}).each(r=>{const a=(i=r.content,l=o,kf(t).editor.insertContent(i,l));var i,l;Cf(t,a,r),t.addVisual()})}},EB={"font-size":"size","font-family":"face"},_B=pt("font"),sx=t=>(e,n)=>C.from(n).map(R).filter(Ge).bind(o=>{return(r=t,a=e,s=o.dom,Gm(R(s),i=>{return Ll(l=i,r).orThunk(()=>_B(l)?Kt(EB,r).bind(c=>oe(l,c)):C.none());var l},i=>Mt(R(a),i))).or(((r,a)=>C.from(qt.DOM.getStyle(a,r,!0)))(t,o.dom));var r,a,s}).getOr(""),xB=sx("font-size"),SB=de(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),sx("font-family")),kB=t=>Ve(t.getBody()).bind(e=>{const n=e.container();return C.from($(n)?n.parentNode:n)}),Wg=(t,e)=>{return n=t,o=Pt(C.some,e),(r=n,C.from(r.selection.getRng()).bind(a=>{const s=r.getBody();return a.startContainer===s&&0===a.startOffset?C.none():C.from(r.selection.getStart(!0))})).orThunk(et(kB,n)).map(R).filter(Ge).bind(o);var n,o,r},ix=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const o=W.explode(t.options.get("font_size_style_values")),r=W.explode(t.options.get("font_size_classes"));return r.length>0?r[n-1]||e:o[n-1]||e}return e}return e},NB=t=>{const e=t.split(/\s*,\s*/);return At(e,n=>-1===n.indexOf(" ")||Dt(n,'"')||Dt(n,"'")?n:`'${n}'`).join(",")},lx=(t,e)=>{if(t.mode.isReadOnly())return;const n=t.dom,o=t.selection.getRng(),r=e?t.selection.getStart():t.selection.getEnd(),a=e?o.startContainer:o.endContainer,s=cl(n,a);if(!s||!s.isContentEditable)return;const i=e?dn:Po,l=We(t);((c,d,u,m)=>{const p=c.dom,f=g=>p.isBlock(g)&&g.parentElement===u,h=f(d)?d:p.getParent(m,f,u);return C.from(h).map(R)})(t,r,s,a).each(c=>{const d=kE(t,a,c.dom,s,!1,l);i(c,R(d)),t.selection.setCursorLocation(d,0),t.dispatch("NewBlock",{newBlock:d}),ll(t,"insertParagraph")})},RB=["toggleview"],cx=t=>Bt(RB,t.toLowerCase());class dx{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,o,r){const a=this.editor,s=e.toLowerCase(),i=r?.skip_focus;if(a.removed||("mcefocus"!==s&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(s)||i?pm(c=a).each(d=>c.selection.setRng(d)):a.focus()),a.dispatch("BeforeExecCommand",{command:e,ui:n,value:o}).isDefaultPrevented()))return!1;var c;const l=this.commands.exec[s];return!!kt(l)&&(l(s,n,o),a.dispatch("ExecCommand",{command:e,ui:n,value:o}),!0)}queryCommandState(e){if(!cx(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),o=this.commands.state[n];return!!kt(o)&&o(n)}queryCommandValue(e){if(!cx(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),o=this.commands.value[n];return kt(o)?o(n):""}addCommands(e,n="exec"){const o=this.commands;Ft(e,(r,a)=>{z(a.toLowerCase().split(","),s=>{o[n][s]=r})})}addCommand(e,n,o){const r=e.toLowerCase();this.commands.exec[r]=(a,s,i)=>n.call(o??this.editor,s,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,o){this.commands.state[e.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(e,n,o){this.commands.value[e.toLowerCase()]=()=>n.call(o??this.editor)}}const Vg=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},ux=(t,e)=>{t.dom.contentEditable=e?"true":"false"},ks=t=>t.readonly,OB=["copy"],BB=W.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class qg{static isNative(e){return!!BB[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Gt}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const o=e.toLowerCase(),r=uu(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const a=this.bindings[o];if(a)for(let s=0,i=a.length;s<i;s++){const l=a[s];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(!1===l.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(e,n,o,r){if(!1===n&&(n=Gt),n){const a={func:n,removed:!1};r&&W.extend(a,r);const s=e.toLowerCase().split(" ");let i=s.length;for(;i--;){const l=s[i];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=o?[a,...c]:[...c,a],this.bindings[l]=c}}return this}off(e,n){if(e){const o=e.toLowerCase().split(" ");let r=o.length;for(;r--;){const a=o[r];let s=this.bindings[a];if(!a)return Ft(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(s){if(n){const i=Xo(s,l=>l.func===n);s=i.fail,this.bindings[a]=s,z(i.pass,l=>{l.removed=!0})}else s.length=0;s.length||(this.toggleEvent(e,!1),delete this.bindings[a])}}}else Ft(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(e,n,o){return this.on(e,n,o,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const pl=t=>(t._eventDispatcher||(t._eventDispatcher=new qg({scope:t,toggleEvent:(e,n)=>{qg.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),Kg={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const o=this;if(o.removed&&"remove"!==t&&"detach"!==t)return uu(t.toLowerCase(),e??{},o);const r=pl(o).dispatch(t,e);if(!1!==n&&o.parent){let a=o.parent();for(;a&&!r.isPropagationStopped();)a.dispatch(t,r,!1),a=a.parent?a.parent():void 0}return r},on(t,e,n){return pl(this).on(t,e,n)},off(t,e){return pl(this).off(t,e)},once(t,e){return pl(this).once(t,e)},hasEventListeners(t){return pl(this).has(t)}},Ed=qt.DOM;let Ca;const _d=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=cb(t);return n?(t.eventRoot||(t.eventRoot=Ed.select(n)[0]),t.eventRoot):t.getBody()},mx=(t,e,n)=>{t.hidden?ks(t)&&((o,r)=>{if("click"!==r.type||Q.metaKeyPressed(r))Bt(OB,r.type)&&o.dispatch(r.type,r);else{const a=R(r.target);(s=o,i=a,Va(i,"a",l=>Mt(l,R(s.getBody()))).bind(l=>oe(l,"href"))).each(s=>{if(r.preventDefault(),/^#/.test(s)){const i=o.dom.select(`${s},[name="${kl(s,"#")}"]`);i.length&&o.selection.scrollIntoView(i[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var s,i})(t,n):t.dispatch(e,n)},fx=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=_d(t,e);if(cb(t)){if(Ca||(Ca={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||Ca&&(Ft(Ca,(r,a)=>{t.dom.unbind(_d(t,a))}),Ca=null)})),Ca[e])return;const o=r=>{const a=r.target,s=t.editorManager.get();let i=s.length;for(;i--;){const l=s[i].getBody();(l===a||Ed.isChildOf(a,l))&&mx(s[i],e,r)}};Ca[e]=o,Ed.bind(n,e,o)}else{const o=r=>{mx(t,e,r)};Ed.bind(n,e,o),t.delegates[e]=o}},gx={...Kg,bindPendingEventDelegates(){const t=this;W.each(t._pendingNativeEvents,e=>{fx(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?fx(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(_d(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(Ft(t.delegates,(o,r)=>{t.dom.unbind(_d(t,r),r,o)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},DB=t=>at(t)?{value:t.split(/[ ,]/),valid:!0}:wn(t,at)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},px=(t,e)=>t+(tr(e.message)?"":`. ${e.message}`),hx=t=>t.valid,Yg=(t,e,n="")=>{const o=e(t);return Mn(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},LB=["design","readonly"],bx=(t,e,n,o)=>{const r=n[e.get()],a=n[o];try{a.activate()}catch(s){return void console.error(`problem while activating editor mode ${o}:`,s)}var s;r.deactivate(),r.editorReadOnly!==a.editorReadOnly&&((t,e)=>{const n=R(t.getBody());var o,r,a;a=e,Dd(o=n,r="mce-content-readonly")&&!a?Qs(o,r):a&&Ha(o,r),e?((o=>{o.readonly=!0,o.selection.controlSelection.hideResizeRect(),o._selectionOverrides.hideFakeCaret(),(r=>{C.from(r.selection.getNode()).each(a=>{a.removeAttribute("data-mce-selected")})})(o)})(t),t.hasEditableRoot()&&ux(n,!0)):((o,r)=>{o.readonly=!1,o.hasEditableRoot()&&ux(r,!0),((a,s)=>{Vg(a,"StyleWithCSS",s),Vg(a,"enableInlineTableEditing",s),Vg(a,"enableObjectResizing",s)})(o,!1),V0(o)&&o.focus(),(a=>{a.selection.setRng(a.selection.getRng())})(o),o.nodeChanged()})(t,n)})(t,a.editorReadOnly),e.set(o),(s=t).dispatch("SwitchMode",{mode:o})},Gg=W.each,Xg=W.explode,PB={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},vx=W.makeMap("alt,ctrl,shift,meta,access"),MB=t=>{const e={},n=Rt.os.isMacOS()||Rt.os.isiOS();Gg(Xg(t.toLowerCase(),"+"),a=>{a in vx?e[a]=!0:/^[0-9]{2,}$/.test(a)?e.keyCode=parseInt(a,10):(e.charCode=a.charCodeAt(0),e.keyCode=PB[a]||a.toUpperCase().charCodeAt(0))});const o=[e.keyCode];let r;for(r in vx)e[r]?o.push(r):e[r]=!1;return e.id=o.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class yx{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(Gg(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),"keydown"===o.type&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===o.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,o,r){const a=this,s=a.normalizeCommandFunc(o);return Gg(Xg(W.trim(e)),i=>{const l=a.createShortcut(i,n,s,r);a.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,o=e;return"string"==typeof o?()=>{n.editor.execCommand(o,!1,null)}:W.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(e,n,o,r){const a=W.map(Xg(e,">"),MB);return a[a.length-1]=W.extend(a[a.length-1],{func:o,scope:r||this.editor}),W.extend(a[0],{desc:this.editor.translate(n),subpatterns:a.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const IB=()=>{const t=(()=>{const e={},n={},o={},r={},a={},s={},i={},l={},c={},d=(u,m)=>(p,f)=>{u[p.toLowerCase()]={...f,type:m}};return{addButton:d(e,"button"),addGroupToolbarButton:d(e,"grouptoolbarbutton"),addToggleButton:d(e,"togglebutton"),addMenuButton:d(e,"menubutton"),addSplitButton:d(e,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(o,"autocompleter"),addContextMenu:d(a,"contextmenu"),addContextToolbar:d(s,"contexttoolbar"),addContextForm:d(s,"contextform"),addSidebar:d(l,"sidebar"),addView:d(c,"views"),addIcon:(u,m)=>r[u.toLowerCase()]=m,addContext:(u,m)=>i[u.toLowerCase()]=m,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:a,contextToolbars:s,sidebars:l,views:c,contexts:i})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,addContext:t.addContext,getAll:t.getAll}},wa=qt.DOM,Cx=W.extend,FB=W.each;class xd{constructor(e,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,Cx(this,gx);const r=this;this.id=e,this.hidden=!1;const a=((p,f)=>{const h=DT(f);return((t,e,n,o,r)=>{var a;const s=t?{mobile:bB(null!==(a=r.mobile)&&void 0!==a?a:{},e)}:{},i=((t,e)=>{const n=(a=>{const i={},l={};return Lr(a,(c,d)=>Bt(t,d),Ps(i),Ps(l)),{t:i,f:l}})(e);return r=n.f,{sections:G(n.t),options:G(r)};var r})(["mobile"],lg(s,r)),l=W.extend(n,o,i.options(),t&&$g(i,"mobile")?((c,d,u={})=>{const m=c.sections(),p=Kt(m,d).getOr({});return W.extend({},u,p)})(i,"mobile"):{},{external_plugins:vB(o,i.options())});return((c,d,u,m)=>{const p=gl(u.forced_plugins),f=gl(m.plugins),h=$g(v=d,"mobile")?v.sections().mobile:{},g=((v,y,E,w)=>v&&$g(y,"mobile")?w:E)(c,d,f,h.plugins?gl(h.plugins):f),b=((v,y)=>[...gl(v),...gl(y)])(p,g);var v;return W.extend(m,{forced_plugins:p,plugins:b})})(t,i,o,l)})(ax||pB,ax,h,p,h)})(o.defaultOptions,n);this.options=((p,f,h=f)=>{const g={},b={},v=(E,w,_)=>{const k=Yg(w,_);return hx(k)?(b[E]=k.value,!0):(console.warn(px(`Invalid value passed for the ${E} option`,k)),!1)},y=E=>bt(g,E);return{register:(E,w)=>{const _=at(w.processor)?(S=>{const O=(()=>{switch(S){case"array":return Yt;case"boolean":return Mn;case"function":return kt;case"number":return re;case"object":return le;case"string":return at;case"string[]":return DB;case"object[]":return P=>wn(P,le);case"regexp":return P=>_a(P,RegExp);default:return se}})();return P=>Yg(P,O,`The value must be a ${S}.`)})(w.processor):w.processor,k=((S,O,P)=>{if(!ce(O)){const x=Yg(O,P);if(hx(x))return x.value;console.error(px(`Invalid default value passed for the "${S}" option`,x))}})(E,w.default,_);g[E]={...w,default:k,processor:_},Kt(b,E).orThunk(()=>Kt(f,E)).each(S=>v(E,S,_))},isRegistered:y,get:E=>Kt(b,E).orThunk(()=>Kt(g,E).map(w=>w.default)).getOrUndefined(),set:(E,w)=>{if(y(E)){const _=g[E];return _.immutable?(console.error(`"${E}" is an immutable option and cannot be updated`),!1):v(E,w,_.processor)}return console.warn(`"${E}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:E=>{const w=y(E);return w&&delete b[E],w},isSet:E=>bt(b,E),debug:()=>{try{console.log(JSON.parse(JSON.stringify(h,(E,w)=>Mn(w)||re(w)||at(w)||Ee(w)||Yt(w)||xa(w)?w:Object.prototype.toString.call(w))))}catch(E){console.error(E)}}}})(0,a,n),(p=>{const f=p.options.register;f("id",{processor:"string",default:p.id}),f("selector",{processor:"string"}),f("target",{processor:"object"}),f("suffix",{processor:"string"}),f("cache_suffix",{processor:"string"}),f("base_url",{processor:"string"}),f("referrer_policy",{processor:"string",default:""}),f("language_load",{processor:"boolean",default:!0}),f("inline",{processor:"boolean",default:!1}),f("iframe_attrs",{processor:"object",default:{}}),f("doctype",{processor:"string",default:"<!DOCTYPE html>"}),f("document_base_url",{processor:"string",default:p.documentBaseUrl}),f("body_id",{processor:Jh(p,"tinymce"),default:"tinymce"}),f("body_class",{processor:Jh(p),default:""}),f("content_security_policy",{processor:"string",default:""}),f("br_in_pre",{processor:"boolean",default:!0}),f("forced_root_block",{processor:h=>{const g=at(h)&&hn(h);return g?{value:h,valid:g}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),f("forced_root_block_attrs",{processor:"object",default:{}}),f("newline_behavior",{processor:h=>{const g=Bt(["block","linebreak","invert","default"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),f("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),f("no_newline_selector",{processor:"string",default:""}),f("keep_styles",{processor:"boolean",default:!0}),f("end_container_on_empty_block",{processor:h=>Mn(h)||at(h)?{valid:!0,value:h}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),f("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),f("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),f("font_size_classes",{processor:"string",default:""}),f("automatic_uploads",{processor:"boolean",default:!0}),f("images_reuse_filename",{processor:"boolean",default:!1}),f("images_replace_blob_uris",{processor:"boolean",default:!0}),f("icons",{processor:"string",default:""}),f("icons_url",{processor:"string",default:""}),f("images_upload_url",{processor:"string",default:""}),f("images_upload_base_path",{processor:"string",default:""}),f("images_upload_credentials",{processor:"boolean",default:!1}),f("images_upload_handler",{processor:"function"}),f("language",{processor:"string",default:"en"}),f("language_url",{processor:"string",default:""}),f("entity_encoding",{processor:"string",default:"named"}),f("indent",{processor:"boolean",default:!0}),f("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_use_margin",{processor:"boolean",default:!1}),f("indentation",{processor:"string",default:"40px"}),f("content_css",{processor:h=>{const g=!1===h||at(h)||wn(h,at);return g?at(h)?{value:At(h.split(","),Ao),valid:g}:Yt(h)?{value:h,valid:g}:!1===h?{value:[],valid:g}:{value:h,valid:g}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Pu(p)?[]:["default"]}),f("content_style",{processor:"string"}),f("content_css_cors",{processor:"boolean",default:!1}),f("font_css",{processor:h=>{const g=at(h)||wn(h,at);return g?{value:Yt(h)?h:At(h.split(","),Ao),valid:g}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),f("inline_boundaries",{processor:"boolean",default:!0}),f("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),f("object_resizing",{processor:h=>{const g=Mn(h)||at(h);return g?!1===h||Bu.isiPhone()||Bu.isiPad()?{value:"",valid:g}:{value:!0===h?"table,img,figure.image,div,video,iframe":h,valid:g}:{valid:!1,message:"Must be boolean or a string"}},default:!FS}),f("resize_img_proportional",{processor:"boolean",default:!0}),f("event_root",{processor:"string"}),f("service_message",{processor:"string"}),f("theme",{processor:h=>!1===h||at(h)||kt(h),default:"silver"}),f("theme_url",{processor:"string"}),f("formats",{processor:"object"}),f("format_empty_lines",{processor:"boolean",default:!1}),f("format_noneditable_selector",{processor:"string",default:""}),f("preview_styles",{processor:h=>{const g=!1===h||at(h);return g?{value:!1===h?"":h,valid:g}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),f("custom_ui_selector",{processor:"string",default:""}),f("hidden_input",{processor:"boolean",default:!0}),f("submit_patch",{processor:"boolean",default:!0}),f("encoding",{processor:"string"}),f("add_form_submit_trigger",{processor:"boolean",default:!0}),f("add_unload_trigger",{processor:"boolean",default:!0}),f("custom_undo_redo_levels",{processor:"number",default:0}),f("disable_nodechange",{processor:"boolean",default:!1}),f("readonly",{processor:"boolean",default:!1}),f("editable_root",{processor:"boolean",default:!0}),f("plugins",{processor:"string[]",default:[]}),f("external_plugins",{processor:"object"}),f("forced_plugins",{processor:"string[]"}),f("model",{processor:"string",default:p.hasPlugin("rtc")?"plugin":"dom"}),f("model_url",{processor:"string"}),f("block_unsupported_drop",{processor:"boolean",default:!0}),f("visual",{processor:"boolean",default:!0}),f("visual_table_class",{processor:"string",default:"mce-item-table"}),f("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),f("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),f("setup",{processor:"function"}),f("init_instance_callback",{processor:"function"}),f("url_converter",{processor:"function",default:p.convertURL}),f("url_converter_scope",{processor:"object",default:p}),f("urlconverter_callback",{processor:"function"}),f("allow_conditional_comments",{processor:"boolean",default:!1}),f("allow_html_data_urls",{processor:"boolean",default:!1}),f("allow_svg_data_urls",{processor:"boolean"}),f("allow_html_in_named_anchor",{processor:"boolean",default:!1}),f("allow_script_urls",{processor:"boolean",default:!1}),f("allow_unsafe_link_target",{processor:"boolean",default:!1}),f("allow_mathml_annotation_encodings",{processor:h=>{const g=wn(h,at);return g?{value:h,valid:g}:{valid:!1,message:"Must be an array of strings."}},default:[]}),f("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),f("fix_list_elements",{processor:"boolean",default:!1}),f("preserve_cdata",{processor:"boolean",default:!1}),f("remove_trailing_brs",{processor:"boolean",default:!0}),f("pad_empty_with_br",{processor:"boolean",default:!1}),f("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),f("element_format",{processor:"string",default:"html"}),f("entities",{processor:"string"}),f("schema",{processor:"string",default:"html5"}),f("convert_urls",{processor:"boolean",default:!0}),f("relative_urls",{processor:"boolean",default:!0}),f("remove_script_host",{processor:"boolean",default:!0}),f("custom_elements",{processor:tc}),f("extended_valid_elements",{processor:"string"}),f("invalid_elements",{processor:"string"}),f("invalid_styles",{processor:tc}),f("valid_children",{processor:"string"}),f("valid_classes",{processor:tc}),f("valid_elements",{processor:"string"}),f("valid_styles",{processor:tc}),f("verify_html",{processor:"boolean",default:!0}),f("auto_focus",{processor:h=>at(h)||!0===h}),f("browser_spellcheck",{processor:"boolean",default:!1}),f("protect",{processor:"array"}),f("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),f("deprecation_warnings",{processor:"boolean",default:!0}),f("a11y_advanced_options",{processor:"boolean",default:!1}),f("api_key",{processor:"string"}),f("license_key",{processor:"string"}),f("paste_block_drop",{processor:"boolean",default:!1}),f("paste_data_images",{processor:"boolean",default:!0}),f("paste_preprocess",{processor:"function"}),f("paste_postprocess",{processor:"function"}),f("paste_webkit_styles",{processor:"string",default:"none"}),f("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),f("paste_merge_formats",{processor:"boolean",default:!0}),f("smart_paste",{processor:"boolean",default:!0}),f("paste_as_text",{processor:"boolean",default:!1}),f("paste_tab_spaces",{processor:"number",default:4}),f("text_patterns",{processor:h=>wn(h,le)||!1===h?{value:Zh(!1===h?[]:h),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),f("text_patterns_lookup",{processor:h=>{return kt(h)?{value:(g=h,b=>{const v=g(b);return Zh(v)}),valid:!0}:{valid:!1,message:"Must be a single function"};var g},default:h=>[]}),f("noneditable_class",{processor:"string",default:"mceNonEditable"}),f("editable_class",{processor:"string",default:"mceEditable"}),f("noneditable_regexp",{processor:h=>wn(h,Qh)?{value:h,valid:!0}:Qh(h)?{value:[h],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),f("table_tab_navigation",{processor:"boolean",default:!0}),f("highlight_on_focus",{processor:"boolean",default:!0}),f("xss_sanitization",{processor:"boolean",default:!0}),f("details_initial_state",{processor:h=>{const g=Bt(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("details_serialized_state",{processor:h=>{const g=Bt(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("init_content_sync",{processor:"boolean",default:!1}),f("newdocument_content",{processor:"string",default:""}),f("sandbox_iframes",{processor:"boolean",default:!0}),f("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),f("convert_unsafe_embeds",{processor:"boolean",default:!0}),p.on("ScriptsLoaded",()=>{f("directionality",{processor:"string",default:Jn.isRtl()?"rtl":void 0}),f("placeholder",{processor:"string",default:US.getAttrib(p.getElement(),"placeholder")})})})(r);const s=this.options.get;var p,f;s("deprecation_warnings")&&(((h,g)=>{const b=(t=>{const e=YC(t,hR),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),Ot(e)})(h),v=(t=>GC(t,vR))(g),y=v.length>0,E=b.length>0,w="mobile"===g.theme;if(y||E||w){const _="\n- ",k=w?`\n\nThemes:${_}mobile`:"",S=y?`\n\nPlugins:${_}${v.join(_)}`:"",O=E?`\n\nOptions:${_}${b.join(_)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+k+S+O)}})(p=n,f=a),((h,g)=>{const b=(t=>YC(t,bR))(h),v=(t=>GC(t,KC.map(e=>e.name)))(g),y=v.length>0,E=b.length>0;if(y||E){const w="\n- ",_=y?`\n\nPlugins:${w}${v.map(_R).join(w)}`:"",k=E?`\n\nOptions:${w}${b.join(w)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+_+k)}})(p,f));const i=s("suffix");i&&(o.suffix=i),this.suffix=o.suffix;const l=s("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const c=Du(r);c&&(Uo.ScriptLoader._setReferrerPolicy(c),qt.DOM.styleSheetLoader._setReferrerPolicy(c));const d=ub(r);q(d)&&qt.DOM.styleSheetLoader._setContentCssCors(d),Xe.languageLoad=s("language_load"),Xe.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new jn(tb(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Pu(r),this.hasVisual=Ak(r),this.shortcuts=new yx(this),this.editorCommands=new dx(this),(t=>{var e;(t=>{(e=>{const n=o=>()=>{z("left,center,right,justify".split(","),r=>{o!==r&&e.formatter.remove("align"+r)}),"none"!==o&&(e.formatter.toggle("align"+o,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=o=>()=>{const r=e.selection,a=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return ee(a,s=>q(e.formatter.matchNode(s,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if("paste"!==n||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let a=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Rt.os.isMacOS()||Rt.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:a,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let a=0;e.dom.getParent(e.selection.getNode(),s=>!ot(s)||a++!==r||(e.selection.select(s),!1),e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Un);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{wd(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{wd(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{wd(e,r)},mceInsertContent:(n,o,r)=>{wd(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Uk(e))}})})(t),(e=>{const n=(o,r,a)=>{if(e.mode.isReadOnly())return;const s=at(a)?{href:a}:a,i=e.dom.getParent(e.selection.getNode(),"a");le(s)&&at(s.href)&&(s.href=s.href.replace(/ /g,"%20"),i&&s.href||e.formatter.remove("link"),s.href&&e.formatter.apply("link",s,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");return void(o&&e.dom.remove(o,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{hw(e,"indent")},Outdent:()=>{bw(e)}}),e.editorCommands.addCommands({Outdent:()=>fw(e)},"state")})(t),(e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{lx(e,!0)},InsertNewBlockAfter:()=>{lx(e,!1)}})})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{ud(TE,e)},mceInsertNewLine:(n,o,r)=>{IE(e,r)},InsertLineBreak:(n,o,r)=>{ud(DE,e)}})})(t),(e=>{(n=>{const o=(r,a)=>{n.formatter.toggle(r,a),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,a,s)=>{o(r,{value:s})},BackColor:(r,a,s)=>{o("hilitecolor",{value:s})},FontName:(r,a,s)=>{((i,l)=>{const c=ix(i,l);i.formatter.toggle("fontname",{value:NB(c)}),i.nodeChanged()})(n,s)},FontSize:(r,a,s)=>{var i;(i=n).formatter.toggle("fontsize",{value:ix(i,s)}),i.nodeChanged()},LineHeight:(r,a,s)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(s)}),i.nodeChanged()},Lang:(r,a,s)=>{var i;o(r,{value:s.code,customValue:null!==(i=s.customCode)&&void 0!==i?i:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,a,s)=>{o(at(s)?s:"p")},mceToggleFormat:(r,a,s)=>{o(s)}})})(e),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return Wg(r=n,a=>SB(r.getBody(),a.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return Wg(r=n,a=>xB(r.getBody(),a.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return Wg(r=n,a=>{const s=R(r.getBody());return Gm(a,l=>Ll(l,"line-height"),et(Mt,s)).getOrThunk(()=>{const l=parseFloat(io(a,"line-height")),c=parseFloat(io(a,"font-size"));return String(l/c)})}).getOr("");var r})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const a=r??e.selection.getNode();if(a!==e.getBody()){const s=e.selection.getBookmark();e.dom.remove(a,!0),e.selection.moveToBookmark(s)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{var a;(a=e).removed||(!0===r?ym(a):(i=>{const l=i.selection,c=i.getBody();let d=l.getRng();i.quirks.refreshContentEditable();const u=p=>{pm(p).each(f=>{p.selection.setRng(f),d=f})};!fs(i)&&i.hasEditableRoot()&&u(i);const m=(p=i,f=l.getNode(),p.dom.getParent(f,h=>"true"===p.dom.getContentEditable(h)));var p,f;if(m&&i.dom.isChildOf(m,c))return((p,f)=>null!==p.dom.getParent(f,h=>"false"===p.dom.getContentEditable(h)))(i,m)||wc(c),wc(m),i.hasEditableRoot()||u(i),W0(i,d),void ym(i);i.inline||(Rt.browser.isOpera()||wc(c),i.getWin().focus()),(Rt.browser.isFirefox()||i.inline)&&(wc(c),W0(i,d)),ym(i)})(a))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const u=s("cache_suffix");u&&(Rt.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:IB(),styleSheetLoader:void 0,show:Ct,hide:Ct,setEnabled:Ct,isEnabled:se},this.mode=(p=>{const f=Ae("design"),h=Ae({design:{activate:Ct,deactivate:Ct,editorReadOnly:!1},readonly:{activate:Ct,deactivate:Ct,editorReadOnly:!0}});return(g=p).on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",b=>{ks(g)&&b.preventDefault()}),g.on("BeforeExecCommand",b=>{"Undo"!==b.command&&"Redo"!==b.command||!ks(g)||b.preventDefault()}),g.on("input",b=>{if(!b.isComposing&&ks(g)){const v=g.undoManager.add();q(v)&&g.undoManager.undo()}}),g.on("compositionend",()=>{if(ks(g)){const b=g.undoManager.add();q(b)&&g.undoManager.undo()}}),{isReadOnly:()=>ks(p),set:g=>((b,v,y,E)=>{if(E!==y.get()){if(!bt(v,E))throw new Error(`Editor mode '${E}' is invalid`);b.initialized?bx(b,y,v,E):b.on("init",()=>bx(b,y,v,E))}})(p,h.get(),f,g),get:()=>f.get(),register:(g,b)=>{h.set(((v,y,E)=>{if(Bt(LB,y))throw new Error(`Cannot override default mode ${y}`);return{...v,[y]:{...E,deactivate:()=>{try{E.deactivate()}catch(w){console.error(`problem while deactivating editor mode ${y}:`,w)}}}}})(h.get(),g,b))}};var g})(r),o.dispatch("SetupEditor",{editor:this});const m=Tk(r);kt(m)&&m.call(r,r)}render(){(e=>{const n=e.id;Jn.setCode(ab(e));const o=()=>{ya.unbind(window,"ready",o),e.render()};if(!Qr.Event.domLoaded)return void ya.bind(window,"ready",o);if(!e.getElement())return;const r=R(e.getElement()),a=He(r);var l;e.on("remove",()=>{Ds(r.dom.attributes,i=>ne(r,i.name)),Lt(r,a)}),e.ui.styleSheetLoader=Fp.forElement(r,{contentCssCors:ub(l=e),referrerPolicy:Du(l)}),Pu(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const s=e.getElement().form||ya.getParent(n,"form");s&&(e.formElement=s,yk(e)&&!qd(e.getElement())&&(ya.insertAfter(ya.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},ya.bind(s,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!Ck(e)||s.submit.nodeType||s.submit.length||s._mceOldSubmit||(s._mceOldSubmit=s.submit,s.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),s._mceOldSubmit(s)))),e.windowManager=JC(e),e.notificationManager=QC(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=ya.encode(i.content))}),wk(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Ek(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=Uo.ScriptLoader,o=()=>{!t.removed&&(r=>{const a=os(r);return!at(a)||q(ba.get(a))})(t)&&(r=>{const a=Lu(r);return q(hs.get(a))})(t)&&fB(t)};((r,a)=>{const s=os(r);if(at(s)&&!nx(s)&&!bt(ba.urls,s)){const i=mk(r),l=i?r.documentBaseURI.toAbsolute(i):`themes/${s}/theme${a}.js`;ba.load(s,l).catch(()=>{Xi(r,"ThemeLoadError",Zi("theme",l,s))})}})(t,e),((r,a)=>{const s=Lu(r);if("plugin"!==s&&!bt(hs.urls,s)){const i=fk(r),l=at(i)?r.documentBaseURI.toAbsolute(i):`models/${s}/model${a}.js`;hs.load(s,l).catch(()=>{Xi(r,"ModelLoadError",Zi("model",l,s))})}})(t,e),((r,a)=>{const s=ab(a),i=ok(a);if(!Jn.hasCode(s)&&"en"!==s){const l=hn(i)?i:`${a.editorManager.baseURL}/langs/${s}.js`;r.add(l).catch(()=>{Xi(a,"LanguageLoadError",Zi("language",l,s))})}})(n,t),((r,a,s)=>{const i=ox(a,"default",s),l=(c=a,C.from(ZS(c)).filter(hn).map(d=>({url:d,name:C.none()}))).orThunk(()=>ox(a,rb(a),""));var c;z((c=>{const d=[],u=m=>{d.push(m)};for(let m=0;m<c.length;m++)c[m].each(u);return d})([i,l]),c=>{r.add(c.url).catch(()=>{var d,u,m;d=a,u=c.url,m=c.name.getOrUndefined(),Xi(d,"IconsLoadError",Zi("icons",u,m))})})})(n,t,e),((r,a)=>{const s=(i,l)=>{bs.load(i,l).catch(()=>{Xi(r,"PluginLoadError",Zi("plugin",l,i))})};Ft(kk(r),(i,l)=>{s(l,i),r.options.set("plugins",ec(r).concat(l))}),z(ec(r),i=>{!(i=W.trim(i))||bs.urls[i]||nx(i)||s(i,`plugins/${i}/plugin${a}.js`)})})(t,e),n.loadQueue().then(o,o)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return fs(this)}translate(e){return Jn.translate(e)}getParam(e,n,o){const r=this.options;return r.isRegistered(e)||(q(o)?r.register(e,{processor:o,default:n}):r.register(e,{processor:se,default:n})),r.isSet(e)||ce(n)?r.get(e):n}hasPlugin(e,n){return!(!Bt(ec(this),e)||n&&void 0===bs.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,o){this.editorCommands.addCommand(e,n,o)}addQueryStateHandler(e,n,o){this.editorCommands.addQueryStateHandler(e,n,o)}addQueryValueHandler(e,n,o){this.editorCommands.addQueryValueHandler(e,n,o)}addShortcut(e,n,o,r){this.shortcuts.add(e,n,o,r)}execCommand(e,n,o,r){return this.editorCommands.execCommand(e,n,o,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(wa.show(e.getContainer()),wa.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(wa.hide(e.getContainer()),wa.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r={...e,load:!0},a=qd(o)?o.value:o.innerHTML,s=n.setContent(a,r);return r.no_events||n.dispatch("LoadContent",{...r,element:o}),s}return""}save(e={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...e,save:!0,element:o};let a=n.getContent(r);const s={...r,content:a};if(s.no_events||n.dispatch("SaveContent",s),"raw"===s.format&&n.dispatch("RawSaveContent",s),a=s.content,qd(o))o.value=a;else{!e.is_removing&&n.inline||(o.innerHTML=a);const i=wa.getParent(n.id,"form");i&&FB(i.elements,l=>l.name!==n.id||(l.value=a,!1))}return s.element=r.element=o=null,!1!==s.set_dirty&&n.setDirty(!1),a}setContent(e,n){return Nf(this,e,n)}getContent(e){return((n,o={})=>{const r=(a=o,s=o.format?o.format:"html",{...a,format:s,get:!0,getInner:!0});var a,s;return NC(n,r).fold(me,a=>{const s=(l=a,kf(n).editor.getContent(l));var l;return AC(n,s,a)})})(this,e)}insertContent(e,n){n&&(e=Cx({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Nf(this,this.startContent,{format:"raw"}):Nf(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||wa.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=wa.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const o=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:o?.body)&&void 0!==n?n:null}convertURL(e,n,o){const r=this,a=r.options.get,s=Bk(r);if(kt(s))return s.call(r,e,o,!0,n);if(!a("convert_urls")||"link"===o||le(o)&&"LINK"===o.nodeName||0===e.indexOf("file:")||0===e.length)return e;const i=new jn(e);return"http"!==i.protocol&&"https"!==i.protocol&&""!==i.protocol?e:a("relative_urls")?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,a("remove_script_host"))}addVisual(e){((n,o)=>{var a;a=o,ve(this).editor.addVisual(a)})(0,e)}setEditableRoot(e){var n,o;(n=this)._editableRoot!==(o=e)&&(n._editableRoot=o,n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged(),n.dispatch("EditableRootStateChange",{state:o}))}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),a=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&q(a?.nextSibling)&&zc.remove(a.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&r&&zc.setStyle((s=e).id,"display",s.orgDisplay),(s=>{s.dispatch("detach")})(e),zc.remove(e.getContainer()),Hc(n),Hc(o),e.destroy()}var s})(this)}destroy(e){((n,o)=>{const{selection:r,dom:a}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),Hc(r),Hc(a)),(s=>{const i=s.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),zc.unbind(i,"submit reset",s.formEventDelegate))})(n),(s=>{const i=s;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=s.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Ns=qt.DOM,Sd=W.each;let kd,wx=!1,on=[];const Nd=t=>{const e=t.type;Sd(xr.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},Ex=t=>{if(t!==wx){const e=qt.DOM;t?(e.bind(window,"resize",Nd),e.bind(window,"scroll",Nd)):(e.unbind(window,"resize",Nd),e.unbind(window,"scroll",Nd)),wx=t}},_x=t=>{const e=on;return on=gt(on,n=>t!==n),xr.activeEditor===t&&(xr.activeEditor=on.length>0?on[0]:null),xr.focusedEditor===t&&(xr.focusedEditor=null),e.length!==on.length},UB="CSS1Compat"!==document.compatMode,xr={...Kg,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"4.1",releaseDate:"TBD",i18n:Jn,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",o=jn.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,n=r.suffix;else{const s=document.getElementsByTagName("script");for(let i=0;i<s.length;i++){const l=s[i].src||"";if(""===l)continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==c.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var a;t.baseURL=new jn(o).toAbsolute(e),t.documentBaseURL=o,t.baseURI=new jn(t.baseURL),t.suffix=n,(a=t).on("AddEditor",et(WN,a)),a.on("RemoveEditor",et(VN,a))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const o=t.plugin_base_urls;void 0!==o&&Ft(o,(r,a)=>{Xe.PluginManager.urls[a]=r})},init(t){const e=this;let n;const o=W.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=s=>{n=s};const a=()=>{let s=0;const i=[];let l;var c;Ns.unbind(window,"ready",a),(()=>{const d=t.onpageload;d&&d.apply(e,[])})(),l=_l((c=t,Rt.browser.isIE()||Rt.browser.isEdge()?(Wc("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):UB?(Wc("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):at(c.selector)?Ns.select(c.selector):q(c.target)?[c.target]:[])),W.each(l,c=>{var d;(d=e.get(c.id))&&d.initialized&&!(d.getContainer()||d.getBody()).parentNode&&(_x(d),d.unbindAllNativeEvents(),d.destroy(!0),d.removed=!0)}),l=W.grep(l,c=>!e.get(c.id)),0===l.length?r([]):Sd(l,c=>{t.inline&&c.tagName.toLowerCase()in o?Wc("Could not initialize inline editor on invalid inline target element",c):((d,u,m)=>{const p=new xd(d,u,e);i.push(p),p.on("init",()=>{++s===l.length&&r(i)}),p.targetElm=p.targetElm||m,p.render()})((d=>{let u=d.id;return u||(u=Kt(d,"name").filter(m=>!Ns.get(m)).getOrThunk(Ns.uniqueId),d.setAttribute("id",u)),u})(c),t,c)})};return Ns.bind(window,"ready",a),new Promise(s=>{n?s(n):r=i=>{s(i)}})},get(t){return 0===arguments.length?on.slice(0):at(t)?fe(on,e=>e.id===t).getOr(null):re(t)&&on[t]?on[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&on.push(t),Ex(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),kd||(kd=o=>{const r=e.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",kd))),t},createEditor(t,e){return this.add(new xd(t,e,this))},remove(t){const e=this;let n;if(t){if(!at(t))return n=t,Ee(e.get(n.id))?null:(_x(n)&&e.dispatch("RemoveEditor",{editor:n}),0===on.length&&window.removeEventListener("beforeunload",kd),n.remove(),Ex(on.length>0),n);Sd(Ns.select(t),o=>{n=e.get(o.id),n&&e.remove(n)})}else for(let o=on.length-1;o>=0;o--)e.remove(on[o])},execCommand(t,e,n){var o;const r=this,a=le(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(t){case"mceAddEditor":return r.get(a)||new xd(a,n.options,r).render(),!0;case"mceRemoveEditor":{const s=r.get(a);return s&&s.remove(),!0}case"mceToggleEditor":{const s=r.get(a);return s?(s.isHidden()?s.show():s.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:()=>{Sd(on,t=>{t.save()})},addI18n:(t,e)=>{Jn.add(t,e)},translate:t=>Jn.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new jn(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new jn(this.baseURL)}};xr.setup();const zB=(()=>{const t=Fo();return{FakeClipboardItem:e=>({items:e,types:Pe(e),getType:n=>Kt(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),xx=Math.min,As=Math.max,Ad=Math.round,Sx=(t,e,n)=>{let o=e.x,r=e.y;const a=t.w,s=t.h,i=e.w,l=e.h,c=(n||"").split("");return"b"===c[0]&&(r+=l),"r"===c[1]&&(o+=i),"c"===c[0]&&(r+=Ad(l/2)),"c"===c[1]&&(o+=Ad(i/2)),"b"===c[3]&&(r-=s),"r"===c[4]&&(o-=a),"c"===c[3]&&(r-=Ad(s/2)),"c"===c[4]&&(o-=Ad(a/2)),Rs(o,r,a,s)},Rs=(t,e,n,o)=>({x:t,y:e,w:n,h:o}),HB={inflate:(t,e,n)=>Rs(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:Sx,findBestRelativePosition:(t,e,n,o)=>{for(let r=0;r<o.length;r++){const a=Sx(t,e,o[r]);if(a.x>=n.x&&a.x+a.w<=n.w+n.x&&a.y>=n.y&&a.y+a.h<=n.h+n.y)return o[r]}return null},intersect:(t,e)=>{const n=As(t.x,e.x),o=As(t.y,e.y),r=xx(t.x+t.w,e.x+e.w),a=xx(t.y+t.h,e.y+e.h);return r-n<0||a-o<0?null:Rs(n,o,r-n,a-o)},clamp:(t,e,n)=>{let o=t.x,r=t.y,a=t.x+t.w,s=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,c=As(0,e.x-o),d=As(0,e.y-r),u=As(0,a-i),m=As(0,s-l);return o+=c,r+=d,n&&(a+=c,s+=d,o-=u,r-=m),a-=u,s-=m,Rs(o,r,a-o,s-r)},create:Rs,fromClientRect:t=>Rs(t.left,t.top,t.width,t.height)},jB=(()=>{const t={},e={},n={};return{load:(o,r)=>{const a=`Script at URL "${r}" failed to load`,s=`Script at URL "${r}" did not call \`tinymce.Resource.add('${o}', data)\` within 1 second`;if(void 0!==t[o])return t[o];{const i=new Promise((l,c)=>{const d=((u,m,p=1e3)=>{let f=!1,h=null;const g=y=>(...E)=>{f||(f=!0,null!==h&&(clearTimeout(h),h=null),y.apply(null,E))},b=g(u),v=g(m);return{start:(...y)=>{f||null!==h||(h=setTimeout(()=>v.apply(null,y),p))},resolve:b,reject:v}})(l,c);e[o]=d.resolve,Uo.ScriptLoader.loadScript(r).then(()=>d.start(s),()=>d.reject(a))});return t[o]=i,i}},add:(o,r)=>{void 0!==e[o]&&(e[o](r),delete e[o]),t[o]=Promise.resolve(r),n[o]=r},has:o=>o in n,get:o=>n[o],unload:o=>{delete t[o],delete n[o]}}})();let hl;try{const t="__storage_test__";hl=window.localStorage,hl.setItem(t,t),hl.removeItem(t)}catch{hl=(()=>{let e={},n=[];const o={getItem:r=>e[r]||null,setItem:(r,a)=>{n.push(r),e[r]=String(a)},key:r=>n[r],removeItem:r=>{n=n.filter(a=>a===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const $B={geom:{Rect:HB},util:{Delay:Nn,Tools:W,VK:Q,URI:jn,EventDispatcher:qg,Observable:Kg,I18n:Jn,LocalStorage:hl,ImageUploader:t=>{const e=n1(),n=r1(t,e);return{upload:(o,r=!0)=>n.upload(o,r?o1(t):void 0)}}},dom:{EventUtils:Qr,TreeWalker:Ne,TextSeeker:ea,DOMUtils:qt,ScriptLoader:Uo,RangeUtils:ua,Serializer:qC,StyleSheetLoader:Ip,ControlSelection:C0,BookmarkManager:Li,Selection:VC,Event:Qr.Event},html:{Styles:du,Entities:Zr,Node:Ze,Schema:ur,DomParser:ps,Writer:iv,Serializer:vr},Env:Rt,AddOnManager:Xe,Annotator:u0,Formatter:i1,UndoManager:c1,EditorCommands:dx,WindowManager:JC,NotificationManager:QC,EditorObservable:gx,Shortcuts:yx,Editor:xd,FocusManager:$0,EditorManager:xr,DOM:qt.DOM,ScriptLoader:Uo.ScriptLoader,PluginManager:bs,ThemeManager:ba,ModelManager:hs,IconManager:jc,Resource:jB,FakeClipboard:zB,trim:W.trim,isArray:W.isArray,is:W.is,toArray:W.toArray,makeMap:W.makeMap,each:W.each,map:W.map,grep:W.grep,inArray:W.inArray,extend:W.extend,walk:W.walk,resolve:W.resolve,explode:W.explode,_addCacheSuffix:W._addCacheSuffix},kx=W.extend(xr,$B);(t=>{window.tinymce=t,window.tinyMCE=t})(kx),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(kx)}(),function(Yo,Pn){"object"==typeof exports&&typeof module<"u"?module.exports=Pn():"function"==typeof define&&define.amd?define(Pn):(Yo=typeof globalThis<"u"?globalThis:Yo||self).DOMPurify=Pn()}(this,function(){"use strict";const{entries:Yo,setPrototypeOf:Pn,isFrozen:Td,getPrototypeOf:vl,getOwnPropertyDescriptor:yl}=Object;let{freeze:Le,seal:gn,create:Os}=Object,{apply:Nr,construct:Ar}=typeof Reflect<"u"&&Reflect;Le||(Le=function($t){return $t}),gn||(gn=function($t){return $t}),Nr||(Nr=function($t,Ot,xt){return $t.apply(Ot,xt)}),Ar||(Ar=function($t,Ot){return new $t(...Ot)});const Rr=de(Array.prototype.forEach),_a=de(Array.prototype.lastIndexOf),at=de(Array.prototype.pop),le=de(Array.prototype.push),xa=de(Array.prototype.splice),Yt=de(String.prototype.toLowerCase),Ee=de(String.prototype.toString),Mn=de(String.prototype.match),ce=de(String.prototype.replace),ue=de(String.prototype.indexOf),q=de(String.prototype.trim),kt=de(Object.prototype.hasOwnProperty),re=de(RegExp.prototype.test),wn=(Ct=TypeError,function(){for(var $t=arguments.length,Ot=new Array($t),xt=0;xt<$t;xt++)Ot[xt]=arguments[xt];return Ar(Ct,Ot)});var Ct;function de($t){return function(Ot){for(var xt=arguments.length,It=new Array(xt>1?xt-1:0),pe=1;pe<xt;pe++)It[pe-1]=arguments[pe];return Nr($t,Ot,It)}}function Pt($t,Ot){let xt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yt;Pn&&Pn($t,null);let It=Ot.length;for(;It--;){let pe=Ot[It];if("string"==typeof pe){const Oe=xt(pe);Oe!==pe&&(Td(Ot)||(Ot[It]=Oe),pe=Oe)}$t[pe]=!0}return $t}function G($t){for(let Ot=0;Ot<$t.length;Ot++)kt($t,Ot)||($t[Ot]=null);return $t}function me($t){const Ot=Os(null);for(const[xt,It]of Yo($t))kt($t,xt)&&(Ot[xt]=Array.isArray(It)?G(It):It&&"object"==typeof It&&It.constructor===Object?me(It):It);return Ot}function Go($t,Ot){for(;null!==$t;){const xt=yl($t,Ot);if(xt){if(xt.get)return de(xt.get);if("function"==typeof xt.value)return de(xt.value)}$t=vl($t)}return function(){return null}}const et=Le(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),So=Le(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Sa=Le(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Bs=Le(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ko=Le(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Gt=Le(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),se=Le(["#text"]),C=Le(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Tr=Le(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Cl=Le(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ka=Le(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),wl=gn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Bt=gn(/<%[\w\W]*|[\w\W]*%>/gm),ee=gn(/\$\{[\w\W]*/gm),At=gn(/^data-[\-\w.\u00B7-\uFFFF]+$/),z=gn(/^aria-[\-\w]+$/),Ds=gn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Xo=gn(/^(?:\w+script|data):/i),gt=gn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Zo=gn(/^html$/i),Ke=gn(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ls=Object.freeze({__proto__:null,ARIA_ATTR:z,ATTR_WHITESPACE:gt,CUSTOM_ELEMENT:Ke,DATA_ATTR:At,DOCTYPE_NAME:Zo,ERB_EXPR:Bt,IS_ALLOWED_URI:Ds,IS_SCRIPT_OR_DATA:Xo,MUSTACHE_EXPR:wl,TMPLIT_EXPR:ee}),Na=function $t(){let Ot=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const xt=D=>$t(D);if(xt.version="3.2.4",xt.removed=[],!Ot||!Ot.document||9!==Ot.document.nodeType||!Ot.Element)return xt.isSupported=!1,xt;let{document:It}=Ot;const pe=It,Oe=pe.currentScript,{DocumentFragment:No,HTMLTemplateElement:_l,Node:Pe,Element:xl,NodeFilter:Ft,NamedNodeMap:Dr=Ot.NamedNodeMap||Ot.MozNamedAttrMap,HTMLFormElement:Od,DOMParser:Ps,trustedTypes:Lr}=Ot,Wn=xl.prototype,Aa=Go(Wn,"cloneNode"),Ms=Go(Wn,"remove"),Kt=Go(Wn,"nextSibling"),bt=Go(Wn,"childNodes"),Vn=Go(Wn,"parentNode");if("function"==typeof _l){const D=It.createElement("template");D.content&&D.content.ownerDocument&&(It=D.content.ownerDocument)}let Ue,Qo="";const{implementation:Pr,createNodeIterator:Ra,createDocumentFragment:Is,getElementsByTagName:Mr}=It,{importNode:Ta}=pe;let ze={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};xt.isSupported="function"==typeof Yo&&"function"==typeof Vn&&Pr&&void 0!==Pr.createHTMLDocument;const{MUSTACHE_EXPR:qn,ERB_EXPR:pn,TMPLIT_EXPR:Oa,DATA_ATTR:Fs,ARIA_ATTR:Ir,IS_SCRIPT_OR_DATA:Sl,ATTR_WHITESPACE:Us,CUSTOM_ELEMENT:kl}=Ls;let{IS_ALLOWED_URI:_e}=Ls,Dt=null;const Ba=Pt({},[...et,...So,...Sa,...ko,...se]);let xe=null;const Ao=Pt({},[...C,...Tr,...Cl,...ka]);let he=Object.seal(Os(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Jo=null,hn=null,tr=!0,er=!0,Da=!1,In=!0,nr=!1,zs=!0,ao=!1,La=!1,Pa=!1,Ro=!1,Fr=!1,Ur=!1,Hs=!0,Nl=!1,js=!0,or=!1,To={},Oo=null;const $s=Pt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ws=null;const Vs=Pt({},["audio","video","img","source","image","track"]);let Ma=null;const qs=Pt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ia="http://www.w3.org/1998/Math/MathML",Fa="http://www.w3.org/2000/svg",Kn="http://www.w3.org/1999/xhtml";let rr=Kn,bn=!1,Ks=null;const Ys=Pt({},[Ia,Fa,Kn],Ee);let sn=Pt({},["mi","mo","mn","ms","mtext"]),ln=Pt({},["annotation-xml"]);const Bo=Pt({},["title","style","font","a","script"]);let zr=null;const Rt=["application/xhtml+xml","text/html"];let Be=null,Do=null;const Al=It.createElement("form"),W=function(D){return D instanceof RegExp||D instanceof Function},so=function(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Do||Do!==D){if(D&&"object"==typeof D||(D={}),D=me(D),zr=-1===Rt.indexOf(D.PARSER_MEDIA_TYPE)?"text/html":D.PARSER_MEDIA_TYPE,Be="application/xhtml+xml"===zr?Ee:Yt,Dt=kt(D,"ALLOWED_TAGS")?Pt({},D.ALLOWED_TAGS,Be):Ba,xe=kt(D,"ALLOWED_ATTR")?Pt({},D.ALLOWED_ATTR,Be):Ao,Ks=kt(D,"ALLOWED_NAMESPACES")?Pt({},D.ALLOWED_NAMESPACES,Ee):Ys,Ma=kt(D,"ADD_URI_SAFE_ATTR")?Pt(me(qs),D.ADD_URI_SAFE_ATTR,Be):qs,Ws=kt(D,"ADD_DATA_URI_TAGS")?Pt(me(Vs),D.ADD_DATA_URI_TAGS,Be):Vs,Oo=kt(D,"FORBID_CONTENTS")?Pt({},D.FORBID_CONTENTS,Be):$s,Jo=kt(D,"FORBID_TAGS")?Pt({},D.FORBID_TAGS,Be):{},hn=kt(D,"FORBID_ATTR")?Pt({},D.FORBID_ATTR,Be):{},To=!!kt(D,"USE_PROFILES")&&D.USE_PROFILES,tr=!1!==D.ALLOW_ARIA_ATTR,er=!1!==D.ALLOW_DATA_ATTR,Da=D.ALLOW_UNKNOWN_PROTOCOLS||!1,In=!1!==D.ALLOW_SELF_CLOSE_IN_ATTR,nr=D.SAFE_FOR_TEMPLATES||!1,zs=!1!==D.SAFE_FOR_XML,ao=D.WHOLE_DOCUMENT||!1,Ro=D.RETURN_DOM||!1,Fr=D.RETURN_DOM_FRAGMENT||!1,Ur=D.RETURN_TRUSTED_TYPE||!1,Pa=D.FORCE_BODY||!1,Hs=!1!==D.SANITIZE_DOM,Nl=D.SANITIZE_NAMED_PROPS||!1,js=!1!==D.KEEP_CONTENT,or=D.IN_PLACE||!1,_e=D.ALLOWED_URI_REGEXP||Ds,rr=D.NAMESPACE||Kn,sn=D.MATHML_TEXT_INTEGRATION_POINTS||sn,ln=D.HTML_INTEGRATION_POINTS||ln,he=D.CUSTOM_ELEMENT_HANDLING||{},D.CUSTOM_ELEMENT_HANDLING&&W(D.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(he.tagNameCheck=D.CUSTOM_ELEMENT_HANDLING.tagNameCheck),D.CUSTOM_ELEMENT_HANDLING&&W(D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(he.attributeNameCheck=D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),D.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(he.allowCustomizedBuiltInElements=D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),nr&&(er=!1),Fr&&(Ro=!0),To&&(Dt=Pt({},se),xe=[],!0===To.html&&(Pt(Dt,et),Pt(xe,C)),!0===To.svg&&(Pt(Dt,So),Pt(xe,Tr),Pt(xe,ka)),!0===To.svgFilters&&(Pt(Dt,Sa),Pt(xe,Tr),Pt(xe,ka)),!0===To.mathMl&&(Pt(Dt,ko),Pt(xe,Cl),Pt(xe,ka))),D.ADD_TAGS&&(Dt===Ba&&(Dt=me(Dt)),Pt(Dt,D.ADD_TAGS,Be)),D.ADD_ATTR&&(xe===Ao&&(xe=me(xe)),Pt(xe,D.ADD_ATTR,Be)),D.ADD_URI_SAFE_ATTR&&Pt(Ma,D.ADD_URI_SAFE_ATTR,Be),D.FORBID_CONTENTS&&(Oo===$s&&(Oo=me(Oo)),Pt(Oo,D.FORBID_CONTENTS,Be)),js&&(Dt["#text"]=!0),ao&&Pt(Dt,["html","head","body"]),Dt.table&&(Pt(Dt,["tbody"]),delete Jo.tbody),D.TRUSTED_TYPES_POLICY){if("function"!=typeof D.TRUSTED_TYPES_POLICY.createHTML)throw wn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof D.TRUSTED_TYPES_POLICY.createScriptURL)throw wn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ue=D.TRUSTED_TYPES_POLICY,Qo=Ue.createHTML("")}else void 0===Ue&&(Ue=function(pt,ct){if("object"!=typeof pt||"function"!=typeof pt.createPolicy)return null;let Et=null;const Lt="data-tt-policy-suffix";ct&&ct.hasAttribute(Lt)&&(Et=ct.getAttribute(Lt));const St="dompurify"+(Et?"#"+Et:"");try{return pt.createPolicy(St,{createHTML:oe=>oe,createScriptURL:oe=>oe})}catch{return console.warn("TrustedTypes policy "+St+" could not be created."),null}}(Lr,Oe)),null!==Ue&&"string"==typeof Qo&&(Qo=Ue.createHTML(""));Le&&Le(D),Do=D}},Gs=Pt({},[...So,...Sa,...Bs]),Se=Pt({},[...ko,...Gt]),Ye=function(D){le(xt.removed,{element:D});try{Vn(D).removeChild(D)}catch{Ms(D)}},Ua=function(D,pt){try{le(xt.removed,{attribute:pt.getAttributeNode(D),from:pt})}catch{le(xt.removed,{attribute:null,from:pt})}if(pt.removeAttribute(D),"is"===D)if(Ro||Fr)try{Ye(pt)}catch{}else try{pt.setAttribute(D,"")}catch{}},Xs=function(D){let pt=null,ct=null;if(Pa)D="<remove></remove>"+D;else{const St=Mn(D,/^[\r\n\t ]+/);ct=St&&St[0]}"application/xhtml+xml"===zr&&rr===Kn&&(D='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+D+"</body></html>");const Et=Ue?Ue.createHTML(D):D;if(rr===Kn)try{pt=(new Ps).parseFromString(Et,zr)}catch{}if(!pt||!pt.documentElement){pt=Pr.createDocument(rr,"template",null);try{pt.documentElement.innerHTML=bn?Qo:Et}catch{}}const Lt=pt.body||pt.documentElement;return D&&ct&&Lt.insertBefore(It.createTextNode(ct),Lt.childNodes[0]||null),rr===Kn?Mr.call(pt,ao?"html":"body")[0]:ao?pt.documentElement:Lt},Rl=function(D){return Ra.call(D.ownerDocument||D,D,Ft.SHOW_ELEMENT|Ft.SHOW_COMMENT|Ft.SHOW_TEXT|Ft.SHOW_PROCESSING_INSTRUCTION|Ft.SHOW_CDATA_SECTION,null)},Zs=function(D){return D instanceof Od&&("string"!=typeof D.nodeName||"string"!=typeof D.textContent||"function"!=typeof D.removeChild||!(D.attributes instanceof Dr)||"function"!=typeof D.removeAttribute||"function"!=typeof D.setAttribute||"string"!=typeof D.namespaceURI||"function"!=typeof D.insertBefore||"function"!=typeof D.hasChildNodes)},Nt=function(D){return"function"==typeof Pe&&D instanceof Pe};function Fn(D,pt,ct){Rr(D,Et=>{Et.call(xt,pt,ct,Do)})}const Hr=function(D){let pt=null;if(Fn(ze.beforeSanitizeElements,D,null),Zs(D))return Ye(D),!0;const ct=Be(D.nodeName);if(Fn(ze.uponSanitizeElement,D,{tagName:ct,allowedTags:Dt}),D.hasChildNodes()&&!Nt(D.firstElementChild)&&re(/<[/\w]/g,D.innerHTML)&&re(/<[/\w]/g,D.textContent)||7===D.nodeType||zs&&8===D.nodeType&&re(/<[/\w]/g,D.data))return Ye(D),!0;if(!Dt[ct]||Jo[ct]){if(!Jo[ct]&&Ge(ct)&&(he.tagNameCheck instanceof RegExp&&re(he.tagNameCheck,ct)||he.tagNameCheck instanceof Function&&he.tagNameCheck(ct)))return!1;if(js&&!Oo[ct]){const Et=Vn(D)||D.parentNode,Lt=bt(D)||D.childNodes;if(Lt&&Et)for(let St=Lt.length-1;St>=0;--St){const oe=Aa(Lt[St],!0);oe.__removalCount=(D.__removalCount||0)+1,Et.insertBefore(oe,Kt(D))}}return Ye(D),!0}return D instanceof xl&&!function(Et){let Lt=Vn(Et);Lt&&Lt.tagName||(Lt={namespaceURI:rr,tagName:"template"});const St=Yt(Et.tagName),oe=Yt(Lt.tagName);return!!Ks[Et.namespaceURI]&&(Et.namespaceURI===Fa?Lt.namespaceURI===Kn?"svg"===St:Lt.namespaceURI===Ia?"svg"===St&&("annotation-xml"===oe||sn[oe]):!!Gs[St]:Et.namespaceURI===Ia?Lt.namespaceURI===Kn?"math"===St:Lt.namespaceURI===Fa?"math"===St&&ln[oe]:!!Se[St]:Et.namespaceURI===Kn?!(Lt.namespaceURI===Fa&&!ln[oe])&&!(Lt.namespaceURI===Ia&&!sn[oe])&&!Se[St]&&(Bo[St]||!Gs[St]):!("application/xhtml+xml"!==zr||!Ks[Et.namespaceURI]))}(D)?(Ye(D),!0):"noscript"!==ct&&"noembed"!==ct&&"noframes"!==ct||!re(/<\/no(script|embed|frames)/i,D.innerHTML)?(nr&&3===D.nodeType&&(pt=D.textContent,Rr([qn,pn,Oa],Et=>{pt=ce(pt,Et," ")}),D.textContent!==pt&&(le(xt.removed,{element:D.cloneNode()}),D.textContent=pt)),Fn(ze.afterSanitizeElements,D,null),!1):(Ye(D),!0)},jr=function(D,pt,ct){if(Hs&&("id"===pt||"name"===pt)&&(ct in It||ct in Al))return!1;if((!er||hn[pt]||!re(Fs,pt))&&(!tr||!re(Ir,pt)))if(!xe[pt]||hn[pt]){if(!(Ge(D)&&(he.tagNameCheck instanceof RegExp&&re(he.tagNameCheck,D)||he.tagNameCheck instanceof Function&&he.tagNameCheck(D))&&(he.attributeNameCheck instanceof RegExp&&re(he.attributeNameCheck,pt)||he.attributeNameCheck instanceof Function&&he.attributeNameCheck(pt))||"is"===pt&&he.allowCustomizedBuiltInElements&&(he.tagNameCheck instanceof RegExp&&re(he.tagNameCheck,ct)||he.tagNameCheck instanceof Function&&he.tagNameCheck(ct))))return!1}else if(!Ma[pt]&&!re(_e,ce(ct,Us,""))&&("src"!==pt&&"xlink:href"!==pt&&"href"!==pt||"script"===D||0!==ue(ct,"data:")||!Ws[D])&&(!Da||re(Sl,ce(ct,Us,"")))&&ct)return!1;return!0},Ge=function(D){return"annotation-xml"!==D&&Mn(D,kl)},Me=function(D){Fn(ze.beforeSanitizeAttributes,D,null);const{attributes:pt}=D;if(!pt||Zs(D))return;const ct={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:xe,forceKeepAttr:void 0};let Et=pt.length;for(;Et--;){const Lt=pt[Et],{name:St,namespaceURI:oe,value:cn}=Lt,ne=Be(St);let He="value"===St?cn:q(cn);if(ct.attrName=ne,ct.attrValue=He,ct.keepAttr=!0,ct.forceKeepAttr=void 0,Fn(ze.uponSanitizeAttribute,D,ct),He=ct.attrValue,!Nl||"id"!==ne&&"name"!==ne||(Ua(St,D),He="user-content-"+He),zs&&re(/((--!?|])>)|<\/(style|title)/i,He)){Ua(St,D);continue}if(ct.forceKeepAttr||(Ua(St,D),!ct.keepAttr))continue;if(!In&&re(/\/>/i,He)){Ua(St,D);continue}nr&&Rr([qn,pn,Oa],ar=>{He=ce(He,ar," ")});const za=Be(D.nodeName);if(jr(za,ne,He)){if(Ue&&"object"==typeof Lr&&"function"==typeof Lr.getAttributeType&&!oe)switch(Lr.getAttributeType(za,ne)){case"TrustedHTML":He=Ue.createHTML(He);break;case"TrustedScriptURL":He=Ue.createScriptURL(He)}try{oe?D.setAttributeNS(oe,St,He):D.setAttribute(St,He),Zs(D)?Ye(D):at(xt.removed)}catch{}}}Fn(ze.afterSanitizeAttributes,D,null)},Bd=function D(pt){let ct=null;const Et=Rl(pt);for(Fn(ze.beforeSanitizeShadowDOM,pt,null);ct=Et.nextNode();)Fn(ze.uponSanitizeShadowNode,ct,null),Hr(ct),Me(ct),ct.content instanceof No&&D(ct.content);Fn(ze.afterSanitizeShadowDOM,pt,null)};return xt.sanitize=function(D){let pt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ct=null,Et=null,Lt=null,St=null;if(bn=!D,bn&&(D="\x3c!--\x3e"),"string"!=typeof D&&!Nt(D)){if("function"!=typeof D.toString)throw wn("toString is not a function");if("string"!=typeof(D=D.toString()))throw wn("dirty is not a string, aborting")}if(!xt.isSupported)return D;if(La||so(pt),xt.removed=[],"string"==typeof D&&(or=!1),or){if(D.nodeName){const ne=Be(D.nodeName);if(!Dt[ne]||Jo[ne])throw wn("root node is forbidden and cannot be sanitized in-place")}}else if(D instanceof Pe)ct=Xs("\x3c!----\x3e"),Et=ct.ownerDocument.importNode(D,!0),1===Et.nodeType&&"BODY"===Et.nodeName||"HTML"===Et.nodeName?ct=Et:ct.appendChild(Et);else{if(!Ro&&!nr&&!ao&&-1===D.indexOf("<"))return Ue&&Ur?Ue.createHTML(D):D;if(ct=Xs(D),!ct)return Ro?null:Ur?Qo:""}ct&&Pa&&Ye(ct.firstChild);const oe=Rl(or?D:ct);for(;Lt=oe.nextNode();)Hr(Lt),Me(Lt),Lt.content instanceof No&&Bd(Lt.content);if(or)return D;if(Ro){if(Fr)for(St=Is.call(ct.ownerDocument);ct.firstChild;)St.appendChild(ct.firstChild);else St=ct;return(xe.shadowroot||xe.shadowrootmode)&&(St=Ta.call(pe,St,!0)),St}let cn=ao?ct.outerHTML:ct.innerHTML;return ao&&Dt["!doctype"]&&ct.ownerDocument&&ct.ownerDocument.doctype&&ct.ownerDocument.doctype.name&&re(Zo,ct.ownerDocument.doctype.name)&&(cn="<!DOCTYPE "+ct.ownerDocument.doctype.name+">\n"+cn),nr&&Rr([qn,pn,Oa],ne=>{cn=ce(cn,ne," ")}),Ue&&Ur?Ue.createHTML(cn):cn},xt.setConfig=function(){so(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),La=!0},xt.clearConfig=function(){Do=null,La=!1},xt.isValidAttribute=function(D,pt,ct){Do||so({});const Et=Be(D),Lt=Be(pt);return jr(Et,Lt,ct)},xt.addHook=function(D,pt){"function"==typeof pt&&le(ze[D],pt)},xt.removeHook=function(D,pt){if(void 0!==pt){const ct=_a(ze[D],pt);return-1===ct?void 0:xa(ze[D],ct,1)[0]}return at(ze[D])},xt.removeHooks=function(D){ze[D]=[]},xt.removeAllHooks=function(){ze={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},xt}();return Na});